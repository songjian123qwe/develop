{"version":3,"sources":["webpack://[name]/./src/uapbd/customer/custapply/card/index.js","webpack://[name]/./src/uapbd/customer/custapply/card/bankacc.js","webpack://[name]/./src/uapbd/customer/custapply/card/bankacc/list.js","webpack://[name]/./src/uapbd/customer/custapply/card/bankacc/form.js"],"names":["_react","__webpack_require__","_bankacc","_ncLightappFront","base","NCBackBtn","NCAffix","NCAnchor","NCPopconfirm","NCFormControl","NCScrollElement","NCScrollLink","PrintOutput","high","NCUploader","ApproveDetail","setDefData","cardCache","getCurrentLastId","getDefData","addCache","getCacheById","updateCache","formId","getNextId","deleteCacheById","tableId","pageId","searchId","appId","queryCardUrl","updateUrl","enableUrl","commitUrl","callbackUrl","printUrl","pk_item","tableIds","eventItems","toggleShow","props","onlyAdd","arguments","length","undefined","showBtn","getUrlParam","status","button","setButtonVisible","cardPagination","setCardPaginationVisible","billstate","form","getFormItemsValue","value","setButtonDisabled","BillHeadInfo","setBillHeadInfoVisible","showBackBtn","setTimeout","setFormStatus","forEach","item","cardTable","setStatus","window","onbeforeunload","Card","_classCallCheck","this","_this2","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","_initialiseProps","state","pk_org","title_code","totalcount","applycount","showBaseInfo","isList","showApprove","approveDetailShow","billid","billNumInitState","curOrg","json","bankaccConfig","formId1","formId2","cardTableId","mainPk","bankaccModalChange","bind","Component","meta","_this3","items","find","attrcode","reg","RegExp","indexOf","refcode","map","key","queryCondition","AppCode","TreeRefActionExt","porCol","itemtype","label","visible","className","width","fixed","render","text","record","index","getStatus","tableBtnAry","includes","push","createOprationButton","area","buttonLimit","onButtonClick","id","tableid","toggleRowView","openModel","delRowsByIndex","console","log","tableButtonClick","_this4","MultiInit","getMultiLang","moduleId","domainName","callback","inlt","setState","initTemplate","pk","getdata","vbillstatus","codeedit","vbillnumedit","setFormItemsDisabled","billnumber","code","updateSpeTableBtnStatus","setDefaultValue","setFormItemsValue","refpk","display","refname","afterEvent","url","content","_this5","finalData","pks","ajax","data","success","res","workflow","toast","color","compositedata","compositedisplay","vBillStatus","mainFormStatus","speTableStatus","finance","sale","creditctl","speTableBtnPre","speTableRefreshBtn","speBtnObj","tableStatus","currTableId","_this6","speTableNames","hasWarning","createButtonApp","_react2","default","createElement","style","padding","buttonClick","changedrows","newvalue","oldvalue","setObj","values","pk_region","setValByKeyAndIndex","info","_extends","modal","close","show","getAllRows","getFormStatus","pk_linkman","setAllFormValue","Linkman","_this7","linkmanData","getAllFormValue","model","allShowKeys","allRows","addResult","rows","sexValue","newRow","rowid","setTableData","getMeta","editLinkmanPk","linkmanIndex","onAfterEdit","onLinkmanAfterEdit","savedData","_this8","linkmanRefer","itemPkLinkman","isEdit","realModuleId","paramObj","pk_respdept1","pk_dept","respdept","setMeta","deptname","pushTo","pagecode","appcode","_this9","_props","createCardPagination","createBillHeadInfo","createForm","createCardTable","createModal","createButton","iconItem","groupItem","backBtnClick","onReturnClick","handlePageInfoChange","pageInfoClick","to","spy","smooth","duration","offset","name","onAfterEvent","onClick","tableHead","getTableHead","onBeforeEvent","onLinkmanBeforeEvent","modelClose","linkmanClose","getTableHeadSpe","resetDeptAndPsnRef","onSpeCardTableAfterEvent","hideAdd","hideDel","hideModelSave","title","beSureBtnClick","delConfirm","createBankaccList","assign","createBankaccForm","linkmanSaveClick","ref","funcode","nodekey","oids","ids","outputType","showlogoUploader","billId","placement","multiple","onHide","onHideUploader","_approvalTrans2","getResult","getAssginUsedr","cancel","turnOff","closeApprove","billtype","createUIDom","template","_this10","modifierMeta","setButtons","context","org_Name","preBillCode","preCustCode","hasPreBillCode","hasPreCustCode","_defineProperty","customer","setItemsProperty","error","message","pfData","baseData","destorg","custprop","billNumEditable","billnumberIsEditable","custCodeEditable","cstBillNumCanEdit","setFormItemsRequired","getFormItemsRequired","custpropFlag","financeorgFlag","pk_financeorg","pfProcess","EmptyAllFormValue","setUrlParam","valid","edit","promptBox","saveClick","formData","isEnable","list","dataObj","pk_bankaccbas","pk_custbank","pk_cust","refresh","unApproveUrl","Cancel","onPrint","onOutput","Attment","speTableEdit","mainFormData","baseInfoData","CustomerPfVO","CustomerVO","getAllData","backVisible","finanTableStatus","resetTableData","action","allData","print","refs","printOutput","open","addLineClick","addRow","pageid","head","body","editTable","i","s","g","customerpf","disableFlag","_props$button","createBrowseIcons","iconArr","maxDestAreaId","speTables","retBillStatus","_formData","approvestate","bodys","hasOwnProperty","isCheckNow","baseInfoMeta","emtpyNesItems","required","afterInsertToastInfo","join","memo","deleteinfo","ts","modelSave","closeModel","createPage","config","table","createSimpleTable","listPage","React","_list2","noFooter","formPage","_form2","size","NCIcon","NCTabs","NCTabPane","deleteUrl","List","_this","doubleClick","e","cardStatus","accnum","pk_banktype","onSelected","selectedRow","hasOprColumn","setPopContent","tableRowButtonClick","getData","updateButtonStatus","setAllTableData","row","search","popContainer","document","querySelector","height","onRowClick","onRowDoubleClick","showIndex","onSelectedAll","saveUrl","exFieldUrl","setBankAccSubDefault","isAdd","getValueFromForm","isdefault","custbank","linkTo","showAccbase","showNetBank","pk_country","operation","pk_currtype","currtypename","accNameValue","accname","visibleAction","unVisibleAction","listData","getAllTableData","checkedRows","getCheckedRows","checkedRow","oldValue","accbasinfo","primaryKey","formValue1","formValue2","bankaccsub","form1","form2","getVisibleRows","currTypeInfo","iconItem2","groupItem2","line-height","showCheck"],"mappings":"wjBACAA,EAAAC,EAAA,UAEAC,KADAD,EAAA,MACAA,EAAA,MACAE,EAAAF,EAAA,OAMAA,EAAA,iLALkBG,OAAXC,cAECC,EAA6EF,OAA7EE,QAAmCC,GAA0CH,OAArEI,aAAqEJ,OAAxDK,cAAwDL,OAA1CG,UAASG,EAAiCN,OAAjCM,gBAAgBC,EAAiBP,OAAjBO,aAC7DC,EAAwCC,OAAxCD,YAAYE,EAA4BD,OAA5BC,WAAWC,EAAiBF,OAAjBE,cACvBC,EAA6GC,YAA7GD,WAA6DE,GAAgDD,YAAjGE,WAAiGF,YAArFG,SAAqFH,YAA3EI,aAA2EJ,YAA7DK,YAA6DL,YAAhDC,kBAG9DK,GAH8GN,YAA9BO,UAA8BP,YAAnBQ,gBAGlF,cACTC,EAAU,aACVC,EAAS,yBACTC,EAAW,SACXC,EAAO,cACPC,EAAe,gDAEfC,EAAY,6CAEZC,EAAY,kDACZC,EAAY,6CACZC,EAAc,+CAKdC,EAAW,gDAIXC,EAAU,gBAGVC,GAAY,iBAAiB,eAAe,eAAe,UAAU,OAAO,YAAY,cAaxFC,GAAc,SAAS,UAAU,aAAa,YAqBpD,SAASC,EAAWC,GAAuB,IAAhBC,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACnCG,EAAUL,EAAMM,YAAY,WAC5BC,EAASP,EAAMM,YAAY,UAC/BC,EAAmB,OAAVA,GAA6B,QAAVA,EAAmB,OAAS,SAGxD,GAAGF,GAAsB,SAAXA,EACVL,EAAMQ,OAAOC,kBAAkB,OAAO,MAAM,SAAS,UAAU,QAAQ,WAAW,QAAQ,SAAS,YAAY,SAAS,WAAW,UAAU,OAAO,UAAU,cAAc,OAAO,SAAS,UAAU,YAAW,GACjNT,EAAMU,eAAeC,yBAAyB,qBAAqB,QAEnE,GAAGV,EACCD,EAAMQ,OAAOC,kBAAkB,OAAO,OAAO,SAAS,UAAU,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,SAAS,YAAY,SAAS,WAAW,UAAU,OAAO,UAAU,gBAAe,GAC3MT,EAAMQ,OAAOC,kBAAkB,QAAQ,OAEtC,CAEY,QAAVF,GAA8B,OAAVA,GACnBP,EAAMQ,OAAOC,kBAAkB,OAAO,MAAM,SAAS,UAAU,QAAQ,WAAW,QAAQ,SAAS,YAAY,SAAS,WAAW,UAAU,OAAO,UAAU,gBAAe,GAC7KT,EAAMQ,OAAOC,kBAAkB,OAAO,SAAS,UAAU,YAAW,GACpET,EAAMU,eAAeC,yBAAyB,qBAAqB,KAGnEX,EAAMQ,OAAOC,kBAAkB,OAAO,SAAS,UAAU,UAAU,OAAO,QAAQ,WAAU,GAC5FT,EAAMQ,OAAOC,kBAAkB,OAAO,MAAM,SAAS,UAAU,QAAQ,WAAW,SAAS,YAAY,WAAW,UAAU,UAAU,gBAAe,GACrJT,EAAMU,eAAeC,yBAAyB,qBAAqB,IAEvE,IAAIC,EAAWZ,EAAMa,KAAKC,kBAAkB/B,EAAO,gBAAgBgC,MAEnD,MAAbH,GAECZ,EAAMQ,OAAOQ,mBAAmB,YAAY,OAAO,SAAS,YAAW,GACvEhB,EAAMQ,OAAOC,kBAAkB,WAAW,gBAAe,IAEtC,KAAbG,GAAiC,KAAbA,GAE1BZ,EAAMQ,OAAOC,kBAAkB,YAAY,OAAO,SAAS,YAAW,GACtET,EAAMQ,OAAOQ,mBAAmB,WAAW,gBAAe,KAE1DhB,EAAMQ,OAAOC,kBAAkB,YAAY,WAAW,OAAO,SAAS,YAAW,GACjFT,EAAMQ,OAAOQ,kBAAkB,eAAc,IAKzDhB,EAAMiB,aAAaC,wBACfC,YAAwB,WAAXZ,IAEjBa,WAAW,kBAAMpB,EAAMa,KAAKQ,cAActC,EAAQwB,IAAQ,GAC1Da,WAAW,kBAAMpB,EAAMa,KAAKQ,cAAc,WAAWd,IAAQ,GAC7DV,EAASyB,QAAQ,SAAAC,GACF,WAARA,GAA6B,QAARA,GAA0B,aAARA,GACtCvB,EAAMwB,UAAUC,UAAUF,EAAMhB,KAM1CmB,OAAOC,eADK,OAAVpB,GAA6B,QAAVA,EACG,KAEA,WACvB,MAAO,QAKJqB,iBACF,SAAAA,EAAY5B,gGAAO6B,CAAAC,KAAAF,GAAA,IAAAG,mKAAAC,CAAAF,MAAAF,EAAAK,WAAAC,OAAAC,eAAAP,IAAAQ,KAAAN,KACT9B,IADS,OAAAqC,EAAAD,KAAAL,GAEfA,EAAKhD,OAASA,EACdgD,EAAK3C,SAAWA,EAChB2C,EAAK7C,QAAUA,EACf6C,EAAKO,OACDC,OAAS,GACTC,WAAa,GACbC,WAAa,EACbC,WAAa,EACbC,cAAe,EACfC,QAAQ,EACRC,aAAa,EACbC,mBAAkB,EAClBC,OAAO,KACPC,iBAAiB,KACjBC,OAAO,GACPC,SAEJnB,EAAKoB,eACDjE,QAAS,WACTkE,QAAS,aACTC,QAAS,cACTC,YAAa,aACbC,OAASxB,EAAK/B,MAAMM,YAAY,MAChCkD,mBAAoBzB,EAAKyB,mBAAmBC,KAAxB1B,IAzBTA,qUADJ2B,qDAkEF1D,EAAO2D,GAAM,IAAAC,EAAA9B,KAClBvB,EAASP,EAAMM,YAAY,UAqE/B,OApEAqD,EAAK5E,GAAQwB,OAASA,EAGtBoD,EAAA,WAAmBE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,UAAjBA,EAAKwC,WAAsBC,IAAM,IAAIC,OAAO,UAGxFN,EAAA,aAAqBE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BlD,KAAOb,EAAMa,KACpF8C,EAAA,aAAqBE,MAAMvC,QAAQ,SAAAC,GAC/BA,EAAKwC,SAASG,QAAQ,eAAiB,GAAsB,kBAAjB3C,EAAKwC,WACnDxC,EAAK4C,QAAU,gDAGjBR,EAAA,kBAA0BE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BlD,KAAOb,EAAMa,KACzF8C,EAAA,kBAA0BE,MAAMvC,QAAQ,SAAAC,GACpCA,EAAKwC,SAASG,QAAQ,eAAiB,GAAsB,kBAAjB3C,EAAKwC,WACnDxC,EAAK4C,QAAU,gDAKXR,EAAK5E,GAAQ8E,MAAQF,EAAK5E,GAAQ8E,MAAMO,IAAI,SAAC7C,EAAM8C,GAO/C,MANoB,UAAjB9C,EAAKwC,WACJxC,EAAK+C,gBACDC,QAAWlF,EACXmF,iBAAiB,sDAGlBjD,IAEX1B,EAASyB,QAAQ,SAAAC,GACb,IAAIkD,GACAC,SAAU,WACVX,SAAU,MACVY,MAAOf,EAAKtB,MAAMY,KAAK,sBACvB0B,SAAS,EACTC,UAAU,YACVC,MAAM,IACNC,MAAM,QACNC,OAAQ,SAACC,EAAMC,EAAQC,GACnB,IAAI5E,EAASP,EAAMwB,UAAU4D,UAAU7D,GACnC8D,EAAyB,WAAX9E,GAAuB,WAAW,UAepD,OAZGgB,GAAQrC,IACPmG,OAEC,UAAU,OAAO,aAAaC,SAAS/D,IAAqB,UAAVhB,GACnD8E,EAAYE,KAAK,WAIV,kBAARhE,IACC8D,MAGGrF,EAAMQ,OAAOgF,qBAChBH,GAEII,KAAM,iBACNC,YAAa,EACbC,cAAe,SAAC3F,EAAO4F,GAAR,OApN3C,SAA0B5F,EAAO4F,EAAIX,EAAMC,EAAQC,EAAMU,GACrD,OAAOD,GACH,IAAK,SACD5F,EAAMwB,UAAUsE,cAAcD,EAASX,GACvC,MACJ,IAAK,SACDlF,EAAMwB,UAAUuE,UAAUF,EAAS,OAAQX,EAAQC,GAEnD,MACJ,IAAK,UACDnF,EAAMwB,UAAUwE,eAAeH,EAASV,GACxC,MACJ,QACIc,QAAQC,IAAIN,EAAIT,IAuM8BgB,CAAiBnG,EAAO4F,EAAIX,EAAMC,EAAQC,EAAM5D,QAK9FoC,EAAKpC,GAAMsC,MAAM0B,KAAKd,KAGnBd,8CAGS,IAAAyC,EAAAtE,KAuCtBA,KAAK9B,MAAMqG,UAAUC,cAAcC,SAAU,cAAeC,WAAY,QAAQC,SAtC3D,SAACvD,EAAM3C,EAAQmG,GAC/BnG,GACH6F,EAAKO,UAAUzD,OAAMwD,QAAM,WAC1BN,EAAKQ,aAAaR,EAAKpG,MAAO,WACXoG,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKrH,OAAO,QAC1C,IAAIwB,EAAS6F,EAAKpG,MAAMM,YAAY,UACpC,GAAa,OAAVC,EAAgB,CACf,IAAIsG,EAAKT,EAAKpG,MAAMM,YAAY,MAChC8F,EAAKU,QAAQD,EAAI,SAACE,GACd,IAAIC,EAAWZ,EAAKpG,MAAMM,YAAY,YAClC2G,EAAeb,EAAKpG,MAAMM,YAAY,gBAE7B,QAAVC,IACC6F,EAAKpG,MAAMa,KAAKqG,qBAAqBd,EAAKrH,QAAQoI,YAAaF,IAC/Db,EAAKpG,MAAMa,KAAKqG,qBAAqB,YAAYE,MAAOJ,KAI/C,QAAVzG,GAA8B,OAAVA,EACnB6F,EAAKiB,wBAAwBN,EAAY,QAGzCX,EAAKiB,wBAAwBN,UAMrCX,EAAKkB,qBAAgBlH,EAAU,WAC3BgG,EAAKpG,MAAMa,KAAK0G,kBAAkBxI,GAAQwD,QAAUxB,MAAMqF,EAAK9D,MAAMW,OAAOuE,MAAMC,QAAQrB,EAAK9D,MAAMW,OAAOyE,WAC5GtB,EAAKuB,WAAWvB,EAAKpG,MAAOjB,EAAQ,SAASqH,EAAK9D,MAAMW,QACxDmD,EAAKiB,yBAAyB,EAAE,mDAwHlDO,EAAIC,GAAS,IAAAC,EAAAhG,KACfiG,GACAC,KAAMlG,KAAK9B,MAAMM,YAAY,OAC7BuH,YAEJ,EAAAlK,EAAAsK,OACIL,MACAM,KAAMH,EACNI,QAAS,SAAAC,GAEFR,GAAOnI,GACH2I,EAAIF,KAAKG,UAAkC,eAArBD,EAAIF,KAAKG,UAAiD,YAArBD,EAAIF,KAAKG,WAMnE,EAAA1K,EAAA2K,QAAQC,MAAO,UAAWV,QAASC,EAAKxF,MAAMY,KAAK,wBACnD4E,EAAKnB,UACD6B,cAAe,KACfC,kBAAkB,IAEtBX,EAAKhB,QAAQgB,EAAK9H,MAAMM,YAAY,MAAO,SAACyG,GACxCe,EAAKT,wBAAwBN,MAXjCe,EAAKnB,UACD6B,cAAeJ,EAAIF,KACnBO,kBAAkB,IAatBb,GAAOlI,KACX,EAAA/B,EAAA2K,QAAOT,QAAQC,EAAKxF,MAAMY,KAAK,sBAAsBqF,MAAM,YAC3DT,EAAKhB,QAAQgB,EAAK9H,MAAMM,YAAY,MAAO,SAACyG,GACxCe,EAAKT,wBAAwBN,2DAyTiG,IAA1H2B,EAA0HxI,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAA3G,EAAGyI,EAAwGzI,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAvF,SAAU0I,EAA6E1I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAA3D2I,QAAS,SAAUC,KAAM,SAAUC,UAAa,UAE/HC,GAAkB,QAAQ,OAAO,UACjCC,GAAsB,iBAAiB,cAAc,oBAC3DC,MAHqB,UAAU,OAAQ,aAI/B5H,QAAQ,SAACC,EAAM4D,GAC1B,IAAIgE,EAAcP,EAAerH,GACZ,QAAlBoH,GAA8C,OAAlBA,IAA2C,GAAhBD,GACzDQ,EAAaF,EAAe7D,GAA5B,SAA4C,EAC5C+D,EAAaF,EAAe7D,GAA5B,SAA4C,EAChC+D,EAAaF,EAAe7D,GAA5B,WAA8C,EAC9C+D,EAAUD,EAAmB9D,KAAU,GAE7B,QAAfgE,GAAwC,OAAfA,GAChCD,EAAaF,EAAe7D,GAA5B,SAA4C,EAC5C+D,EAAaF,EAAe7D,GAA5B,SAA4C,EAChC+D,EAAaF,EAAe7D,GAA5B,WAA8C,EAC9C+D,EAAUD,EAAmB9D,KAAU,IAGnD+D,EAAaF,EAAe7D,GAA5B,SAA4C,EAC5C+D,EAAaF,EAAe7D,GAA5B,SAA4C,EAChC+D,EAAaF,EAAe7D,GAA5B,WAA8C,EAC9C+D,EAAUD,EAAmB9D,KAAU,KAGrDrD,KAAK9B,MAAMQ,OAAOC,iBAAiByI,wCAGpBE,GAAa,IAAAC,EAAAvH,KAElBwH,GAAiBxH,KAAKQ,MAAMY,KAAK,sBAAsBpB,KAAKQ,MAAMY,KAAK,sBAAsBpB,KAAKQ,MAAMY,KAAK,uBAC7GqG,GAAa,EACbX,MAHe,UAAU,OAAO,aAIxBtH,QAAQ,SAACC,EAAK4D,GACtB,GAAGiE,GAAe7H,GAEd,GADAqH,EAAerH,GAAQ,SACoB,QAAxC8H,EAAKrJ,MAAMwB,UAAU4D,UAAU7D,KAAoBgI,EAGlD,OAFA,EAAA5L,EAAA2K,QAAOC,MAAO,UAAWV,QAASyB,EAAcnE,UAChDoE,GAAa,QAKjBX,EAAerH,GAAQ,SAI5BgI,IAGHzH,KAAK9B,MAAMwB,UAAUC,UAAU2H,EAAY,QAC3CtH,KAAKuF,yBAAyB,EAAE,SAASuB,4CAiQ7B1J,GAAS,IAChBsK,EAAmB1H,KAAK9B,MAAMQ,OAA9BgJ,gBACX,OACCC,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,4BACd4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,mBAAmB+E,OAAQC,QAAS,QACjDL,GACA/D,KAASvG,EAAT,UACAyG,cAAe7D,KAAKgI,YAAYrG,KAAK3B,wDA0EjB9B,EAAOuG,EAAUlC,EAAItD,EAAOgJ,EAAa5E,EAAOD,GAClE,GAAG6E,EAAY,GAAGC,SAASjJ,OAASgJ,EAAY,GAAGE,SAASlJ,MAAO,CAC/D,IAAImJ,KACJA,EAAOnJ,MAAQmE,EAAOiF,OAAOC,UAAUrJ,MACvCmJ,EAAOzC,QAAUvC,EAAOiF,OAAOC,UAAU3C,QACzCzH,EAAMwB,UAAU6I,oBAAoBvI,KAAK5C,QAAQiG,EAAM,iBAAiB+E,GACxEhF,EAAOiF,OAAOC,UAAU3C,QAAU1G,EAAMoD,+CA8G5CrC,KAAK6E,UACD9D,aAAa,2CAKjBf,KAAK6E,UACD9D,aAAa,yCAIR7C,EAAM4F,GACf,OAAOA,GACH,IAAK,UACD9D,KAAK6E,UACD/D,QAAQ,gDAML0H,GACf,IAAI1H,EAAS0H,EAAK1H,cACX0H,EAAK1H,OACTA,GACCd,KAAKqB,cAALoH,GACIrL,QAAS,WACTkE,QAAS,aACTC,QAAS,cACTC,YAAa,aACbC,OAASzB,KAAK9B,MAAMM,YAAY,MAChCkD,mBAAoB1B,KAAK0B,mBAAmBC,KAAK3B,OAC9CwI,GAEPxI,KAAK9B,MAAMwK,MAAMC,MAAM,eACvB3I,KAAK9B,MAAMwK,MAAME,KAAK,iBAGtB5I,KAAKqB,eACDjE,QAAS,WACTkE,QAAS,aACTC,QAAS,cACTC,YAAa,aACbC,OAASzB,KAAK9B,MAAMM,YAAY,MAChCkD,mBAAoB1B,KAAK0B,mBAAmBC,KAAK3B,OAErDA,KAAK9B,MAAMwK,MAAMC,MAAM,eACvB3I,KAAK9B,MAAMwK,MAAME,KAAK,qDAKjB1K,GACKA,EAAMwB,UAAUmJ,WAAW,gBACjCrJ,QAAQ,SAAAC,GACM,GAAfA,EAAKhB,QACJgB,EAAK4I,OAAO7I,QAAQ,SAAAP,GAChBA,EAAM0G,QAAU1G,EAAMA,uDAMjBf,EAAOkF,EAAQC,GAGhC,GAAiB,QADAnF,EAAMa,KAAK+J,cAAc9I,KAAK/C,QACtB,CACrB,IAAI8H,EAAK3B,EAAOiF,OAAOU,WAAW9J,OAClC,EAAApD,EAAAsK,OACIL,IAryCQ,mDAsyCRM,MAAOrB,MACPsB,QAAS,SAAAC,GACLpI,EAAMwK,MAAME,KAAK,WACjB1K,EAAMa,KAAKiK,iBAAiBC,QAAS3C,EAAIF,KAAK6C,UAC9C/K,EAAMa,KAAKQ,cAAc,UAAU,uDAMhC,IAAA2J,EAAAlJ,KACXmJ,EAAcnJ,KAAK9B,MAAMa,KAAKqK,gBAAgB,WAC9CnD,GACAoD,MAAOF,GAGPG,GAAe,OAAO,MAAM,OAAO,QAAQ,QAC3CC,EAAUvJ,KAAK9B,MAAMwB,UAAUmJ,WAAW,iBAC9C,EAAAhN,EAAAsK,OACIL,IAxzCW,kDAyzCXM,KAAMH,EACNI,QAAS,SAACC,GACN,IAAIkD,GAAY,EACZT,EAAazC,EAAIF,KAUrB,GATAmD,EAAQ/J,QAAQ,SAAAC,GACTA,EAAK4I,OAAOU,WAAW9J,OAAS8J,IAC/BO,EAAY9J,QAAQ,SAAA+C,GAChB9C,EAAK4I,OAAL,cAA0B9F,GAAOoD,QAAUwD,EAAYM,KAAK,GAAGpB,OAAO9F,GAAKtD,QAE/EQ,EAAK4I,OAAOU,WAAW9J,MAAQ8J,EAC/BS,GAAY,MAGhBA,EAAW,CACX,IAAIvK,KACJqK,EAAY9J,QAAQ,SAAA+C,GAKhB,GAJAtD,gBAAoBsD,IAChBtD,MAAOkK,EAAYM,KAAK,GAAGpB,OAAO9F,GAAKtD,MACvC0G,QAASwD,EAAYM,KAAK,GAAGpB,OAAO9F,GAAKtD,OAEnC,OAAPsD,EAAc,CACb,IAAImH,EAAWP,EAAYM,KAAK,GAAGpB,OAAO9F,GAAKtD,MAC/CA,gBAAoBsD,GAAOoD,QAAU+D,GAAwB,KAAZA,EAAkBR,EAAK1I,MAAMY,KAAK,sBAAwB8H,EAAK1I,MAAMY,KAAK,yBAGnInC,EAAM8J,YACF9J,MAAO8J,EACPpD,QAASwD,EAAYM,KAAK,GAAGpB,OAApB,KAAmCpJ,OAEhD,IAAI0K,GACAC,MAAMb,EACNtK,OAAQ,EACR4J,OAAQpJ,GAEZsK,EAAQ9F,KAAKkG,GAEjBT,EAAKhL,MAAMwB,UAAUmK,aAAa,gBAAgBJ,KAAMF,oDAM/CrL,EAAOuG,EAAUlC,EAAKtD,EAAOoE,EAAOD,EAAQ3E,GACnE,IAAIoD,EAAO3D,EAAM2D,KAAKiI,UAoBtB,MAnBa,SAAVrL,IACFgG,EAAW,qBAETrB,EAAOiF,OAAOU,WAAW9J,OAC3Be,KAAK+J,cAAgB3G,EAAOiF,OAAOU,WAAW9J,MAC9C4C,EAAK4C,GAAU1C,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BO,eAAiB,WACjF,OACCuG,WAAY3F,EAAOiF,OAAOU,WAAW9J,UAKvC4C,EAAK4C,GAAU1C,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BO,eAAiB,WACjF,UAEDxC,KAAK+J,cAAgB,MAEtB/J,KAAKgK,aAAe3G,EACpBxB,EAAK4C,GAAU1C,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BgI,YAAcjK,KAAKkK,mBAAmBvI,KAAK3B,OACrG,6CAQWmK,GAAW,IAAAC,EAAApK,KACzBsJ,GAAe,OAAO,MAAM,OAAO,QAAQ,QAC3CC,EAAUvJ,KAAK9B,MAAMwB,UAAUmJ,WAAW,gBAC1CE,EAAaoB,EAAUE,aAAaZ,KAAK,GAAGpB,OAAOU,WAAW9J,MAClEsK,EAAQ/J,QAAQ,SAACC,EAAM4D,GACtB,IAAIiH,EAAgB7K,EAAK4I,OAAOU,WAAW9J,MACxCqL,GAAiBvB,IAAiC,MAAjBuB,GAA0C,IAAjBA,GAAwBjH,GAAS+G,EAAKJ,gBAClGV,EAAY9J,QAAQ,SAAC+C,GAEV,OAAPA,GACF9C,EAAK4I,OAAL,cAA0B9F,GAAOtD,MAAQkL,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,MACjFkL,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,QAC7CQ,EAAK4I,OAAL,cAA0B9F,GAAOoD,QAA8D,GAApDwE,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,MAAamL,EAAK5J,MAAMY,KAAK,sBAAwBgJ,EAAK5J,MAAMY,KAAK,wBAIhI,QAAPmB,GACC9C,EAAK4I,OAAL,WAA0BpJ,MAAQkL,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,MAC7EQ,EAAK4I,OAAL,WAA0B1C,QAAUwE,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,aAExEQ,EAAK4I,OAAL,WAA0BkC,SAGjC9K,EAAK4I,OAAL,cAA0B9F,GAAOtD,MAAQkL,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,MACpFQ,EAAK4I,OAAL,cAA0B9F,GAAOoD,QAAUwE,EAAUE,aAAaZ,KAAK,GAAGpB,OAAO9F,GAAKtD,SAIlGQ,EAAK4I,OAAOU,WAAW9J,MAAQ8J,KAK7C/I,KAAK9B,MAAMwB,UAAUmK,aAAa,gBAAgBJ,KAAMF,+CAGnCrL,EAAOuG,EAAUlC,EAAKtD,EAAQoE,EAAOD,EAAO3E,GAE3D,IAAIoD,EAAO7B,KAAK9B,MAAM2D,KAAKiI,UACvBU,EAAyB,SAAV/L,EAAuBgG,EAAvB,QAAyCA,EA0D5D,MAzDe,WAAZA,IACC5C,EAAK2I,GAAczI,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,gBAAjBA,EAAKwC,WAA4BO,eAAiB,WACpF,OACI/B,OAAQ2C,EAAOiF,OAAO5H,OAAOxB,QAIrC4C,EAAA,QAAgBE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,eAAjBA,EAAKwC,WAA2BO,eAAiB,WAChF,IAAIiI,GACAhK,OAAQ2C,EAAOiF,OAAO5H,OAAOxB,OAKjC,OAHGmE,GAAUA,EAAOiF,QAAUjF,EAAOiF,OAAOqC,cAAgBtH,EAAOiF,OAAOqC,aAAazL,OAA6C,IAApCmE,EAAOiF,OAAOqC,aAAazL,QACvHwL,EAASE,QAAUvH,EAAOiF,OAAOqC,aAAazL,OAE3CwL,GAGX5I,EAAA,aAAqBE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,eAAjBA,EAAKwC,WAA2BO,eAAiB,WACrF,IAAIiI,GACAhK,OAAQ2C,EAAOiF,OAAO5H,OAAOxB,OAKjC,OAHGmE,GAAUA,EAAOiF,QAAUjF,EAAOiF,OAAOqC,cAAgBtH,EAAOiF,OAAOqC,aAAazL,OAA6C,IAApCmE,EAAOiF,OAAOqC,aAAazL,QACvHwL,EAASE,QAAUvH,EAAOiF,OAAOqC,aAAazL,OAE3CwL,IAIA,QAAZhG,IACC5C,EAAK2I,GAAczI,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,YAAjBA,EAAKwC,WAAwBO,eAAiB,WAChF,OACI/B,OAAQ2C,EAAOiF,OAAO5H,OAAOxB,QAIrC4C,EAAA,KAAaE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BO,eAAiB,WAC5E,IAAIiI,GACAhK,OAAQ2C,EAAOiF,OAAO5H,OAAOxB,OAKjC,OAHGmE,GAAUA,EAAOiF,QAAUjF,EAAOiF,OAAOuC,UAAYxH,EAAOiF,OAAOuC,SAAS3L,OAAyC,IAAhCmE,EAAOiF,OAAOuC,SAAS3L,QAC3GwL,EAASE,QAAUvH,EAAOiF,OAAOuC,SAAS3L,OAEvCwL,GAGX5I,EAAA,UAAkBE,MAAMC,KAAK,SAAAvC,GAAA,MAAyB,cAAjBA,EAAKwC,WAA0BO,eAAiB,WACjF,IAAIiI,GACAhK,OAAQ2C,EAAOiF,OAAO5H,OAAOxB,OAKjC,OAHGmE,GAAUA,EAAOiF,QAAUjF,EAAOiF,OAAOuC,UAAYxH,EAAOiF,OAAOuC,SAAS3L,OAAyC,IAAhCmE,EAAOiF,OAAOuC,SAAS3L,QAC3GwL,EAASE,QAAUvH,EAAOiF,OAAOuC,SAAS3L,OAEvCwL,IAGfzK,KAAK9B,MAAM2D,KAAKgJ,QAAQhJ,IAEjB,mDAIc3D,EAAOuG,EAAUlC,EAAItD,EAAOgJ,EAAa5E,EAAOD,GACxE6E,EAAY,GAAGC,SAASjJ,OAASgJ,EAAY,GAAGE,SAASlJ,QAExC,eAAPsD,GAAoC,WAAZkC,EACvBzE,KAAK9B,MAAMwB,UAAU6I,oBAAoB9D,EAASpB,EAAM,gBAAgBpE,MAAOA,EAAMoJ,OAAOsC,QAAQ1L,MAAM0G,QAAS1G,EAAMoJ,OAAOyC,SAASzC,SAE9H,cAAP9F,GAAmC,QAAZkC,GAC3BzE,KAAK9B,MAAMwB,UAAU6I,oBAAoB9D,EAASpB,EAAM,YAAYpE,MAAOA,EAAMoJ,OAAOsC,QAAQ1L,MAAM0G,QAAS1G,EAAMoJ,OAAOyC,SAASzC,kDAS7IrI,KAAK9B,MAAM6M,OAt+CH,SAu+CJC,SAt+CU,yBAu+CVC,QAAS1N,EACTkB,OAAQ,4CAIP,IAAAyM,EAAAlL,KAAAmL,EACkEnL,KAAK9B,MAAtEwB,EADDyL,EACCzL,UAAWX,EADZoM,EACYpM,KAAML,EADlByM,EACkBzM,OAAQgK,EAD1ByC,EAC0BzC,MAAO9J,EADjCuM,EACiCvM,eAAgBO,EADjDgM,EACiDhM,aAC/CiM,EAAwBxM,EAAxBwM,qBACAC,EAAsBlM,EAAtBkM,mBACDC,EAAevM,EAAfuM,WACAC,EAAoB7L,EAApB6L,gBACA7D,EAAiChJ,EAAjCgJ,gBACA8D,GADiC9M,EAAjB+M,aACA/C,EAAhB8C,aACF/M,EAASuB,KAAK9B,MAAMM,YAAY,UAEhCkN,EAAW1L,KAAKQ,MAAMK,aAAe,mBAAqB,kBAE1D8K,EAAY3L,KAAKQ,MAAMK,aAAe,YAAc,YACxD,OACI8G,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,gBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,oBACX4E,EAAAC,QAAAC,cAAC7L,EAAD,KACI2L,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,uBAIX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,4BACVsI,GACOO,aAAc5L,KAAK6L,cAAclK,KAAK3B,QAI9C2H,EAAAC,QAAAC,cAAA,MAAI9E,UAAU,uBAAuB/C,KAAKQ,MAAMY,KAAK,sBAAgD,UAAR3C,EAAA,IAAqBuB,KAAKQ,MAAME,WAAa,KAE9IiH,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACV2E,GACD/D,KAAM,qBAENE,cAAe7D,KAAKgI,YAAYrG,KAAK3B,QAUpCoL,GACGU,qBAAsB9L,KAAK+L,cAAcpK,KAAK3B,WAM9D2H,EAAAC,QAAAC,cAAC5L,EAAD,KACI0L,EAAAC,QAAAC,cAACxL,GACG2P,GAAIhM,KAAK/C,OACTgP,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,wBAExBuG,EAAAC,QAAAC,cAACxL,GACG2P,GAAI,iBACJC,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,wBAExBuG,EAAAC,QAAAC,cAACxL,GACG2P,GAAI,eACJC,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,wBAExBuG,EAAAC,QAAAC,cAACxL,GACG2P,GAAI,eACJC,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,wBAExBuG,EAAAC,QAAAC,cAACxL,GACG2P,GAAI,UACJC,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,wBAExBuG,EAAAC,QAAAC,cAACxL,GACG2P,GAAI,OACJC,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,wBAExBuG,EAAAC,QAAAC,cAACxL,GACG2P,GAAI,YACJC,KAAK,EACLC,QAAQ,EACRC,SAAU,IACVC,QAAS,KAETzE,EAAAC,QAAAC,cAAA,SAAI7H,KAAKQ,MAAMY,KAAK,yBAG5BuG,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAMrM,KAAK/C,QACxB0K,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,qBACVuI,EAAWtL,KAAK/C,QACbqP,aAActM,KAAK6F,WAAWlE,KAAK3B,UAK/C2H,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAMrM,KAAKQ,MAAMY,KAAK,uBACnCuG,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,qBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,mBACrC4E,EAAAC,QAAAC,cAAA,QACkC9E,UAAA,6BAAwC2I,EACxCa,QAAS,WACL,IAAI3D,GAAQsC,EAAK1K,MAAMK,aACvBqK,EAAKrG,UACDhE,aAAc+H,OAI9BjB,EAAAC,QAAAC,cAAA,QAAM9E,UAAU,QAAQ/C,KAAKQ,MAAMY,KAAK,wBAE5CuG,EAAAC,QAAAC,cAAA,OAAK9E,UAAA,mBAA8B4I,EAA9B,KACAL,EAAW,YACRgB,aAActM,KAAK6F,WAAWlE,KAAK3B,aAQ3D2H,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,uBACX4E,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAM,kBACnB1E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVwI,EAAgB,uBAKzB5D,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAM,gBACnB1E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVwI,EAAgB,gBACbiB,UAAWxM,KAAKyM,aAAa9K,KAAK3B,KAAK,gBACvC0M,cAAe1M,KAAK2M,qBAAqBhL,KAAK3B,MAE9C4M,WAAY5M,KAAK6M,aAAalL,KAAK3B,UAI/C2H,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAM,gBACnB1E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVwI,EAAgB,gBACbiB,UAAWxM,KAAKyM,aAAa9K,KAAK3B,KAAK,oBAInD2H,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAM,WACnB1E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVwI,EAAgB,WACbiB,UAAWxM,KAAK8M,gBAAgBnL,KAAK3B,KAAK,WAE1C0M,cAAe1M,KAAK+M,mBAAmBpL,KAAK3B,MAC5CsM,aAActM,KAAKgN,yBAAyBrL,KAAK3B,MACjDiN,SAAQ,EACRC,SAAQ,EACRC,eAAc,MAI1BxF,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAM,QACnB1E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVwI,EAAgB,QACbiB,UAAWxM,KAAK8M,gBAAgBnL,KAAK3B,KAAK,QAC1C0M,cAAe1M,KAAK+M,mBAAmBpL,KAAK3B,MAC5CsM,aAActM,KAAKgN,yBAAyBrL,KAAK3B,MAEjDiN,SAAQ,EACRC,SAAQ,EACRC,eAAc,MAI1BxF,EAAAC,QAAAC,cAACzL,GAAgBiQ,KAAM,aACnB1E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBAEVwI,EAAgB,aACbiB,UAAWxM,KAAK8M,gBAAgBnL,KAAK3B,KAAK,aAE1CiN,SAAQ,EACRC,SAAQ,EACRC,eAAc,MAKzB3B,EAAY,UACT4B,MAAOpN,KAAKQ,MAAMY,KAAK,sBACvB2E,QAAS/F,KAAKQ,MAAMY,KAAK,sBACzBiM,eAAgBrN,KAAKsN,WAAW3L,KAAK3B,SAExC,EAAApE,EAAA2R,mBAAkBnN,OAAOoN,QAAQpM,KAAMpB,KAAKQ,MAAMY,MAAMpB,KAAK9B,OAAO8B,KAAKqB,gBACzE,EAAAzF,EAAA6R,mBAAkBrN,OAAOoN,QAAQpM,KAAMpB,KAAKQ,MAAMY,MAAMpB,KAAK9B,OAAO8B,KAAKqB,eACzEmK,EAAY,WACT4B,MAAOpN,KAAKQ,MAAMY,KAAK,sBACvB2E,QAAUuF,EAAW,cAGrB+B,eAAgBrN,KAAK0N,iBAAiB/L,KAAK3B,SASnD2H,EAAAC,QAAAC,cAACvL,GACGqR,IAAI,cACJ7H,IAAKjI,EACLuI,MACIwH,QAxtDL,cAytDKC,QAxtDL,aAytDKC,KAAO9N,KAAKQ,MAAMuN,IAClBC,WAAa,YAIpBhO,KAAKQ,MAAMyN,kBAAkBtG,EAAAC,QAAAC,cAACrL,GAE3B0R,OAAQ,8CAA8ClO,KAAK9B,MAAMM,YAAY,MAI7E2P,UAAW,eACXC,UAAU,EAEVC,OAAQrO,KAAKsO,eAAe3M,KAAK3B,QAEpCA,KAAKQ,MAAMmG,iBAAmBgB,EAAAC,QAAAC,cAAC0G,EAAA3G,SAC5BwF,MAAOpN,KAAKQ,MAAMY,KAAK,sBACvBgF,KAAMpG,KAAKQ,MAAMkG,cACjBf,QAAS3F,KAAKQ,MAAMmG,iBACpB6H,UAAWxO,KAAKyO,eAAe9M,KAAK3B,MACpC0O,OAAQ1O,KAAK2O,QAAQhN,KAAK3B,QACzB,GACL2H,EAAAC,QAAAC,cAACpL,GACGmM,KAAM5I,KAAKQ,MAAMQ,kBACjB2H,MAAO3I,KAAK4O,aAAajN,KAAK3B,MAC9B6O,SAAS,OACT5N,OAAQjB,KAAKQ,MAAMS,gDA5nDnC6D,aAAe,SAAC5G,EAAOyG,GACnBzG,EAAM4Q,aAEE9D,SAAU3N,GAGb,SAAC+I,GACE,GAAGA,EAAK,CACJ,GAAGA,EAAK2I,SAAS,CACb,IAAIlN,EAAOuE,EAAK2I,SAChBC,EAAKC,aAAa/Q,EAAO2D,GACzB3D,EAAM2D,KAAKgJ,QAAQhJ,GAMvB,GAAGuE,EAAK1H,OAAO,CACX,IAAIA,EAAS0H,EAAK1H,OAClBR,EAAMQ,OAAOwQ,WAAWxQ,GACxBT,EAAWC,GAEZkI,EAAK+I,SACD/I,EAAK+I,QAAQ1O,QAAQ2F,EAAK+I,QAAQC,WACjCJ,EAAKxO,MAAMW,QACPyE,QAASQ,EAAK+I,QAAQC,SACtB1J,MAAMU,EAAK+I,QAAQ1O,SAG/BkE,GAAYA,aAyH5Ba,gBAAkB,SAACY,EAAKzB,GACjByB,IACCA,EAAKiJ,YAAcL,EAAKK,YACxBjJ,EAAKkJ,YAAcN,EAAKM,YACxBlJ,EAAKmJ,eAAiBP,EAAKO,eAC3BnJ,EAAKoJ,eAAiBR,EAAKQ,iBAE/B,EAAA3T,EAAAsK,OACIL,IA/SG,0CAgTHM,OACAC,QAAQ,SAACC,GACL,GAAGA,EAAIF,KAAK,CACR4I,EAAK9Q,MAAMa,KAAKiK,gBAAhByG,KAAkCT,EAAK/R,OAAQqJ,EAAIF,KAAK4I,EAAK/R,QAAQ+R,EAAK/R,UAC1E+R,EAAK9Q,MAAMa,KAAKiK,gBAAhByG,KAAkC,WAAYnJ,EAAIF,KAAKsJ,SAASA,WAEhEV,EAAKW,iBAAiBrJ,GAEtB0I,EAAKK,YAAc/I,EAAIF,KAAKiJ,YAC5BL,EAAKM,YAAchJ,EAAIF,KAAKkJ,YAC5BN,EAAKO,eAAiBjJ,EAAIF,KAAKmJ,eAC/BP,EAAKQ,eAAiBlJ,EAAIF,KAAKoJ,eAE/B,IAAI/O,EAAS6F,EAAIF,KAAKsJ,SAASA,SAASjG,KAAK,GAAGpB,OAAO5H,OAAOxB,MAE1D4C,EAAOmN,EAAK9Q,MAAM2D,KAAKiI,WACP,YAAY,eAAe,mBAAmB,eACrDtK,QAAQ,SAAA+C,GACFV,EAAA,SAAiBE,MAAMC,KAAK,SAAAvC,GAAA,OAAQA,EAAKwC,UAAYM,IAC3DC,eAAiB,WACtB,OACI/B,OAAQA,MAIpBuO,EAAK9Q,MAAM2D,KAAKgJ,QAAQhJ,GAE5B8C,GAAYA,KAEhBiL,MAAM,SAACtJ,IACH,EAAAzK,EAAA2K,QAAOC,MAAO,SAASV,QAASO,EAAIuJ,mBAMhDF,iBAAiB,SAACrJ,GAEd,IAAIwJ,EAASxJ,EAAIF,KAAK4I,EAAK/R,QAAQ+R,EAAK/R,QAAQwM,KAAK,GAEjDsG,EAAWzJ,EAAIF,KAAJ,kBAAiCqD,KAAK,GAGjDhJ,EAASqP,EAAOzH,OAAP,OAIT2H,GAFaF,EAAOzH,OAAP,WAEHyH,EAAOzH,OAAP,SAEV4H,EAAWF,EAAS1H,OAAT,SAIX6H,EAAiD,KAA/B5J,EAAIF,KAAK+J,qBAC/BnB,EAAK9Q,MAAMa,KAAKqG,qBAAqB4J,EAAK/R,QAAQoI,YAAc6K,IAEhE,IAAIE,EAAiD,KAA9B9J,EAAIF,KAAKiK,kBAgBhC,GAfArB,EAAK9Q,MAAMa,KAAKqG,qBAAqB,YAAYE,MAAM8K,IACnDF,EAMkC,MAA/BlB,EAAKxO,MAAMU,kBACV8N,EAAK9Q,MAAMa,KAAKuR,qBAAqBtB,EAAK/R,QAAQoI,WAAa2J,EAAKxO,MAAMU,oBAN5C,MAA/B8N,EAAKxO,MAAMU,mBACV8N,EAAKxO,MAAMU,iBAAmB8N,EAAK9Q,MAAMa,KAAKwR,qBAAqBvB,EAAK/R,OAAO,eAEnF+R,EAAK9Q,MAAMa,KAAKuR,qBAAqBtB,EAAK/R,QAAQoI,YAAa,KAUhE5E,GAAUuP,EAAQ,CACjB,IAAIQ,EAAgC,MAAhB/P,EAAOxB,OAAkC,KAAjB+Q,EAAQ/Q,MACpD+P,EAAK9Q,MAAMa,KAAKqG,qBAAqB,YAAY6K,SAAWO,IAKhE,GAAGP,EAAS,CACR,IAAIQ,EAAmC,KAAlBR,EAAShR,MAC9B+P,EAAK9Q,MAAMa,KAAKuR,qBAAqB,YAAYI,cAAgBD,IACjEzB,EAAK9Q,MAAMa,KAAKqG,qBAAqB,YAAYsL,eAAiBD,IAElE,IAAI5O,EAAOmN,EAAK9Q,MAAM2D,KAAKiI,UACxBjI,GAAgB,MAARA,GAAmC,MAAnBA,EAAA,WACvBA,EAAA,SAAiBE,MAAQF,EAAA,SAAiBE,MAAMO,IAAI,SAAC7C,GAQjD,MANqB,iBAAjBA,EAAKwC,WACLxC,EAAK+C,gBACDC,QAAUlF,EACVmF,iBAAiB,oEAGlBjD,IAEXuP,EAAK9Q,MAAM2D,KAAKgJ,QAAQhJ,WA2CpC4M,eAAiB,SAACxP,GACd+P,EAAK2B,UAAUhT,EAAUsB,SAG7B0P,QAAQ,WACJK,EAAKnK,UACD6B,cAAc,KACdC,kBAAkB,UAI1BqB,YAAa,SAAC9J,EAAO4F,GAGjB,OAAQA,GACJ,IAAK,MACD5F,EAAMa,KAAK6R,kBAAkB,YAC7B1S,EAAMa,KAAK6R,kBAAkB5B,EAAK/R,QAClCc,EAASyB,QAAQ,SAAAC,GACbH,WAAW,kBAAMpB,EAAMwB,UAAUmK,aAAapK,GAAMgK,WAAU,KAwBlEvL,EAAM2S,aACF7F,SAAU3N,EACV4N,QAAS1N,EACTkB,OAAQ,QAEZuQ,EAAKxJ,qBAAgBlH,EAAU,WAC3B0Q,EAAK9Q,MAAMa,KAAK0G,kBAAkBuJ,EAAK/R,QAAQwD,QAAUxB,MAAM+P,EAAKxO,MAAMW,OAAOuE,MAAMC,QAAQqJ,EAAKxO,MAAMW,OAAOyE,WACjHoJ,EAAKnJ,WAAW3H,EAAOjB,EAAQ,SAAS+R,EAAKxO,MAAMW,QACnDlD,EAAWC,GACX8Q,EAAKzJ,yBAAyB,EAAE,UAEpC,MACJ,IAAK,OACDyJ,EAAK8B,MAAM5S,EAAM,OAAO8Q,EAAK+B,KAAKpP,KAAKqN,EAAK9Q,IAC5C,MACJ,IAAK,UACD,EAAArC,EAAAmV,YACIvK,MAAM,UACN2G,MAAQ4B,EAAKxO,MAAMY,KAAK,sBACxB2E,QAAUiJ,EAAKxO,MAAMY,KAAK,sBAC1BiM,eAAiB2B,EAAK1B,WAAW3L,KAAKqN,KAE1C,MACJ,IAAK,OACDA,EAAKiC,UAAU/S,GACf,MACJ,IAAK,SACD,IAAIgT,EAAWhT,EAAMa,KAAKqK,gBAAgB4F,EAAK/R,QAC3CgJ,GACAkL,UAAU,EACVC,SAEAC,GACAC,cAAeJ,EAASzH,KAAK,GAAGpB,OAAOiJ,cAAcrS,MACrDsS,YAAaL,EAASzH,KAAK,GAAGpB,OAAOkJ,YAAYtS,MACjDuS,QAASN,EAASzH,KAAK,GAAGpB,OAAOmJ,QAAQvS,OAE7CgH,EAAUmL,KAAK3N,KAAK4N,IACpB,EAAAxV,EAAAsK,OACIL,IAAKpI,EACL0I,KAAMH,EACNI,QAAS,SAAAC,GACL0I,EAAKhK,QAAQqM,EAAQE,YAAYF,EAAQC,cAAcD,EAAQG,UAC/D,EAAA3V,EAAA2K,QAAOC,MAAO,UAAU2G,MAAO4B,EAAKxO,MAAMY,KAAK,2BAIvD,MACJ,IAAK,UACD8P,EAAWhT,EAAMa,KAAKqK,gBAAgB4F,EAAK/R,QAC3CgJ,GACIkL,UAAU,EACVC,SAEJC,GACIC,cAAeJ,EAASzH,KAAK,GAAGpB,OAAOiJ,cAAcrS,MACrDsS,YAAaL,EAASzH,KAAK,GAAGpB,OAAOkJ,YAAYtS,MACjDuS,QAASN,EAASzH,KAAK,GAAGpB,OAAOmJ,QAAQvS,OAE7CgH,EAAUmL,KAAK3N,KAAK4N,IACpB,EAAAxV,EAAAsK,OACIL,IAAKpI,EACL0I,KAAMH,EACNI,QAAS,SAAAC,GACL0I,EAAKhK,QAAQqM,EAAQE,YAAYF,EAAQC,cAAcD,EAAQG,UAC/D,EAAA3V,EAAA2K,QAAOC,MAAO,UAAU2G,MAAO4B,EAAKxO,MAAMY,KAAK,2BAIvD,MACJ,IAAK,OACDlD,EAAM6M,OAvhBN,SAwhBIC,SAvhBE,yBAwhBFC,QAAS1N,EACTkB,OAAQ,WAEZ,MACJ,IAAK,UACDuQ,EAAKyC,QAAQvT,GACb,MACJ,IAAK,YAGL,IAAK,SACD8Q,EAAK2B,UAAUhT,GACf,MACJ,IAAK,WACDqR,EAAK2B,UAAU/S,GACf,MACJ,IAAK,UAEDoR,EAAKjO,cACL,MACJ,IAAK,YACDiO,EAAK2B,UAAUe,cACf,MACJ,IAAK,UACD,EAAA7V,EAAAmV,YACIvK,MAAM,UACN2G,MAAQ4B,EAAKxO,MAAMY,KAAK,sBACxB2E,QAAUiJ,EAAKxO,MAAMY,KAAK,sBAC1BiM,eAAiB2B,EAAK2C,OAAOhQ,KAAKqN,EAAK9Q,KAE3C,MACJ,IAAK,UACDA,EAAMwK,MAAME,KAAK,eACjB,MACJ,IAAK,WAGL,IAAK,QACDoG,EAAK4C,UACL,MACJ,IAAK,SACD5C,EAAK6C,WACL,MACJ,IAAK,UACD7C,EAAK8C,UACL,MACJ,IAAK,cACD9C,EAAKnK,UACD7D,mBAAkB,EAClBC,OAAO/C,EAAMa,KAAKC,kBAAkB/B,EAAOa,GAASmB,QAExD,MACJ,IAAK,YACD+P,EAAK+C,aAAa,WAClB,MACJ,IAAK,WACD/C,EAAK+C,aAAa,QAClB,MACJ,IAAK,aACD/C,EAAK+C,aAAa,aAClB,MACJ,IAAK,YACD9L,KACA,IAAI+L,EAAe9T,EAAMa,KAAKqK,gBAAgB4F,EAAK/R,QAC/CgV,EAAe/T,EAAMa,KAAKqK,gBAAgB,YAC9CnD,EAAUiM,aAAeF,EACzB/L,EAAUkM,WAAaF,EAEvBlU,EAASyB,QAAQ,SAAAC,GACF,cAANA,IACDwG,EAAUxG,GAAQvB,EAAMwB,UAAU0S,WAAW3S,OAIrD,EAAA5D,EAAAsK,OACIL,IAAKrI,EACL2I,KAAMH,EACNI,QAAS,SAACC,GACNpI,EAAM6M,OAAO,SACTtM,OAAQ,SACRqF,GAAIwC,EAAIF,OAEZ4I,EAAK3N,cAAcI,OAAS6E,EAAIF,KACd4I,EAAKhK,QAAQsB,EAAIF,MACnC4I,EAAKzJ,0BAELyJ,EAAKnK,UACDwN,aAAa,IAGjBrD,EAAK9Q,MAAMwB,UAAUC,UAAU,UAAU,UACzCqP,EAAKsD,iBAAmB,YAGhC,MACJ,IAAK,WACDrM,KACA+L,EAAe9T,EAAMa,KAAKqK,gBAAgB4F,EAAK/R,QAC/CgV,EAAe/T,EAAMa,KAAKqK,gBAAgB,YAC1CnD,EAAUiM,aAAeF,EACzB/L,EAAUkM,WAAaF,EACvBlU,EAASyB,QAAQ,SAAAC,GACF,cAANA,IACDwG,EAAUxG,GAAQvB,EAAMwB,UAAU0S,WAAW3S,OAIrD,EAAA5D,EAAAsK,OACIL,IAAKrI,EACL2I,KAAMH,EACNI,QAAS,SAACC,GACNpI,EAAM6M,OAAO,SACTtM,OAAQ,SACRqF,GAAIwC,EAAIF,OAEZ4I,EAAK3N,cAAcI,OAAS6E,EAAIF,KACd4I,EAAKhK,QAAQsB,EAAIF,MACnC4I,EAAKzJ,0BAELyJ,EAAKnK,UACDwN,aAAa,IAGjBrD,EAAK9Q,MAAMwB,UAAUC,UAAU,OAAO,UACtCqP,EAAKsD,iBAAmB,YAGhC,MACJ,IAAK,aACDrM,KACA+L,EAAe9T,EAAMa,KAAKqK,gBAAgB4F,EAAK/R,QAC/CgV,EAAe/T,EAAMa,KAAKqK,gBAAgB,YAC1CnD,EAAUiM,aAAeF,EACzB/L,EAAUkM,WAAaF,EACvBlU,EAASyB,QAAQ,SAAAC,GACF,cAANA,IACDwG,EAAUxG,GAAQvB,EAAMwB,UAAU0S,WAAW3S,OAIrD,EAAA5D,EAAAsK,OACIL,IAAKrI,EACL2I,KAAMH,EACNI,QAAS,SAACC,GACNpI,EAAM6M,OAAO,SACTtM,OAAQ,SACRqF,GAAIwC,EAAIF,OAEZ4I,EAAK3N,cAAcI,OAAS6E,EAAIF,KACd4I,EAAKhK,QAAQsB,EAAIF,MACnC4I,EAAKzJ,0BAELyJ,EAAKnK,UACDwN,aAAa,IAGjBrD,EAAK9Q,MAAMwB,UAAUC,UAAU,YAAY,aAGnD,MACJ,IAAK,cACDqP,EAAK9Q,MAAMwB,UAAU6S,eAAe,WACpCvD,EAAK9Q,MAAMwB,UAAUC,UAAU,UAAU,UACzCqP,EAAKzJ,0BACL,MACJ,IAAK,aACDyJ,EAAK9Q,MAAMwB,UAAU6S,eAAe,QACpCvD,EAAK9Q,MAAMwB,UAAUC,UAAU,WAAW,UAC1CqP,EAAKzJ,0BACL,MACJ,IAAK,eACDyJ,EAAK9Q,MAAMwB,UAAU6S,eAAe,aACpCvD,EAAK9Q,MAAMwB,UAAUC,UAAU,WAAW,UAC1CqP,EAAKzJ,0BACL,MACJ,IAAK,iBACDyJ,EAAKhK,QAAQgK,EAAK9Q,MAAMM,YAAY,MAAM,MAAM,WAChD,MACJ,IAAK,cACDwQ,EAAKhK,QAAQgK,EAAK9Q,MAAMM,YAAY,MAAM,MAAM,SAChD,MACJ,IAAK,mBACDwQ,EAAKhK,QAAQgK,EAAK9Q,MAAMM,YAAY,MAAM,MAAM,qBA8D5DoQ,aAAa,WACTI,EAAKnK,UACD7D,mBAAmB,UAI3B+P,KAAK,SAAC7S,GACFA,EAAM2S,aACF7F,SAAU3N,EACV4N,QAAS1N,EACTkB,OAAQ,OACRqF,GAAI5F,EAAMM,YAAY,QAE1BP,EAAWC,GACX8Q,EAAKzJ,yBAAyB,EAAE,cAGpCuL,MAAM,SAAC5S,EAAMsU,EAAO7N,GAEhB,IACIyB,GAAQrB,GADH7G,EAAMa,KAAKC,kBAAkB/B,EAAOa,GAASmB,MACvCuT,WAEf,EAAA3W,EAAAsK,OACIL,IAhzBK,4CAizBLM,OACAC,QAAQ,SAAAC,GACDA,GAAOA,EAAIF,OACV4I,EAAK9Q,MAAMa,KAAKqG,qBAAqB4J,EAAK/R,QAAQoI,YAAciB,EAAIF,KAAKjB,eACzE6J,EAAK9Q,MAAMa,KAAKqG,qBAAqB,YAAYE,MAAMgB,EAAIF,KAAKlB,WAChEP,GAAYA,cAM5BgN,OAAO,SAACzT,GAIJ,IAAI6G,EAAKnI,EA/yBE,kCAgzBXoS,EAAKhK,QAAQD,EAAI,SAACE,GACd+J,EAAKzJ,wBAAwBN,KAEjC/G,EAAMa,KAAKQ,cAAcyP,EAAK/R,OAAO,UACrCiB,EAAMa,KAAKQ,cAAc,WAAW,UACpCxB,EAASyB,QAAQ,SAAAC,GACbvB,EAAMwB,UAAUC,UAAUF,EAAK,YAOnCvB,EAAM2S,aACF7F,SAAU3N,EACV4N,QAAS1N,EACTkB,OAAQ,WAEZR,EAAWC,EAAY,IAAN6G,GAAkB,MAANA,SASjC+M,QAAQ,WACJ9C,EAAKxO,MAAMyN,kBAAiB,EAC5Be,EAAKnK,SAASmK,EAAKxO,aAGvB8N,eAAe,WACXU,EAAKxO,MAAMyN,kBAAiB,EAC5Be,EAAKnK,SAASmK,EAAKxO,aAGvBoR,QAAQ,WAEJ,IAAIa,EAAUzD,EAAK9Q,MAAMa,KAAKqK,gBAAgBnM,GAE9C,GAAsB,IAAnBwV,EAAQpU,OAAX,CAKA,IAAI6H,KAEJA,EAAIzC,KAAKgP,EAAQhJ,KAAK,GAAGpB,OAAOvK,GAASmB,QAEzC,EAAApD,EAAA6W,OACI,MACA7U,GAEI+P,QAz2BG,cA02BHC,QAz2BG,aA02BHC,KAAK5H,SAdT,EAAArK,EAAA2K,QAAOT,QAAQiJ,EAAKxO,MAAMY,KAAK,sBAAsBqF,MAAM,kBAmBnEoL,SAAS,WAEL,IAAIY,EAAUzD,EAAK9Q,MAAMa,KAAKqK,gBAAgBnM,GAE9C,GAAsB,IAAnBwV,EAAQpU,OAAX,CAKA,IAAI6H,KAEJA,EAAIzC,KAAKgP,EAAQhJ,KAAK,GAAGpB,OAAOvK,GAASmB,OAEzC+P,EAAKnK,UACDkJ,IAAM7H,GACR8I,EAAK2D,KAAKC,YAAYC,aAVpB,EAAAhX,EAAA2K,QAAOT,QAAQiJ,EAAKxO,MAAMY,KAAK,sBAAsBqF,MAAM,kBAanEgL,QAAQ,SAACvT,GAOLA,EAAM2S,aACF7F,SAAU3N,EACV4N,QAAS1N,EACTkB,OAAOP,EAAMM,YAAY,UACzBsF,GAAG5F,EAAMM,YAAY,QAEzBwQ,EAAKhK,QAAQ9G,EAAMM,YAAY,MAAM,YACjC,EAAA3C,EAAA2K,QAAO4G,MAAM4B,EAAKxO,MAAMY,KAAK,sBAAsBqF,MAAM,oBAIjEqM,aAAa,SAAC/O,GAENiL,EAAK9Q,MAAMwB,UAAUqT,OAAOhP,SAUpCgI,cAAc,SAAC7N,EAAO6G,GAElB,IAAIqB,GACArB,GAAMA,EACNiO,OAAU3V,IAEd,EAAAxB,EAAAsK,OACIL,IAAKtI,EACL4I,KAAMA,EACNC,QAAS,SAACC,GACFA,EAAIF,KAAK6M,OAET/U,EAAMa,KAAKiK,gBAAXyG,KAA8BxS,EAASqJ,EAAIF,KAAK6M,KAAKhW,KACrDiB,EAAM2S,YAAY9L,IAElBuB,EAAIF,KAAK8M,MACThV,EAAMiV,UAAUtJ,aAAazM,EAASkJ,EAAIF,KAAK8M,KAAK9V,IAExDa,EAAWC,YAMvB2H,WAAY,SAAC3H,EAAOuG,EAAUlC,EAAItD,EAAOgJ,EAAamL,EAAGC,EAAGC,GAExD,GAAGtV,EAAWwF,SAASjB,GAAK,CAExB,IAAI6D,KAEAmN,EAAavE,EAAK9Q,MAAMa,KAAKqK,gBAAgB,cAC7CsG,EAAWV,EAAK9Q,MAAMa,KAAKqK,gBAAgB,YAqC/C,GAnCAhD,EAAK8L,aAAeqB,EACpBnN,EAAK+L,WAAazC,EAClBtJ,EAAK7D,IAAMA,EACX6D,EAAK3H,OAASuQ,EAAK9Q,MAAMM,YAAY,UAE3B,UAAP+D,GACCrE,EAAM2D,KAAKiI,UAAX,SAAiC/H,MAAMvC,QAAQ,SAAAC,IAEvC,eAAe,YAAY,mBAAmB,eAAe+D,SAAS/D,EAAKwC,YAC3ExC,EAAK+C,gBACD/B,OAASxB,EAAMA,UAyBrB,WAAPsD,EAAiB,CAChB,IAAIiR,EAA6B,KAAfvU,EAAMA,MACxB+P,EAAK9Q,MAAMa,KAAKqG,qBAAqB,YAAY6K,SAAWuD,EAAY9C,cAAgB8C,IAE5F,GAAU,YAAPjR,EAAkB,CAEjB,IAAIiR,EAA6B,KAAfvU,EAAMA,MACxB+P,EAAK9Q,MAAMa,KAAKuR,qBAAqB,YAAYI,cAAgB8C,IAKrExE,EAAKxJ,gBAAgBY,UAI7BqG,aAAa,SAACrP,GAAW,IAAAqW,EACgBzE,EAAK9Q,MAAMQ,OAA3CgJ,EADgB+L,EAChB/L,gBADgB+L,EACAhI,aACrB,OACI9D,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,4BACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,oBACV2E,GACG/D,KAAM,mBAENE,cAAemL,EAAK8D,aAAanR,KAAKqN,EAAK5R,KAG9C4R,EAAK9Q,MAAMwB,UAAUgU,kBAAkBtW,GACpCuW,SAAU,QAAS,OAAQ,MAAM,UACjCC,cAAe,yBAuBnC5O,QAAU,SAACD,EAAIJ,GAA4B,IAAlBkP,EAAkBzV,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,MACnCgI,GAAQrB,OACZ,EAAAlJ,EAAAsK,OACIL,IAAKtI,EACL4I,OACAC,QAAS,SAACC,GACN,IAAIwN,GAAiB,EACrB,GAAGxN,EAAIF,KAAK,CACR,GAAIE,EAAIF,KAAK6M,KAAM,KAAAc,EACX7C,UACClC,EAAK/R,OAASqJ,EAAIF,KAAK6M,KAAKjE,EAAK/R,SADlCwS,EAAAsE,EAEA,WAAYzN,EAAIF,KAAJ,mBAFZ2N,GAIJ/E,EAAK9Q,MAAMa,KAAKiK,gBAAgBkI,GAChC4C,EAAgBxN,EAAIF,KAAK6M,KAAKjE,EAAK/R,QAAQwM,KAAK,GAAGpB,OAAO2L,aAAa/U,MAE3E,GAAIqH,EAAIF,KAAK6N,MAAO,CAWhB,GAAGJ,EAAUxV,OAAS,EAQlB,YAPAiI,EAAIF,KAAK6N,MAAMzU,QAAQ,SAACC,EAAM4D,GAC1BwQ,EAAUrU,QAAQ,SAACpC,GACZqC,EAAKyU,eAAe9W,IACnB4R,EAAK9Q,MAAMwB,UAAUmK,aAAazM,EAAQkJ,EAAIF,KAAK6N,MAAM5Q,GAAOjG,QAOhFkJ,EAAIF,KAAK6N,MAAMzU,QAAQ,SAACC,EAAM4D,GAC1BtF,EAASyB,QAAQ,SAACpC,GACXqC,EAAKyU,eAAe9W,IACnB4R,EAAK9Q,MAAMwB,UAAUmK,aAAazM,EAAQkJ,EAAIF,KAAK6N,MAAM5Q,GAAOjG,cAYhF4R,EAAK9Q,MAAMa,KAAK6R,kBAAkB5B,EAAK/R,QACvC+R,EAAK9Q,MAAMa,KAAK6R,kBAAkB,YAEtC3S,EAAW+Q,EAAK9Q,MAAa,IAAN6G,GAAkB,MAANA,GACnCiK,EAAKnK,SAASmK,EAAKxO,OAEhBmE,GAA+B,mBAAZA,GAClBA,EAASmP,YAiBzB7C,UAAY,SAAC/S,GACT,IAAI4H,EAhoCI,2CAioCiC,SAArCkJ,EAAK9Q,MAAMM,YAAY,YACvBsH,EAAMrI,GAEV,IAAIwI,KACJ,GAAI/H,EAAMa,KAAKoV,WAAWnF,EAAK/R,QAA/B,CAIA,IAAI+U,EAAe9T,EAAMa,KAAKqK,gBAAgB4F,EAAK/R,QAC/CgV,EAAe/T,EAAMa,KAAKqK,gBAAgB,YAC9CnD,EAAUiM,aAAeF,EACzB/L,EAAUkM,WAAaF,EAEvBlU,EAASyB,QAAQ,SAAAC,GACF,cAANA,IACDwG,EAAUxG,GAAQvB,EAAMwB,UAAU0S,WAAW3S,MAK3D,IAAI2U,EAAepF,EAAK9Q,MAAM2D,KAAKiI,UAE/BuK,MADJD,EAAeA,EAAa1E,SAAS3N,OAExBvC,QAAQ,SAAAC,GACA,GAAjBA,EAAK6U,WACgD,MAApDrC,EAAaxI,KAAK,GAAGpB,OAAO5I,EAAKwC,UAAUhD,OAAqE,IAApDgT,EAAaxI,KAAK,GAAGpB,OAAO5I,EAAKwC,UAAUhD,OACzGoV,EAAc5Q,KAAKhE,EAAKoD,UAK3B,IAAI0R,EAAuB,KACxBF,EAAchW,OAAS,GACzBkW,EAA0BvF,EAAKxO,MAAMY,KAAK,sBAA1C,IAAmEiT,EAAcG,KAAK,OAAtF,IACAxC,EAAavI,KAAK,GAAGpB,OAAOoM,KAAKxV,MAAQsV,GAIzCvC,EAAavI,KAAK,GAAGpB,OAAOoM,KAAKxV,MAAQ,KAGpCgH,EAAUqJ,YAAcN,EAAKM,YAC7BrJ,EAAUuJ,eAAiBR,EAAKQ,gBAEhC,EAAA3T,EAAAsK,OACIL,IAAKA,EACLM,KAAMH,EACNI,QAAS,SAACC,GACN,IAAIvB,EAAKuB,EAAIF,KACblI,EAAM2S,aACF7F,SAAU3N,EACV4N,QAAS1N,EACTkB,OAAQ,SACRqF,GAAIiB,IAERrI,EAAW,QA3pCR,iCA2pC2BqI,GAC9BiK,EAAKhK,QAAQD,EAAI,SAACE,GACd+J,EAAKzJ,wBAAwBN,EAAY,YAItDsP,GACF,EAAA1Y,EAAA2K,QAAOC,MAAO,UAAUV,QAASwO,KAGjC,EAAA1Y,EAAA2K,QAAOC,MAAO,UAAW2G,MAAO4B,EAAKxO,MAAMY,KAAK,kCAOjDkM,WAAa,YACT,EAAAzR,EAAAsK,OACIL,IAhsCM,6CAisCNM,MACIsO,aAEQjU,OAAOuO,EAAK9Q,MAAMa,KAAKC,kBAAkBgQ,EAAK/R,OAAQ,UAAUgC,MAChE6E,GAAkC,MAA9BkL,EAAK9Q,MAAMM,YAAY,MAAYwQ,EAAK9Q,MAAMa,KAAKC,kBAAkBgQ,EAAK/R,OAAQa,GAASmB,MAAM+P,EAAK9Q,MAAMM,YAAY,MAC5HmW,GAAI3F,EAAK9Q,MAAMa,KAAKC,kBAAkBgQ,EAAK/R,OAAQ,MAAMgC,SAIrEoH,QAAS,SAACC,GACHA,GACC0I,EAAK9Q,MAAM6M,OA/rCf,SAgsCQC,SA/rCF,yBAgsCEC,QAAS1N,EACTkB,OAAQ,oBAQ5BmW,UAAY,SAAC7Q,GACTiL,EAAK9Q,MAAMwB,UAAUmV,WAAW9Q,GAChCiL,EAAKiC,UAAUjC,EAAK9Q,YAmjB5B4B,GAAO,EAAAjE,EAAAiZ,eAAA,CAEJhV,aAEYA,+PC5xDCyN,kBAAT,SAA2BrP,EAAM6W,GAAQ,IACtCrV,EAA0DxB,EAA1DwB,UAAWX,EAA+Cb,EAA/Ca,KAAML,EAAyCR,EAAzCQ,OAAQgK,EAAiCxK,EAAjCwK,MAAuBsM,GAAU9W,EAA1BU,eAA0BV,EAAV8W,OAKhDxJ,GAJezM,EAAfuM,WACoB5L,EAApB6L,gBACoB7M,EAApBgJ,gBACsBsN,EAAtBC,kBACgBvM,EAAhB8C,aACF0J,EAAYC,MAAAtN,cAAA,WAAKsN,MAAAtN,cAACuN,EAAAxN,QAADa,KAAUvK,EAAW6W,KAC1C,OAAOvJ,EAAY,eACfzF,QAASmP,EACTG,UAAU,OAIF5H,kBAAT,SAA2BvP,EAAM6W,GAC4B7W,EAA1DwB,UAA0DxB,EAA/Ca,KAA+Cb,EAAzCQ,OADqB,IACbgK,EAAiCxK,EAAjCwK,MACzB8C,GAD0DtN,EAA1BU,eAA0BV,EAAV8W,MAChCtM,EAAhB8C,aACF8J,EAAYH,MAAAtN,cAAA,WAAKsN,MAAAtN,cAAC0N,EAAA3N,QAADa,KAAUvK,EAAW6W,KAC1C,OAAOvJ,EAAY,eACfzF,QAASuP,EACTE,KAAM,MACNH,UAAU,KAtClB,IAAAxZ,EAAAF,EAAA,OACAA,EAAA,UACAA,EAAA,yDACqFG,OAA7EE,QAA6EF,OAArEI,aAAqEJ,OAAxDK,cAAwDL,OAA1CG,SAA0CH,OAAjCM,gBAAiCN,OAAjBO,aAE9CP,OAAf0P,wVCHP9P,EAAAC,EAAA,0DACAE,EAAAF,EAAA,GACoCG,OAA7BI,aAA6BJ,OAAf2Z,OAAe3Z,OAAR4Z,OACLC,cAGjBC,EAAY,4CAEZC,cACF,SAAAA,EAAY3X,gGAAO6B,CAAAC,KAAA6V,GAAA,IAAAC,mKAAA5V,CAAAF,MAAA6V,EAAA1V,WAAAC,OAAAC,eAAAwV,IAAAvV,KAAAN,KACT9B,IADS4X,EAiJnBC,YAAc,SAAC3S,EAAQC,EAAO2S,GAC1B,IAAIxN,GACA1H,QAAQ,EACRmV,WAAY,SACZC,OAAQ9S,EAAO8S,OAAOjX,MACtBkX,YAAa/S,EAAO+S,YAAYlX,OAEjC6W,EAAK5X,MAAMwD,oBACVoU,EAAK5X,MAAMwD,mBAAmB8G,IAzJnBsN,EAiKnBM,WAAW,aA/JPN,EAAK1Y,QAAUc,EAAMd,QACrB0Y,EAAKO,YAAc,KAGnB,IAAIxU,EAAOiU,EAAK5X,MAAM2D,KAAKiI,UACvBwM,GAAe,EAPJ,OAQfzU,EAAKiU,EAAK1Y,SAAS2E,MAAMvC,QAAQ,SAAAC,GACT,OAAjBA,EAAKwC,WACJqU,GAAe,KAGvBpY,EAAMQ,OAAO6X,cAAc,cAAcT,EAAK5X,MAAMkD,KAAK,uBACrDkV,IACAzU,EAAKiU,EAAK1Y,SAAS2E,MAAM0B,MACrBb,SAAU,WACVX,SAAU,MACVY,MAAOiT,EAAK5X,MAAMkD,KAAK,mBACvB6B,MAAO,QACPF,UAAY,aACZD,SAAS,EACTI,OAAQ,SAACC,EAAMC,EAAQC,GAInB,OAAOnF,EAAMQ,OAAOgF,sBAFJ,eAAe,gBAKvBC,KAAM,cACNC,YAAa,EACbC,cAAe,SAAC3F,EAAO4F,GAAQgS,EAAKU,oBAAoBtY,EAAO4F,EAAIX,EAAMC,EAAQC,SAKjGyS,EAAK5X,MAAM2D,KAAKgJ,QAAQhJ,IApCbiU,qUADJlU,4DAyCK1D,EAAO4F,EAAIX,EAAMC,EAAQC,GAAO,IAAApD,EAAAD,KAChD,OAAO8D,GACH,IAAK,eACD,IAAI0E,GACA1H,QAAQ,EACRoV,OAAQ9S,EAAO8S,OAAOjX,MACtBkX,YAAa/S,EAAO+S,YAAYlX,MAChCgX,WAAY,QAEbjW,KAAK9B,MAAMwD,oBACV1B,KAAK9B,MAAMwD,mBAAmB8G,GAElC,MACJ,IAAK,cACDA,GACI/G,OAAQzB,KAAK9B,MAAMuD,OACnByU,OAAQ9S,EAAO8S,OAAOjX,MACtBkX,YAAa/S,EAAO+S,YAAYlX,QAEpC,EAAApD,EAAAsK,OACIL,IAAK8P,EACLxP,KAAMoC,EACNnC,QAAS,SAAAC,GACLrG,EAAKwW,QAAQxW,EAAK/B,wDAQlC8B,KAAK9B,MAAMQ,OAAOC,kBAAkB,UAAU,gBAAe,GAC7DqB,KAAK9B,MAAMQ,OAAOC,kBAAkB,WAAW,aAAa,aAAa,WAAW,WAAW,gBAAe,+CAG9F,IAAAmD,EAAA9B,KAChBA,KAAKyW,QAAQzW,KAAK9B,OAClBoB,WAAW,kBAAMwC,EAAK4U,sBAAqB,mCAGvCxY,GACJ,IAAIkI,GACA3E,OAAQvD,EAAMuD,SAElB,EAAA5F,EAAAsK,OACIL,IAzFM,kDA0FNM,OACAC,QAAS,SAAAC,GAEFA,GAAOA,EAAIF,MAAQE,EAAIF,KAAK8N,eAAehW,EAAMd,SAChDc,EAAM8W,MAAM2B,gBAAgBzY,EAAMd,QAASkJ,EAAIF,KAAKlI,EAAMd,UAG1Dc,EAAM8W,MAAM2B,gBAAgBzY,EAAMd,SAAUqM,iDAMhDvL,EAAM4F,GAAI,IAAAQ,EAAAtE,KAClB,OAAO8D,GACH,IAAK,UACD,IAAI8S,EAAM5W,KAAKqW,YACX7N,GACA1H,QAAQ,EACRmV,WAAY,OAEbjW,KAAK9B,MAAMwD,oBACV1B,KAAK9B,MAAMwD,mBAAmB8G,GAElC,MACJ,IAAK,WACDoO,EAAM5W,KAAKqW,YACXlS,QAAQC,IAAIwS,GACZpO,GACI1H,QAAQ,EACRoV,OAAQU,EAAIV,OAAOjX,MACnBkX,YAAaS,EAAIT,YAAYlX,MAC7BgX,WAAY,QAEbjW,KAAK9B,MAAMwD,oBACV1B,KAAK9B,MAAMwD,mBAAmB8G,GAElC,MACJ,IAAK,aACDoO,EAAM5W,KAAKqW,YACX7N,GACI/G,OAAQzB,KAAK9B,MAAMuD,OACnByU,OAAQU,EAAIV,OAAOjX,MACnBkX,YAAaS,EAAIT,YAAYlX,QAEjC,EAAApD,EAAAsK,OACIL,IAAK8P,EACLxP,KAAMoC,EACNnC,QAAS,SAAAC,GACLhC,EAAKmS,QAAQnS,EAAKpG,UAG1B,MACJ,IAAK,cACD8B,KAAKyW,QAAQzW,KAAK9B,2CAiBnBA,EAAMuG,EAASrB,EAAOC,GAC7BrD,KAAKqW,YAAcjT,mCAKd,IAAA+H,EAC2BnL,KAAK9B,MAA/B8W,EADD7J,EACC6J,MAAOtW,EADRyM,EACQzM,OACPuW,GAFD9J,EACgB0L,OACO7B,EAAtBC,mBACAvN,EAAiChJ,EAAjCgJ,gBAAiChJ,EAAjB+M,aACtB,OAAQ9D,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,gBACf4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,uBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,4BACX4E,EAAAC,QAAAC,cAAA,MAAI9E,UAAU,uBAAuB/C,KAAK9B,MAAMkD,KAAK,wBACzDuG,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACV2E,GACG/D,KAAM,cACNC,YAAa,EACbC,cAAe7D,KAAKgI,YAAYrG,KAAK3B,MACrC8W,aAAcC,SAASC,cAAc,2BAYjDrP,EAAAC,QAAAC,cAAA,OAAKC,OAAQmP,OAAO,UACpBtP,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVkS,EAAkBjV,KAAK5C,SAEpB8Z,WAAYlX,KAAKkX,WAAWvV,KAAK3B,MACjCmX,iBAAkBnX,KAAK+V,YAAYpU,KAAK3B,MACxCoX,WAAW,EACXhB,WAAWpW,KAAKoW,WAAWzU,KAAK3B,MAChCqX,cAAcrX,KAAKoW,WAAWzU,KAAK3B,6BAS5C6V,8UCvNfna,EAAAC,EAAA,UAEAE,KADAF,EAAA,MACAA,EAAA,mLACQK,EAAkDF,OAAlDE,QAAoCD,GAAcD,OAA1CI,aAA0CJ,OAA7BK,cAA6BL,OAAdC,WAGtCub,EAAU,6CACV1B,EAAY,4CACZ2B,EAAa,8CAEbzX,cACF,SAAAA,EAAY5B,gGAAO6B,CAAAC,KAAAF,GAAA,IAAAgW,mKAAA5V,CAAAF,MAAAF,EAAAK,WAAAC,OAAAC,eAAAP,IAAAQ,KAAAN,KACT9B,IADS,OAAA4X,EA6WnB0B,qBAAqB,SAACnU,GAClB,IAAI4C,GACAwR,OAAO,GAEX3B,EAAK4B,iBAAiBzR,GACtBA,EAAUxE,OAASqU,EAAK5X,MAAMuD,OAE9B,IAAIgI,EAAOxD,EAAUvG,UAAU2J,MAAMI,KAErCA,EAAKjK,QAAQ,SAAAoX,GACVA,EAAIvO,OAAOsP,UAAU1Y,OAAO,IAG/BwK,EAAKpG,GAAOgF,OAAOsP,UAAU1Y,OAAO,GAEpC,EAAApD,EAAAsK,OACIL,IAAKwR,EACLlR,KAAMH,EACNI,QAAS,SAAAC,GAELwP,EAAK5X,MAAMwB,UAAUC,UAAUmW,EAAK5X,MAAMsD,YAAY,UACtDsU,EAAK5X,MAAMa,KAAKiK,gBAAhByG,KAAkCqG,EAAK5X,MAAMoD,QAAUgF,EAAIF,KAAK6M,KAAK2E,WACrE9B,EAAK5X,MAAMa,KAAKiK,gBAAhByG,KAAkCqG,EAAK5X,MAAMqD,QAAU+E,EAAIF,KAAK6M,KAAK2E,WAClEtR,EAAIF,KAAK8M,MAAQ5M,EAAIF,KAAK8M,KAAK4C,EAAK5X,MAAMsD,cACzCsU,EAAK5X,MAAMwB,UAAUmK,aAAaiM,EAAK5X,MAAMsD,YAAY8E,EAAIF,KAAK8M,KAAK4C,EAAK5X,MAAMsD,cAEtFsU,EAAKI,OAAS5P,EAAIF,KAAK6M,KAAK2E,SAASnO,KAAK,GAAGpB,OAAO6N,OAAOjX,MAC3D6W,EAAKK,YAAc7P,EAAIF,KAAK6M,KAAK2E,SAASnO,KAAK,GAAGpB,OAAO8N,YAAYlX,MACrE6W,EAAKG,WAAa,SAClBH,EAAKY,yBA1YEZ,EA0anBxI,WAAa,YACT,EAAAzR,EAAAsK,OACIL,IAAK8P,EACLxP,MACIsO,aAEQ5Q,GAAIgS,EAAK5X,MAAMM,YAAY,MAC3BmW,GAAImB,EAAK5X,MAAMa,KAAKC,kBAAkB8W,EAAK7Y,OAAQ,MAAMgC,SAIrEoH,QAAS,SAACC,GACHA,GACCwP,EAAK5X,MAAM2Z,OAAO,0BAvbf/B,EA+btBrJ,aAAe,WAAM,IAEd/E,EADSoO,EAAK5X,MAAfQ,OACCgJ,gBACA,OACLC,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,4BACd4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,oBACb2E,GACA/D,KAAM,YACNE,cAAeiS,EAAK9N,YAAYrG,KAAjBmU,KAEfA,EAAK5X,MAAMwB,UAAUgU,kBAAkBoC,EAAK1Y,SAC5CuW,SAAU,QAAS,OAAQ,MAAM,UACjCC,cAAe,oBAzcbkC,EAAKxU,QAAUwU,EAAK5X,MAAMoD,QAC1BwU,EAAKvU,QAAUuU,EAAK5X,MAAMqD,QAC1BuU,EAAK1Y,QAAU0Y,EAAK5X,MAAMsD,YAC1BsU,EAAKG,WAAaH,EAAK5X,MAAM+X,WAG7BH,EAAKI,OAASJ,EAAK5X,MAAMgY,OACzBJ,EAAKK,YAAcL,EAAK5X,MAAMiY,YAC9BL,EAAKtV,OACDC,OAAS,GACTC,WAAa,GACbC,WAAa,EACbC,WAAa,EACbkX,aAAa,EACbC,aAAa,EACb1F,aAAa,GAjBFyD,qUADJlU,4DAsBK,IAAA3B,EAAAD,KACZiW,EAAajW,KAAKiW,WAEnBA,GAA4B,OAAdA,GACb3W,WAAW,kBAAMW,EAAK/B,MAAMa,KAAK6R,kBAAkB3Q,EAAK/B,MAAMoD,UAAS,GACvEhC,WAAW,kBAAMW,EAAK/B,MAAMa,KAAK6R,kBAAkB3Q,EAAK/B,MAAMqD,UAAS,GACvEjC,WAAW,kBAAMW,EAAK/B,MAAMwB,UAAUmK,aAAa5J,EAAK/B,MAAMsD,aAAaiI,WAAY,GACvFnK,WAAW,kBAAMW,EAAK/B,MAAMa,KAAKQ,cAAcU,EAAK/B,MAAMoD,QAAQ,SAAQ,GAC1EhC,WAAW,kBAAMW,EAAK/B,MAAMa,KAAKQ,cAAcU,EAAK/B,MAAMqD,QAAQ,SAAQ,GAC1EjC,WAAW,kBAAMW,EAAK/B,MAAMwB,UAAUC,UAAUM,EAAK/B,MAAMsD,YAAY,SAAQ,IAE/E,EAAA3F,EAAAsK,OACIL,IAAKyR,EACLnR,MACI4R,WAAYhY,KAAK9B,MAAMa,KAAKC,kBAAkB,WAAW,cAAcC,MACvEgZ,UAAW,YAEf5R,QAAS,SAACC,GACN,GAAGA,EAAIF,KAAK8R,YAAa,CACrBjY,EAAK/B,MAAMwB,UAAUqT,OAAO9S,EAAK/B,MAAMsD,YAAY,GAAG0W,aAClDjZ,MAAOqH,EAAIF,KAAK8R,YAChBvS,QAASW,EAAIF,KAAK+R,gBAEtB,IAAIC,EAAenY,EAAK/B,MAAMa,KAAKC,kBAAkB,WAAW,QAChEiB,EAAK/B,MAAMa,KAAK0G,kBAAkBxF,EAAK/B,MAAMoD,SAAS+W,SAClDpZ,MAAOmZ,EAAa/L,KAAKpN,MACzB0G,QAASyS,EAAa/L,KAAK1G,gBAOvCsQ,GAA4B,QAAdA,GAClBjW,KAAKyW,QAAQzW,KAAK9B,MAAMuD,OAAOzB,KAAKkW,OAAOlW,KAAKmW,aAChD7W,WAAW,kBAAMW,EAAK/B,MAAMa,KAAKQ,cAAcU,EAAK/B,MAAMoD,QAAQ,SAAQ,GAC1EhC,WAAW,kBAAMW,EAAK/B,MAAMa,KAAKQ,cAAcU,EAAK/B,MAAMqD,QAAQ,SAAQ,GAC1EjC,WAAW,kBAAMW,EAAK/B,MAAMwB,UAAUC,UAAUM,EAAK/B,MAAMsD,YAAY,SAAQ,IAE3EyU,GAA4B,UAAdA,GAClBjW,KAAKyW,QAAQzW,KAAK9B,MAAMuD,OAAOzB,KAAKkW,OAAOlW,KAAKmW,aAEpD7W,WAAW,kBAAMW,EAAKyW,sBAAqB,gDAI3C,IAAIT,EAAajW,KAAKiW,WACtB,GAAGA,GAA4B,UAAdA,EAEVjW,KAAKkW,QAAUlW,KAAKmW,aACnBnW,KAAK9B,MAAMQ,OAAOC,kBAAkB,UAAU,WAAW,aAAa,cAAc,gBAAe,GACnGqB,KAAK9B,MAAMQ,OAAOC,kBAAkB,aAAa,WAAW,cAAc,WAAW,gBAAe,KAGpGqB,KAAK9B,MAAMQ,OAAOC,kBAAkB,YAAW,GAC/CqB,KAAK9B,MAAMQ,OAAOC,kBAAkB,aAAa,WAAW,cAAc,WAAW,cAAc,WAAW,aAAa,cAAc,gBAAe,IAI5JqB,KAAK6E,UACbwN,aAAa,QAGJ,CACD,IAAIiG,GAAiB,aAAa,WAAW,eACzCC,GAAmB,UAAU,WAAW,aAAa,cAAc,WAAW,eAC5D,OAAnBvY,KAAKiW,WACJqC,EAAc7U,KAAK,eAGnB8U,EAAgB9U,KAAK,eAEzBzD,KAAK9B,MAAMQ,OAAOC,iBAAiB4Z,GAAgB,GACnDvY,KAAK9B,MAAMQ,OAAOC,iBAAiB2Z,GAAc,GACjDtY,KAAK6E,UACbwN,aAAa,qCAKL5Q,EAAOyU,EAAOC,GAAa,IAAArU,EAAA9B,KAC3BoG,GACA3E,SACAyU,SACAC,gBAGJ,EAAAta,EAAAsK,OACIL,IAnHS,kDAoHTM,OACAC,QAAS,SAAAC,GACLxE,EAAK5D,MAAMa,KAAKiK,gBAAhByG,KAAkC3N,EAAK5D,MAAMoD,QAAUgF,EAAIF,KAAK6M,KAAK2E,WACrE9V,EAAK5D,MAAMa,KAAKiK,gBAAhByG,KAAkC3N,EAAK5D,MAAMqD,QAAU+E,EAAIF,KAAK6M,KAAK2E,WAClEtR,EAAIF,KAAK8M,MAAQ5M,EAAIF,KAAK8M,KAAKpR,EAAK5D,MAAMsD,cACzCM,EAAK5D,MAAMwB,UAAUmK,aAAa/H,EAAK5D,MAAMsD,YAAY8E,EAAIF,KAAK8M,KAAKpR,EAAK5D,MAAMsD,qDAMtFtD,EAAM4F,GAAI,IAAAQ,EAAAtE,KAClB,OAAO8D,GACH,IAAK,UACD9D,KAAK9B,MAAMa,KAAK6R,kBAAkB5Q,KAAK9B,MAAMoD,SAC7CtB,KAAK9B,MAAMa,KAAK6R,kBAAkB5Q,KAAK9B,MAAMqD,SAC7CvB,KAAK9B,MAAMwB,UAAUmK,aAAa7J,KAAK9B,MAAMsD,aAAaiI,UAC1DnK,WAAW,kBAAMgF,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMoD,QAAQ,SAAQ,GAC1EhC,WAAW,kBAAMgF,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMqD,QAAQ,SAAQ,GAC1EjC,WAAW,kBAAMgF,EAAKpG,MAAMwB,UAAUC,UAAU2E,EAAKpG,MAAMsD,YAAY,SAAQ,GAC/ExB,KAAKiW,WAAa,MAClB3W,WAAW,kBAAMgF,EAAKoS,sBAAqB,IAC3C,EAAA7a,EAAAsK,OACIL,IAAKyR,EACLnR,MACI4R,WAAYhY,KAAK9B,MAAMa,KAAKC,kBAAkB,WAAW,cAAcC,MACvEgZ,UAAW,YAEf5R,QAAS,SAACC,GACN,GAAGA,EAAIF,KAAK8R,YAAa,CACrB5T,EAAKpG,MAAMwB,UAAUqT,OAAOzO,EAAKpG,MAAMsD,YAAY,GAAG0W,aAClDjZ,MAAOqH,EAAIF,KAAK8R,YAChBvS,QAASW,EAAIF,KAAK+R,gBAEtB,IAAIC,EAAe9T,EAAKpG,MAAMa,KAAKC,kBAAkB,WAAW,QAChEsF,EAAKpG,MAAMa,KAAK0G,kBAAkBnB,EAAKpG,MAAMoD,SAAS+W,SAClDpZ,MAAOmZ,EAAa/L,KAAKpN,MACzB0G,QAASyS,EAAa/L,KAAK1G,eAK3C,MACJ,IAAK,WACD3F,KAAK9B,MAAMa,KAAKQ,cAAcS,KAAK9B,MAAMoD,QAAQ,QACjDtB,KAAK9B,MAAMa,KAAKQ,cAAcS,KAAK9B,MAAMqD,QAAQ,QACjDvB,KAAK9B,MAAMwB,UAAUC,UAAUK,KAAK9B,MAAMsD,YAAY,QACtDxB,KAAKiW,WAAa,OAClB3W,WAAW,kBAAMgF,EAAKoS,sBAAqB,GAC3C,MACJ,IAAK,WACD,IAAIzQ,GACAwR,MAA0B,OAAnBzX,KAAKiW,YAEhB,IAAIjW,KAAK0X,iBAAiBzR,GACtB,OACJA,EAAUxE,OAASzB,KAAK9B,MAAMuD,QAC9B,EAAA5F,EAAAsK,OACIL,IAAKwR,EACLlR,KAAMH,EACNI,QAAS,SAAAC,GACLhC,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMoD,QAAQ,UACjDgD,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMqD,QAAQ,UACjD+C,EAAKpG,MAAMwB,UAAUC,UAAU2E,EAAKpG,MAAMsD,YAAY,UACtD8C,EAAKpG,MAAMa,KAAKiK,gBAAhByG,KAAkCnL,EAAKpG,MAAMoD,QAAUgF,EAAIF,KAAK6M,KAAK2E,WACrEtT,EAAKpG,MAAMa,KAAKiK,gBAAhByG,KAAkCnL,EAAKpG,MAAMqD,QAAU+E,EAAIF,KAAK6M,KAAK2E,WAClEtR,EAAIF,KAAK8M,MAAQ5M,EAAIF,KAAK8M,KAAK5O,EAAKpG,MAAMsD,cACzC8C,EAAKpG,MAAMwB,UAAUmK,aAAavF,EAAKpG,MAAMsD,YAAY8E,EAAIF,KAAK8M,KAAK5O,EAAKpG,MAAMsD,cAEtF8C,EAAK4R,OAAS5P,EAAIF,KAAK6M,KAAK2E,SAASnO,KAAK,GAAGpB,OAAO6N,OAAOjX,MAC3DqF,EAAK6R,YAAc7P,EAAIF,KAAK6M,KAAK2E,SAASnO,KAAK,GAAGpB,OAAO8N,YAAYlX,MACrEqF,EAAK2R,WAAa,SAClB3R,EAAKoS,wBAGb,MACJ,IAAK,cAED,EAAA7a,EAAAmV,YACIvK,MAAM,UACN2G,MAAQpN,KAAK9B,MAAMkD,KAAK,sBACxB2E,QAAU/F,KAAK9B,MAAMkD,KAAK,sBAC1BiM,eAAiB,WACb,IAAI7E,GACA/G,OAAQ6C,EAAKpG,MAAMuD,OACnByU,OAAQ5R,EAAK4R,OACbC,YAAa7R,EAAK6R,cAEtB,EAAAta,EAAAsK,OACIL,IAAK8P,EACLxP,KAAMoC,EACNnC,QAAS,SAAAC,GACLkC,GACI1H,QAAQ,GAETwD,EAAKpG,MAAMwD,oBACV4C,EAAKpG,MAAMwD,mBAAmB8G,SAMlD,MACJ,IAAK,cACD,EAAA3M,EAAAmV,YACIvK,MAAM,UACN2G,MAAQpN,KAAK9B,MAAMkD,KAAK,sBACxB2E,QAAU/F,KAAK9B,MAAMkD,KAAK,sBAC1BiM,eAAiB,WAQb,GANA/I,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMoD,QAAQ,UACjDgD,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMqD,QAAQ,UACjD+C,EAAKpG,MAAMwB,UAAUC,UAAU2E,EAAKpG,MAAMsD,YAAY,UACtD8C,EAAKpG,MAAMa,KAAK6R,kBAAkBtM,EAAKpG,MAAMoD,SAC7CgD,EAAKpG,MAAMwB,UAAUmK,aAAavF,EAAKpG,MAAMsD,aAAaiI,UAEvDnF,EAAK4R,QAAU5R,EAAK6R,YACnB7R,EAAKmS,QAAQnS,EAAKpG,MAAMuD,OAAO6C,EAAK4R,OAAO5R,EAAK6R,iBAEhD,CACA,IAAIqC,EAAWlU,EAAKpG,MAAM8W,MAAMyD,gBAAgBnU,EAAKpG,MAAMd,SACxDob,GAAYA,EAAS/O,MAAQ+O,EAAS/O,KAAKpL,OAAO,IACjDiG,EAAK4R,OAASsC,EAAS/O,KAAK,GAAGpB,OAAO6N,OAAOjX,MAC7CqF,EAAK6R,YAAcqC,EAAS/O,KAAK,GAAGpB,OAAO8N,YAAYlX,MACvDqF,EAAKmS,QAAQnS,EAAKpG,MAAMuD,OAAO6C,EAAK4R,OAAO5R,EAAK6R,cAIxD7R,EAAK2R,WAAa,SAClB3R,EAAKoS,wBAGb,MACJ,IAAK,cACDpX,WAAW,kBAAMgF,EAAKpG,MAAMwB,UAAUqT,OAAOzO,EAAKpG,MAAMsD,cAAa,GACrE,MACJ,IAAK,WAIExB,KAAK9B,MAAMwD,oBACV1B,KAAK9B,MAAMwD,oBAHXZ,QAAQ,IAKZ,MACJ,IAAK,cACD,IAAI4X,EAAc1Y,KAAK9B,MAAMwB,UAAUiZ,eAAe3Y,KAAK9B,MAAMsD,aAEjE,GAAIkX,GAAqC,GAAtBA,EAAYra,OAG3B,CAEA,IAAIua,EAAaF,EAAY,GACzBf,EAAYiB,EAAWxS,KAAKiC,OAAOsP,UAAU1Y,MAC9C0Y,GAA0B,MAAbA,GAAkC,GAAbA,GACjC,EAAA9b,EAAA2K,QAAOT,QAAQ/F,KAAK9B,MAAMkD,KAAK,sBAAsBqF,MAAM,WAG3DzG,KAAK9B,MAAMwK,MAAME,KAAK,SAClBwE,MAAMpN,KAAK9B,MAAMkD,KAAK,sBACtB2E,QAAQ/F,KAAK9B,MAAMkD,KAAK,sBACxBiM,eAAerN,KAAKwX,qBAAqB7V,KAAK3B,KAAK4Y,EAAWvV,cAbtE,EAAAxH,EAAA2K,QAAOT,QAAQ/F,KAAK9B,MAAMkD,KAAK,sBAAsBqF,MAAM,WAiB/D,MACJ,IAAK,cAID,GAHAR,GACIwR,MAAgC,OAAzBzX,KAAK9B,MAAM+X,aAElBjW,KAAK0X,iBAAiBzR,GACtB,OACJA,EAAUxE,OAASzB,KAAK9B,MAAMuD,QAC9B,EAAA5F,EAAAsK,OACIL,IAAKwR,EACLlR,KAAMH,EACNI,QAAS,SAAAC,GACLhC,EAAKpG,MAAMa,KAAK6R,kBAAkBtM,EAAKpG,MAAMoD,SAC7CgD,EAAKpG,MAAMa,KAAK6R,kBAAkBtM,EAAKpG,MAAMqD,SAC7C+C,EAAKpG,MAAMwB,UAAUmK,aAAavF,EAAKpG,MAAMsD,aAAaiI,UAC1DnK,WAAW,kBAAMgF,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMoD,QAAQ,SAAQ,GAC1EhC,WAAW,kBAAMgF,EAAKpG,MAAMa,KAAKQ,cAAc+E,EAAKpG,MAAMqD,QAAQ,SAAQ,GAC1EjC,WAAW,kBAAMgF,EAAKpG,MAAMwB,UAAUC,UAAU2E,EAAKpG,MAAMsD,YAAY,SAAQ,GAC/E8C,EAAK2R,WAAa,MAClB3W,WAAW,kBAAMgF,EAAKoS,sBAAqB,IAC3C,EAAA7a,EAAAsK,OACIL,IAAKyR,EACLnR,MACI4R,WAAY1T,EAAKpG,MAAMa,KAAKC,kBAAkB,WAAW,cAAcC,MACvEgZ,UAAW,YAEf5R,QAAS,SAACC,GACN,GAAGA,EAAIF,KAAK8R,YAAa,CACrB5T,EAAKpG,MAAMwB,UAAUqT,OAAOzO,EAAKpG,MAAMsD,YAAY,GAAG0W,aAClDjZ,MAAOqH,EAAIF,KAAK8R,YAChBvS,QAASW,EAAIF,KAAK+R,gBAEtB,IAAIC,EAAe9T,EAAKpG,MAAMa,KAAKC,kBAAkB,WAAW,QAChEsF,EAAKpG,MAAMa,KAAK0G,kBAAkBnB,EAAKpG,MAAMoD,SAAS+W,SAClDpZ,MAAOmZ,EAAa/L,KAAKpN,MACzB0G,QAASyS,EAAa/L,KAAK1G,kBAOnD,MACJ,QACIxB,QAAQC,IAAIN,EAAGT,6CAKdnF,EAAOuG,EAAUlC,EAAKtD,EAAO4Z,GAAU,IAAA7S,EAAAhG,KACtD,GAAe,MAAZ6Y,GAAsC,MAAlBA,EAAS5Z,OAAkB4Z,EAAS5Z,OAASA,EAAMA,OAAS4Z,EAAS5Z,MAC3F,GAAU,eAAPsD,EAAsB,CACxB,IAAIV,EAAO3D,EAAM2D,KAAKiI,UACLjI,EAAKiX,WAAW/W,MAAMC,KAAK,SAACvC,GAAD,MAA2B,cAAjBA,EAAKwC,WAChDO,eAAiB,WAC3B,OACC2T,YAAalX,EAAMA,QAGrBf,EAAM2D,KAAKgJ,QAAQhJ,OAEL,cAAPU,IACJtD,GAASA,EAAMA,OACjB,EAAApD,EAAAsK,OACCL,IAAKyR,EACLnR,MAAO6R,UAAW,UAAWc,WAAY9Z,EAAMA,OAC/CoH,QAAS,SAACC,GACT,GAAGA,EAAIF,KAAM,CACZ,IAAIgC,GACH+N,aACClX,MAAOqH,EAAIF,KAAKnH,MAChB0G,QAASW,EAAIF,KAAKT,UAGpBK,EAAK9H,MAAMa,KAAK0G,kBAAkBO,EAAK1E,QAAS8G,GAChDpC,EAAK9H,MAAMa,KAAKqG,qBAAqBY,EAAK1E,SAAS6U,aAAa,SAMnEnW,KAAK9B,MAAMa,KAAKqG,qBAAqBpF,KAAKsB,SAAS6U,aAAa,IAChEnW,KAAK9B,MAAMa,KAAK0G,kBAAkBzF,KAAKsB,SAAU6U,aAAclX,MAAO,KAAM0G,QAAS,mDA0CrEM,GACb,IAAIjG,KAAK9B,MAAMa,KAAKoV,YAAYnU,KAAK9B,MAAMoD,QAAQtB,KAAK9B,MAAMqD,UAC1D,OAAO,EACX,IAAIyX,EAAahZ,KAAK9B,MAAMa,KAAKqK,gBAAgBpJ,KAAK9B,MAAMoD,SACxD2X,EAAajZ,KAAK9B,MAAMa,KAAKqK,gBAAgBpJ,KAAK9B,MAAMqD,gBACrDyX,EAAWvP,KAAK,GAAGpB,OAAO6Q,kBAC1BD,EAAWxP,KAAK,GAAGpB,OAAO6Q,WACjCjT,EAAUkT,OAAS9P,MAAO2P,GAC1B/S,EAAUmT,OAAS/P,MAAO4P,GAC1BhT,EAAUvG,WACN2J,OACII,KAAMzJ,KAAK9B,MAAMwB,UAAU2Z,eAAerZ,KAAK9B,MAAMsD,eAI7D,IAAI8X,EAAetZ,KAAK9B,MAAMwB,UAAUmJ,WAAW7I,KAAK9B,MAAMsD,aAE9D,OAAmB,MAAhB8X,GAA+C,GAAvBA,EAAajb,UAC7C,EAAAxC,EAAA2K,QAAOC,MAAO,SAASV,QAAS/F,KAAK9B,MAAMkD,KAAK,yBACzC,oCAgDG,IAAAmG,EAAAvH,KAAAmL,EACoDnL,KAAK9B,MAAxDwB,EADDyL,EACCzL,UAAWX,EADZoM,EACYpM,KAAML,EADlByM,EACkBzM,OAAQgK,EAD1ByC,EAC0BzC,MAEzB4C,GAHDH,EACiCvM,eAC/BwM,qBACcrM,EAAfuM,YACAC,EAAoB7L,EAApB6L,gBACA7D,EAAgChJ,EAAhCgJ,gBACA8D,GADgC9M,EAAhB+M,aACA/C,EAAhB8C,aACFE,EAAW1L,KAAKQ,MAAMsX,YAAc,mBAAqB,kBAEzDnM,EAAY3L,KAAKQ,MAAMsX,YAAc,YAAc,YAEnDyB,EAAYvZ,KAAKQ,MAAMuX,YAAc,mBAAqB,kBAC1DyB,EAAaxZ,KAAKQ,MAAMuX,YAAc,YAAc,YACxD,OACIpQ,EAAAC,QAAAC,cAAA,OAAM/D,GAAG,gBACL6D,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,gBACX4E,EAAAC,QAAAC,cAAC7L,EAAD,KACI2L,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,uBACX4E,EAAAC,QAAAC,cAAC9L,GAAUgH,UAAU,sBAAsB+E,OAAQ2R,cAAc,OAAO9T,QAAS3F,KAAKQ,MAAM6R,YAAc,SAAW,QACtI9F,QAAUvM,KAAKgI,YAAYrG,KAAK3B,KAAKA,KAAK9B,MAAM,cAC/ByJ,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACV2E,GACG/D,KAAM,cAENE,cAAe7D,KAAKgI,YAAYrG,KAAK3B,WAYrD2H,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,qBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,mBAClC4E,EAAAC,QAAAC,cAAA,QAC+B9E,UAAA,6BAAwC2I,EACxCa,QAAS,WACL,IAAI3D,GAAQrB,EAAK/G,MAAMsX,YACvBvQ,EAAK1C,UACDiT,YAAalP,OAI7BjB,EAAAC,QAAAC,cAAA,QAAM9E,UAAU,QAAQ/C,KAAK9B,MAAMkD,KAAK,wBAE5CuG,EAAAC,QAAAC,cAAA,OAAK9E,UAAA,mBAA8B4I,EAA9B,KACAL,EAAWtL,KAAK9B,MAAMoD,SAC7CgL,aAActM,KAAKsM,aAAa3K,KAAK3B,UAIvB2H,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACX4E,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,mBAClC4E,EAAAC,QAAAC,cAAA,QAC+B9E,UAAA,6BAAwCwW,EACxChN,QAAS,WACL,IAAI3D,GAAQrB,EAAK/G,MAAMuX,YACvBxQ,EAAK1C,UACDkT,YAAanP,OAI7BjB,EAAAC,QAAAC,cAAA,QAAM9E,UAAU,QAAQ/C,KAAK9B,MAAMkD,KAAK,wBAE5CuG,EAAAC,QAAAC,cAAA,OAAK9E,UAAA,mBAA8ByW,EAA9B,KACAlO,EAAWtL,KAAK9B,MAAMqD,eAMnCoG,EAAAC,QAAAC,cAAA,OAAK9E,UAAU,sBACVwI,EAAgBvL,KAAK5C,SACvCoP,UAAWxM,KAAKyM,aAAa9K,KAAK3B,MACboX,WAAU,EACVsC,WAAW,KAGlBlO,EAAY,UACT4B,MAAOpN,KAAK9B,MAAMkD,KAAK,sBACvB2E,QAAS/F,KAAK9B,MAAMkD,KAAK,sBACzBiM,eAAgBrN,KAAKsN,WAAW3L,KAAK3B,QAExCwL,EAAY,iCAQlB1L","file":"uapbd/customer/custapply/card/Card.js","sourcesContent":["//主子表卡片\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {createBankaccList,createBankaccForm} from './bankacc'\r\nimport { createPage, ajax, base, toast, high,print,cardCache,promptBox,createPageIcon} from 'nc-lightapp-front';\r\nconst {NCBackBtn}=base;\r\n// const { BillApprove } = high\r\nconst { NCAffix,NCPopconfirm,NCFormControl,NCAnchor,NCScrollElement,NCScrollLink } = base;\r\nconst {PrintOutput,NCUploader,ApproveDetail} = high;\r\nconst {setDefData, getDefData, addCache, getCacheById, updateCache, getCurrentLastId, getNextId, deleteCacheById} = cardCache;\r\nimport ApprovalTrans from '../../../../uap/public/excomponents/approvalTrans';\r\n\r\nconst formId = 'customerpf';                      //表头id\r\nconst tableId = 'bankaccsub';                  //子表id\r\nconst pageId = '10140CUSTPF_custpfcard';            //pagecode\r\nconst searchId = 'search';                  //查询区id\r\nconst appId ='10140CUSTPF';        //按钮注册id\r\nconst queryCardUrl = '/nccloud/uapbd/customer/CustApplyCardQuery.do';   //卡片查询url\r\nconst saveUrl = '/nccloud/uapbd/customer/CustApplySave.do';             //新增保存\r\nconst updateUrl = '/nccloud/uapbd/customer/CustApplyUpdate.do';         //修改保存\r\nconst addUrl = '/nccloud/uapbd/customer/CustApplyAdd.do';\t\t\t\t//新增\r\nconst enableUrl = '/nccloud/uapbd/supbanken/enableSupbankenCard.do' //启用\r\nconst commitUrl = '/nccloud/uapbd/customer/CustApplyCommit.do' //提交\r\nconst callbackUrl = '/nccloud/uapbd/customer/CustApplyCallback.do' //收回\r\n// const approveUrl = '/nccloud/uapbd/supplierapply/approveSupplierApply.do' //审批\r\n// const unApproveUrl = '/nccloud/uapbd/supplierapply/unapproveSupplierApply.do' //取消审批\r\nconst queryLinkmanUrl = '/nccloud/uapbd/customer/CustApplyQueryLinkman.do' //联系人查询\r\nconst saveLinkmanUrl = '/nccloud/uapbd/customer/CustApplySaveLinkman.do'\t//联系人保存\r\nconst printUrl = '/nccloud/uapbd/customer/CustApplyCardPrint.do';                   //打印url\r\nconst deleteUrl = '/nccloud/uapbd/customer/CustApplyDelete.do';                 //删除url\r\nconst validUrl = '/nccloud/uapbd/customer/CustApplyValid.do';                 //删除url\r\n\r\nconst pk_item = 'pk_customerpf';             //单据主键--用于卡片查询刷新\r\nconst titleCode = 'billnumber';            //单据编码--用于卡片表头显示\r\nconst childValues = 'pk_taxregions'\r\nconst tableIds = ['custapplybanks','custtaxtypes','custcontacts','finance','sale','creditctl','bankaccsub']\r\n\r\nconst addEditable = ['supcountrytaxes','suplinkman']\r\nconst editEditable = ['purchase','supcountrytaxes','suplinkman','finance']\r\n// const cardUrl = '/uapbd/customer/custapply/card/index.html';\r\n// const listUrl = '/uapbd/customer/custapply/list/index.html';\r\nconst cardUrl = '/card';\r\nconst listUrl = '/list';\r\nconst pagecode_list = '10140CUSTPF_custpflist';\r\nconst printFunCode='10140CUSTPF';    //有打印模板的小应用编码\r\nconst printNodeKey='custpfcard';    //模板节点标识\r\nconst md_class_id = '6d6d4a15-d9bb-4b0c-9da3-80760872bf87'; //md_class 客户申请单 主键，传附件用，先写死\r\nconst dataSource = 'uapbd.customer.custapply.cache' //缓存区id\r\nconst eventItems = ['pk_org','destorg','pk_country','custprop']\r\n\r\nfunction tableButtonClick(props, id, text, record, index,tableid){\r\n    switch(id){\r\n        case 'Spread'://展开\r\n            props.cardTable.toggleRowView(tableid, record);\r\n            break\r\n        case 'Detail'://更多\r\n            props.cardTable.openModel(tableid, 'edit', record, index);\r\n            //e.stopPropagation();\r\n            break\r\n        case 'Delline'://删除\r\n            props.cardTable.delRowsByIndex(tableid, index);\r\n            break\r\n        default:\r\n            console.log(id, index);\r\n            break;\r\n    }\r\n}\r\n\r\n//切换页面状态\r\nfunction toggleShow(props, onlyAdd = false){\r\n    let showBtn = props.getUrlParam('showBtn');\r\n    let status = props.getUrlParam('status');\r\n    status = status == 'add' || status == 'edit' ? 'edit' : 'browse'\r\n    let flag = status === 'browse' ? false : true;\r\n    \r\n    if(showBtn && showBtn == 'false'){\r\n        props.button.setButtonVisible(['Edit','Add','Delete','Refresh','Query','PrintGrp','Print','Output','CommitGrp','Commit','Callback','Bankacc','Back','Attment','ApproveInfo','Save','Cancel','AddLine','DelLine'],false);\r\n        props.cardPagination.setCardPaginationVisible('cardPaginationBtn', false);\r\n    }else{\r\n        if(onlyAdd) {\r\n            props.button.setButtonVisible(['Edit','Save','Cancel','AddLine','DelLine','Delete','Refresh','Query','PrintGrp','Print','Output','CommitGrp','Commit','Callback','Bankacc','Back','Attment','ApproveInfo'],false);\r\n            props.button.setButtonVisible(['Add'], true)\r\n        }\r\n        else {\r\n            // 按钮的显示状态\r\n            if(status == 'edit' || status == 'add'){\r\n                props.button.setButtonVisible(['Edit','Add','Delete','Refresh','Query','PrintGrp','Print','Output','CommitGrp','Commit','Callback','Bankacc','Back','Attment','ApproveInfo'],false);\r\n                props.button.setButtonVisible(['Save','Cancel','AddLine','DelLine'],true);\r\n                props.cardPagination.setCardPaginationVisible('cardPaginationBtn', false);\r\n            }else{\r\n                //返回按钮换成图标，不再用按钮，此处先隐藏\r\n                props.button.setButtonVisible(['Save','Cancel','AddLine','DelLine','Back','Print','Commit'],false);\r\n                props.button.setButtonVisible(['Edit','Add','Delete','Refresh','Query','PrintGrp','Output','CommitGrp','Callback','Bankacc','Attment','ApproveInfo'],true);\r\n                props.cardPagination.setCardPaginationVisible('cardPaginationBtn', true);\r\n            }\r\n            let billstate =props.form.getFormItemsValue(formId,'approvestate').value;\r\n            //'-1'自由态，'3' 提交态，'1' 审批通过\r\n            if(billstate == '-1'){\r\n\r\n                props.button.setButtonDisabled(['CommitGrp','Edit','Delete','Bankacc'],false);\r\n                props.button.setButtonVisible(['Callback','ApproveInfo'],false);\r\n                \r\n            } else if(billstate == '3' || billstate == '1'){\r\n\r\n                props.button.setButtonVisible(['CommitGrp','Edit','Delete','Bankacc'],false);\r\n                props.button.setButtonDisabled(['Callback','ApproveInfo'],false);\r\n            }else{\r\n                props.button.setButtonVisible(['CommitGrp','Callback','Edit','Delete','Bankacc'],false);\r\n                props.button.setButtonDisabled('ApproveInfo',false);\r\n            }\r\n        }\r\n    }\r\n    //返回图标控制\r\n    props.BillHeadInfo.setBillHeadInfoVisible({\r\n        showBackBtn: status === 'browse'\r\n    });\r\n    setTimeout(() => props.form.setFormStatus(formId, status),1);\r\n    setTimeout(() => props.form.setFormStatus('customer',status),1)\r\n    tableIds.forEach(item => {\r\n        if(item != 'finance' && item != 'sale' && item != 'creditctl') {\r\n            props.cardTable.setStatus(item, status);\r\n        }\r\n    })\r\n\r\n    //添加浏览器窗口关闭监听事件\r\n\tif(status != 'add' && status != \"edit\"){\r\n\t\twindow.onbeforeunload = null;\r\n\t}else{\r\n\t\twindow.onbeforeunload = () => {//编辑态关闭页签或浏览器的提示\r\n\t\t\treturn '';\r\n\t\t};\r\n\t}\r\n};\r\n\r\nclass Card extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.formId = formId;\r\n        this.searchId = searchId;\r\n        this.tableId = tableId;\r\n        this.state = {\r\n            pk_org : '',\r\n            title_code : '',\r\n            totalcount : 0,\r\n            applycount : 0,\r\n            showBaseInfo : true,\r\n            isList: true,\r\n            showApprove: false,\r\n            approveDetailShow:false,\r\n            billid:null,\r\n            billNumInitState:null,\r\n            curOrg:'',\r\n            json: {}\r\n        }\r\n        this.bankaccConfig = {\r\n            tableId: 'custbank',\r\n            formId1: 'accbasinfo',\r\n            formId2: 'netbankinfo',\r\n            cardTableId: 'bankaccsub',\r\n            mainPk : this.props.getUrlParam('id'),\r\n            bankaccModalChange: this.bankaccModalChange.bind(this)\r\n        }\r\n\r\n    }\r\n\r\n    initTemplate = (props, callback)=>{\r\n        props.createUIDom(\r\n            {\r\n                pagecode: pageId//,//页面id\r\n                // appid: appId//注册按钮的id\r\n            },\r\n             (data)=>{\r\n                if(data){\r\n                    if(data.template){\r\n                        let meta = data.template;\r\n                        this.modifierMeta(props, meta)\r\n                        props.meta.setMeta(meta);\r\n                        // let status = props.getUrlParam('status');\r\n                        // if(status && status == 'add'){\r\n                        // \tprops.cardTable.addRow(tableId);\r\n                        // }\r\n                    }\r\n                    if(data.button){\r\n                        let button = data.button;\r\n                        props.button.setButtons(button);\r\n                        toggleShow(props);\r\n                    }\r\n                    if(data.context){\r\n                        if(data.context.pk_org&&data.context.org_Name){\r\n                            this.state.curOrg = {\r\n                                refname: data.context.org_Name,\r\n                                refpk:data.context.pk_org}\r\n                        }\r\n                    }\r\n                    callback && callback();\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    modifierMeta(props, meta) {\r\n        let status = props.getUrlParam('status');\r\n        meta[formId].status = status;\r\n\r\n        //账户基本信息的账号字段只能录入数字\r\n        meta['accbasinfo'].items.find(item => item.attrcode == 'accnum').reg = new RegExp('^\\\\d*$');\r\n\r\n        //供应商联系人参照处理\r\n\t\tmeta['custcontacts'].items.find(item => item.attrcode == 'pk_linkman').form = props.form\r\n\t\tmeta['custcontacts'].items.forEach(item => {\r\n\t\t\tif(item.attrcode.indexOf('pk_linkman') >= 0 && item.attrcode != 'pk_linkman.sex') {\r\n\t\t\t\titem.refcode = 'uapbd/refer/linkman/LinkmanFormRefer/index'\r\n\t\t\t}\r\n\t\t})\r\n\t\tmeta['custcontacts_edit'].items.find(item => item.attrcode == 'pk_linkman').form = props.form\r\n\t\tmeta['custcontacts_edit'].items.forEach(item => {\r\n\t\t\tif(item.attrcode.indexOf('pk_linkman') >= 0 && item.attrcode != 'pk_linkman.sex') {\r\n\t\t\t\titem.refcode = 'uapbd/refer/linkman/LinkmanFormRefer/index'\r\n\t\t\t}\r\n\t\t})\r\n\r\n        //meta[tableId].status = status;\r\n        meta[formId].items = meta[formId].items.map((item, key) => {\r\n            if(item.attrcode == 'pk_org'){\r\n                item.queryCondition = {\r\n                    \"AppCode\": appId,\r\n                    TreeRefActionExt:'nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder'\r\n                };\r\n            }\r\n            return item;\r\n        })\r\n        tableIds.forEach(item => {\r\n            let porCol = {\r\n                itemtype: 'customer',\r\n                attrcode: 'opr',\r\n                label: this.state.json['10140CUSTPF-000019'],/* 国际化处理： 操作*/\r\n                visible: true,\r\n                className:'table-opr',\r\n                width:200,\r\n                fixed:'right',\r\n                render: (text, record, index) => {\r\n                    let status = props.cardTable.getStatus(item);\r\n                    let tableBtnAry = status === 'browse' ? ['Spread']:['Detail'];\r\n    \r\n                    //银行账户币种子表字段少，不用展开和更多\r\n                    if(item == tableId)\r\n                        tableBtnAry=[];\r\n    \r\n                    if(!['finance','sale','creditctl'].includes(item) && !(status == 'browse')){\r\n                        tableBtnAry.push('Delline');\r\n                    }\r\n    \r\n                    //银行账户子表不可编辑，通过银行账户按钮维护\r\n                    if(item == 'custapplybanks'){\r\n                        tableBtnAry=[];\r\n                    }\r\n    \r\n                    return props.button.createOprationButton(\r\n                        tableBtnAry,\r\n                        {\r\n                            area: \"table-opr-area\",\r\n                            buttonLimit: 3,\r\n                            onButtonClick: (props, id) => tableButtonClick(props, id, text, record, index,item)\r\n                        }\r\n                    )\r\n                }\r\n            };\r\n            meta[item].items.push(porCol);\r\n        })\r\n\r\n        return meta;\r\n    }\r\n\r\n    componentDidMount() {\r\n        let callback = (json, status, inlt) => {\r\n\t\t\tif (status) {\r\n\t\t\t\tthis.setState({json, inlt},() => {\r\n\t\t\t\t\tthis.initTemplate(this.props, () => {\r\n                        this.props.form.setFormStatus(this.formId,'edit')\r\n                        let status = this.props.getUrlParam('status');\r\n                        if(status != \"add\"){\r\n                            let pk = this.props.getUrlParam('id')\r\n                            this.getdata(pk, (vbillstatus) => {\r\n                                let codeedit = this.props.getUrlParam(\"codeedit\")\r\n                                let vbillnumedit = this.props.getUrlParam(\"vbillnumedit\")\r\n                                //设置一下是否可编辑两个编码\r\n                                if(status == 'edit') {\r\n                                    this.props.form.setFormItemsDisabled(this.formId,{billnumber: !vbillnumedit})\r\n                                    this.props.form.setFormItemsDisabled(\"customer\",{code: !codeedit})\r\n                                }\r\n\r\n                                //初始化一下特殊子表的按钮状态\r\n                                if(status == 'edit' || status == 'add') {\r\n                                    this.updateSpeTableBtnStatus(vbillstatus,'edit')\r\n                                }\r\n                                else {\r\n                                    this.updateSpeTableBtnStatus(vbillstatus)\r\n                                }\r\n\r\n                            });\r\n                        }\r\n                        else{\r\n                            this.setDefaultValue(undefined,()=>{\r\n                                this.props.form.setFormItemsValue(formId,{'pk_org':{value:this.state.curOrg.refpk,display:this.state.curOrg.refname}});\r\n                                this.afterEvent(this.props, formId, 'pk_org',this.state.curOrg)\r\n                                this.updateSpeTableBtnStatus(-1,'edit')\r\n                            });\r\n                        }\r\n                    });\r\n\t\t\t\t})       // 保存json和inlt到页面state中并刷新页面\r\n\t\t\t}\r\n        }\r\n\t\tthis.props.MultiInit.getMultiLang({moduleId: '10140CUSTPF', domainName: 'uapbd',callback})\r\n    }\r\n\r\n    setDefaultValue = (data,callback) =>{\r\n        if(data) {\r\n            data.preBillCode = this.preBillCode\r\n            data.preCustCode = this.preCustCode\r\n            data.hasPreBillCode = this.hasPreBillCode\r\n            data.hasPreCustCode = this.hasPreCustCode\r\n        }\r\n        ajax({\r\n            url:addUrl,\r\n            data,\r\n            success:(res)=>{\r\n                if(res.data){\r\n                    this.props.form.setAllFormValue({[this.formId]:res.data[this.formId][this.formId]});\r\n                    this.props.form.setAllFormValue({['customer']:res.data.customer.customer});\r\n                    \r\n                    this.setItemsProperty(res); \r\n                    \r\n                    this.preBillCode = res.data.preBillCode\r\n                    this.preCustCode = res.data.preCustCode\r\n                    this.hasPreBillCode = res.data.hasPreBillCode\r\n                    this.hasPreCustCode = res.data.hasPreCustCode\r\n\r\n                    let pk_org = res.data.customer.customer.rows[0].values.pk_org.value\r\n                    //四个字段需要根据供应商基本信息的pk_org字段进行参照\r\n                    let meta = this.props.meta.getMeta()\r\n                    let needOrgItems = ['pk_areacl','pk_custclass','pk_customer_main','pk_supplier'];\r\n                    needOrgItems.forEach(key => {\r\n                        let tempItem = meta[\"customer\"].items.find(item => item.attrcode == key)\r\n                        tempItem.queryCondition = () => {\r\n                            return {\r\n                                pk_org: pk_org\r\n                            }\r\n                        }\r\n                    })\r\n                    this.props.meta.setMeta(meta)\r\n                }\r\n                callback && callback();\r\n            },\r\n            error:(res)=>{\r\n                toast({color: 'danger',content: res.message});\r\n                return;\r\n            }\r\n        })\r\n    }\r\n\r\n    setItemsProperty=(res)=>{\r\n        // 客户申请单信息\r\n        let pfData = res.data[this.formId][this.formId].rows[0];\r\n        // 客户基本信息\r\n        let baseData = res.data['customer']['customer'].rows[0];\r\n\r\n        // 申请组织\r\n        let pk_org = pfData.values['pk_org'];\r\n        // 单据号\r\n        let billnumber = pfData.values['billnumber'];\r\n        //目的组织\r\n        let destorg = pfData.values['destorg'];\r\n        // 客户类型\r\n        let custprop = baseData.values['custprop'];\r\n        \r\n        //单据号为空可编辑\r\n        // if(billnumber && billnumber.value != null){\r\n        let billNumEditable = res.data.billnumberIsEditable=='Y'?true:false;    \r\n        this.props.form.setFormItemsDisabled(this.formId,{'billnumber':!billNumEditable});\r\n\r\n        let custCodeEditable = res.data.cstBillNumCanEdit == 'Y' ? true : false\r\n        this.props.form.setFormItemsDisabled('customer',{code:!custCodeEditable});\r\n        if(!billNumEditable){\r\n            if(this.state.billNumInitState == null){\r\n                this.state.billNumInitState = this.props.form.getFormItemsRequired(this.formId,'billnumber'); \r\n            }\r\n            this.props.form.setFormItemsRequired(this.formId,{'billnumber':false});\r\n        }else{\r\n            if(this.state.billNumInitState != null){\r\n                this.props.form.setFormItemsRequired(this.formId,{'billnumber':this.state.billNumInitState});\r\n            }\r\n        }\r\n        // }\r\n\r\n        //申请组织为空，客户类型 永远可编辑\r\n        //申请组织不为空 且 目的组织为 本组织，客户类型 不可编辑\r\n        if(pk_org && destorg){\r\n            let custpropFlag = (pk_org.value != null && destorg.value == '0')?true:false;\r\n            this.props.form.setFormItemsDisabled('customer',{'custprop':custpropFlag});\r\n        }\r\n        \r\n        //客户类型默认为外部单位，则不可编辑，同时对应业务单元不可编辑;\r\n        //客户类型为内部单位，则可编辑，对应业务单元可编辑必填,对应业务单元参照支持业务单元和利润中心\r\n        if(custprop){\r\n            let financeorgFlag = custprop.value == '1'?true:false;\r\n            this.props.form.setFormItemsRequired('customer',{'pk_financeorg':financeorgFlag});\r\n            this.props.form.setFormItemsDisabled('customer',{'pk_financeorg':!financeorgFlag});\r\n            \r\n            let meta = this.props.meta.getMeta();\r\n            if(meta && meta != null && meta['customer'] !=null){\r\n                meta['customer'].items = meta['customer'].items.map((item)=>{\r\n\r\n                    if (item.attrcode == 'pk_financeorg') {\r\n                        item.queryCondition = {\r\n                            \"AppCode\":appId,\r\n                            TreeRefActionExt:'nccloud.web.uapbd.customer.custapply.ref.BusinessUnitTreeRefExt'\r\n                        };\r\n                    }\r\n                    return item;\r\n                })\r\n                this.props.meta.setMeta(meta);\r\n            }\r\n        }\r\n    }\r\n\r\n    pfProcess(url,content) {\r\n        let finalData = {\r\n            pks: [this.props.getUrlParam('id')],\r\n            content\r\n        }\r\n        ajax({\r\n            url,\r\n            data: finalData,\r\n            success: res => {\r\n                \r\n                if(url == commitUrl){\r\n                    if(res.data.workflow && (res.data.workflow == 'approveflow'|| res.data.workflow == 'workflow')) {\r\n                        this.setState({\r\n                            compositedata: res.data,\r\n                            compositedisplay: true\r\n                        });\r\n                    }else{\r\n                        toast({ color: 'success', content: this.state.json['10140CUSTPF-000020'] });/* 国际化处理： 提交成功*/\r\n                        this.setState({\r\n                            compositedata: null,\r\n                            compositedisplay: false\r\n                        });\r\n                        this.getdata(this.props.getUrlParam('id'), (vbillstatus) => {\r\n                            this.updateSpeTableBtnStatus(vbillstatus)\r\n                        });\r\n                    }\r\n                }\r\n                else if(url == callbackUrl){\r\n                    toast({content:this.state.json['10140CUSTPF-000021'],color:'success'});/* 国际化处理： 单据已成功收回*/\r\n                    this.getdata(this.props.getUrlParam('id'), (vbillstatus) => {\r\n                        this.updateSpeTableBtnStatus(vbillstatus)\r\n                    });\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    getAssginUsedr = (value) => {\r\n        this.pfProcess(commitUrl,value);\r\n    }\r\n\r\n    turnOff=()=>{\r\n        this.setState({\r\n            compositedata:null,\r\n            compositedisplay: false\r\n        });\r\n    }\r\n\r\n    buttonClick =(props, id)=>{\r\n\r\n        let _this = this;\r\n        switch (id) {\r\n            case 'Add':\r\n                props.form.EmptyAllFormValue('customer')\r\n                props.form.EmptyAllFormValue(this.formId)\r\n                tableIds.forEach(item => {\r\n                    setTimeout(() => props.cardTable.setTableData(item,{rows:[]}),1)\r\n                })\r\n                //'supbankacc','supcountrytaxes','suplinkman','finance'\r\n                // setTimeout(() => props.cardTable.setTableData('suplinkman',{rows:[]}),1)\r\n                // setTimeout(() => props.cardTable.setTableData('purchase',{rows:[]}),1)\r\n                // setTimeout(() => props.cardTable.setTableData('supbankacc',{rows:[]}),1)\r\n                // setTimeout(() => props.cardTable.setTableData('supcountrytaxes',{rows:[]}),1)\r\n                // setTimeout(() => props.cardTable.setTableData('finance',{rows:[]}),1)\r\n                // // tableIds.forEach(item => {\r\n                // // \tprops.cardTable.setTableData(item,{rows:[]})\r\n                // // })\r\n                // props.form.setFormStatus(this.formId,'edit')\r\n                // props.form.setFormStatus('supplier_baseInfo','edit')\r\n                // addEditable.forEach(item => {\r\n                // \tprops.cardTable.setStatus(item,'edit')\r\n                // })\r\n\r\n                // props.button.setButtonVisible(['Save','Cancel'],true)\r\n\r\n                // props.pushTo(cardUrl, {\r\n                //     pagecode: pageId,\r\n                //     appcode: appId,\r\n                //     status: 'add'\r\n                // })\r\n                props.setUrlParam({\r\n                    pagecode: pageId,\r\n                    appcode: appId,\r\n                    status: 'add'\r\n                });\r\n                this.setDefaultValue(undefined,()=>{\r\n                    this.props.form.setFormItemsValue(this.formId,{'pk_org':{value:this.state.curOrg.refpk,display:this.state.curOrg.refname}});\r\n                    this.afterEvent(props, formId, 'pk_org',this.state.curOrg);\r\n                    toggleShow(props)\r\n                    this.updateSpeTableBtnStatus(-1,'edit')\r\n                });\r\n                break;\r\n            case 'Edit':\r\n                this.valid(props,'edit',this.edit.bind(this,props));\r\n                break;\r\n            case 'Delete': \r\n                promptBox({\r\n                    color:\"warning\",\r\n                    title : this.state.json['10140CUSTPF-000022'],/* 国际化处理： 确认删除*/\r\n                    content : this.state.json['10140CUSTPF-000023'],/* 国际化处理： 是否确认要删除？*/\r\n                    beSureBtnClick : this.delConfirm.bind(this)\r\n                })\r\n                break;\r\n            case 'Save':\r\n                this.saveClick(props)\r\n                break;\r\n            case 'Enable':\r\n                let formData = props.form.getAllFormValue(this.formId);\r\n                let finalData = {\r\n                    isEnable: true,\r\n                    list: []\r\n                }\r\n                let dataObj = {\r\n                    pk_bankaccbas: formData.rows[0].values.pk_bankaccbas.value,\r\n                    pk_custbank: formData.rows[0].values.pk_custbank.value,\r\n                    pk_cust: formData.rows[0].values.pk_cust.value\r\n                }\r\n                finalData.list.push(dataObj)\r\n                ajax({\r\n                    url: enableUrl,\r\n                    data: finalData,\r\n                    success: res => {\r\n                        this.getdata(dataObj.pk_custbank,dataObj.pk_bankaccbas,dataObj.pk_cust)\r\n                        toast({color: 'success',title: this.state.json['10140CUSTPF-000024']})/* 国际化处理： 启用成功！*/\r\n                    }\r\n\r\n                })\r\n                break\r\n            case 'Disable':\r\n                formData = props.form.getAllFormValue(this.formId);\r\n                finalData = {\r\n                    isEnable: false,\r\n                    list: []\r\n                }\r\n                dataObj = {\r\n                    pk_bankaccbas: formData.rows[0].values.pk_bankaccbas.value,\r\n                    pk_custbank: formData.rows[0].values.pk_custbank.value,\r\n                    pk_cust: formData.rows[0].values.pk_cust.value\r\n                }\r\n                finalData.list.push(dataObj)\r\n                ajax({\r\n                    url: enableUrl,\r\n                    data: finalData,\r\n                    success: res => {\r\n                        this.getdata(dataObj.pk_custbank,dataObj.pk_bankaccbas,dataObj.pk_cust)\r\n                        toast({color: 'success',title: this.state.json['10140CUSTPF-000025']})/* 国际化处理： 停用成功！*/\r\n                    }\r\n\r\n                })\r\n                break;\r\n            case 'Back':\r\n                props.pushTo(listUrl, {\r\n                    pagecode: pagecode_list,\r\n                    appcode: appId,\r\n                    status: 'browse'\r\n                })\r\n                break;\r\n            case 'Refresh':\r\n                this.refresh(props);\r\n                break;\r\n            case 'CommitGrp':\r\n                this.pfProcess(commitUrl);\r\n                break;\r\n            case 'Commit':\r\n                this.pfProcess(commitUrl);\r\n                break;\r\n            case 'Callback':\r\n                this.pfProcess(callbackUrl);\r\n                break;\r\n            case 'Approve':\r\n                //this.pfProcess(approveUrl)\r\n                this.showApprove()\r\n                break;\r\n            case 'UnApprove':\r\n                this.pfProcess(unApproveUrl)\r\n                break;\r\n            case 'Cancel': \r\n                promptBox({\r\n                    color:\"warning\",\r\n                    title : this.state.json['10140CUSTPF-000027'],/* 国际化处理： 确认取消*/\r\n                    content : this.state.json['10140CUSTPF-000028'],/* 国际化处理： 是否确认要取消？*/\r\n                    beSureBtnClick : this.Cancel.bind(this,props)\r\n                })\r\n                break;\r\n            case 'Bankacc':\r\n                props.modal.show('bankaccList');\r\n                break;\r\n            case 'PrintGrp':\r\n                this.onPrint();\r\n                break;\r\n            case 'Print':\r\n                this.onPrint();\r\n                break;\r\n            case 'Output':\r\n                this.onOutput();\r\n                break;\r\n            case 'Attment':\r\n                this.Attment();\r\n                break;\r\n            case 'ApproveInfo':\r\n                this.setState({\r\n                    approveDetailShow:true,\r\n                    billid:props.form.getFormItemsValue(formId,pk_item).value\r\n                });\r\n                break;\r\n            case 'FinanEdit':\r\n                this.speTableEdit('finance')\r\n                break\r\n            case 'SaleEdit':\r\n                this.speTableEdit('sale')\r\n                break\r\n            case 'CreditEdit':\r\n                this.speTableEdit('creditctl')\r\n                break\r\n            case 'FinanSave':\r\n                finalData = {}\r\n                let mainFormData = props.form.getAllFormValue(this.formId)\r\n                let baseInfoData = props.form.getAllFormValue('customer')\r\n                finalData.CustomerPfVO = mainFormData\r\n                finalData.CustomerVO = baseInfoData\r\n                //保存每个子表信息\r\n                tableIds.forEach(item => {\r\n                    if(!(item=='bankaccsub')){\r\n                        finalData[item] = props.cardTable.getAllData(item);\r\n                    }\r\n                })\r\n                \r\n                ajax({\r\n                    url: updateUrl,\r\n                    data: finalData,\r\n                    success: (res) => {\r\n                        props.pushTo('/card', {\r\n                            status: 'browse',\r\n                            id: res.data\r\n                        })\r\n                        this.bankaccConfig.mainPk = res.data\r\n                        let vBillStatus = this.getdata(res.data)\r\n                        this.updateSpeTableBtnStatus()\r\n                        //特殊设置一下返回按钮的可见性\r\n                        this.setState({\r\n                            backVisible: true\r\n                        })\t\r\n                        \r\n                        this.props.cardTable.setStatus('finance','browse');\r\n                        this.finanTableStatus = 'browse'\r\n                    }\r\n                })\r\n                break\r\n            case 'SaleSave':\r\n                finalData = {}\r\n                mainFormData = props.form.getAllFormValue(this.formId)\r\n                baseInfoData = props.form.getAllFormValue('customer')\r\n                finalData.CustomerPfVO = mainFormData\r\n                finalData.CustomerVO = baseInfoData\r\n                tableIds.forEach(item => {\r\n                    if(!(item=='bankaccsub')){\r\n                        finalData[item] = props.cardTable.getAllData(item);\r\n                    }\r\n                })\r\n                \r\n                ajax({\r\n                    url: updateUrl,\r\n                    data: finalData,\r\n                    success: (res) => {\r\n                        props.pushTo('/card', {\r\n                            status: 'browse',\r\n                            id: res.data\r\n                        })\r\n                        this.bankaccConfig.mainPk = res.data\r\n                        let vBillStatus = this.getdata(res.data)\r\n                        this.updateSpeTableBtnStatus()\r\n                        //特殊设置一下返回按钮的可见性\r\n                        this.setState({\r\n                            backVisible: true\r\n                        })\t\r\n                        \r\n                        this.props.cardTable.setStatus('sale','browse');\r\n                        this.finanTableStatus = 'browse'\r\n                    }\r\n                })\r\n                break\r\n            case 'CreditSave':\r\n                finalData = {}\r\n                mainFormData = props.form.getAllFormValue(this.formId)\r\n                baseInfoData = props.form.getAllFormValue('customer')\r\n                finalData.CustomerPfVO = mainFormData\r\n                finalData.CustomerVO = baseInfoData\r\n                tableIds.forEach(item => {\r\n                    if(!(item=='bankaccsub')){\r\n                        finalData[item] = props.cardTable.getAllData(item);\r\n                    }\r\n                })\r\n                \r\n                ajax({\r\n                    url: updateUrl,\r\n                    data: finalData,\r\n                    success: (res) => {\r\n                        props.pushTo('/card', {\r\n                            status: 'browse',\r\n                            id: res.data\r\n                        })\r\n                        this.bankaccConfig.mainPk = res.data\r\n                        let vBillStatus = this.getdata(res.data)\r\n                        this.updateSpeTableBtnStatus()\r\n                        //特殊设置一下返回按钮的可见性\r\n                        this.setState({\r\n                            backVisible: true\r\n                        })\t\r\n                        \r\n                        this.props.cardTable.setStatus('creditctl','browse');\r\n                    }\r\n                })\r\n                break\r\n            case 'FinanCancel':\r\n                this.props.cardTable.resetTableData('finance');\r\n                this.props.cardTable.setStatus('finance','browse')\r\n                this.updateSpeTableBtnStatus()\r\n                break\r\n            case 'SaleCancel':\r\n                this.props.cardTable.resetTableData('sale');\r\n                this.props.cardTable.setStatus('purchase','browse')\r\n                this.updateSpeTableBtnStatus()\r\n                break\r\n            case 'CreditCancel':\r\n                this.props.cardTable.resetTableData('creditctl');\r\n                this.props.cardTable.setStatus('purchase','browse')\r\n                this.updateSpeTableBtnStatus()\r\n                break\r\n            case 'FinanceRefresh':\r\n                this.getdata(this.props.getUrlParam('id'),null,['fiance'])\r\n                break;\r\n            case 'SaleRefresh': \r\n                this.getdata(this.props.getUrlParam('id'),null,['sale'])\r\n                break;\r\n            case 'CreditctlRefresh':\r\n                this.getdata(this.props.getUrlParam('id'),null,['creditctl'])\r\n                break;\r\n            default:\r\n                break\r\n        }\r\n    }\r\n\r\n    updateSpeTableBtnStatus(vBillStatus = -1, mainFormStatus = 'browse', speTableStatus = {finance: 'browse', sale: \"browse\", \"creditctl\": \"browse\"}) {\r\n        let speTableIds = ['finance','sale', 'creditctl']\r\n        let speTableBtnPre = ['Finan','Sale',\"Credit\"]\t//财务信息和采购信息按钮前缀\r\n        let speTableRefreshBtn = ['FinanceRefresh','SaleRefresh','CreditctlRefresh'];\r\n\t\tlet speBtnObj = {}\r\n\t\tspeTableIds.forEach((item, index) => {\r\n\t\t\tlet tableStatus = speTableStatus[item]\r\n\t\t\tif(mainFormStatus == 'edit' || mainFormStatus == 'add' || vBillStatus != -1) {\r\n\t\t\t\tspeBtnObj[`${speTableBtnPre[index]}Edit`] = false\r\n\t\t\t\tspeBtnObj[`${speTableBtnPre[index]}Save`] = false\r\n                speBtnObj[`${speTableBtnPre[index]}Cancel`] = false\r\n                speBtnObj[speTableRefreshBtn[index]] = false\r\n\t\t\t}\r\n\t\t\telse if(tableStatus == 'edit' || tableStatus == 'add') {\r\n\t\t\t\tspeBtnObj[`${speTableBtnPre[index]}Edit`] = false\r\n\t\t\t\tspeBtnObj[`${speTableBtnPre[index]}Save`] = true\r\n                speBtnObj[`${speTableBtnPre[index]}Cancel`] = true\r\n                speBtnObj[speTableRefreshBtn[index]] = false\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeBtnObj[`${speTableBtnPre[index]}Edit`] = true\r\n\t\t\t\tspeBtnObj[`${speTableBtnPre[index]}Save`] = false\r\n                speBtnObj[`${speTableBtnPre[index]}Cancel`] = false\r\n                speBtnObj[speTableRefreshBtn[index]] = true\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.props.button.setButtonVisible(speBtnObj);\r\n    }\r\n\r\n    speTableEdit(currTableId) {\r\n        let speTableIds = ['finance','sale','creditctl'];\r\n        let speTableNames = [this.state.json['10140CUSTPF-000049'],this.state.json['10140CUSTPF-000050'],this.state.json['10140CUSTPF-000051']]\r\n        let hasWarning = false\r\n        let speTableStatus = {}\r\n        speTableIds.forEach((item,index) => {\r\n            if(currTableId != item) {\r\n                speTableStatus[item] = 'browse'\r\n                if(this.props.cardTable.getStatus(item) == 'edit' && !hasWarning) {\r\n                    toast({color: 'warning', content: speTableNames[index]})\r\n                    hasWarning = true\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                speTableStatus[item] = 'edit'\r\n            }\r\n        })\r\n\r\n        if(hasWarning) {\r\n            return;\r\n        }\r\n        this.props.cardTable.setStatus(currTableId,'edit');\r\n        this.updateSpeTableBtnStatus(-1,\"browse\",speTableStatus)\r\n    }\r\n\r\n    closeApprove=()=>{\r\n        this.setState({\r\n            approveDetailShow: false\r\n        })\r\n    }\r\n\r\n    edit=(props)=>{\r\n        props.setUrlParam({\r\n            pagecode: pageId,\r\n            appcode: appId,\r\n            status: 'edit',\r\n            id: props.getUrlParam('id')\r\n        });\r\n        toggleShow(props)\r\n        this.updateSpeTableBtnStatus(-1,'edit')\r\n    }\r\n\r\n    valid=(props,action,callback)=>{\r\n\r\n        let pk = props.form.getFormItemsValue(formId,pk_item).value;\r\n        let data = {pk,action};\r\n\r\n        ajax({\r\n            url:validUrl,\r\n            data,\r\n            success:res=>{\r\n                if(res && res.data){\r\n                    this.props.form.setFormItemsDisabled(this.formId,{'billnumber':!res.data.vbillnumedit});\r\n                    this.props.form.setFormItemsDisabled('customer',{code:!res.data.codeedit});\r\n                    callback && callback();\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    Cancel=(props)=>{\r\n        \r\n        // let pk = props.getUrlParam('id')==undefined?getDefData('preid',dataSource):this.props.getUrlParam('id');\r\n        //缓存区最后一条\r\n        let pk = getCurrentLastId(dataSource);\r\n        this.getdata(pk, (vbillstatus) => {\r\n            this.updateSpeTableBtnStatus(vbillstatus)\r\n        })\r\n        props.form.setFormStatus(this.formId,'browse')\r\n        props.form.setFormStatus('customer','browse')\r\n        tableIds.forEach(item => {\r\n            props.cardTable.setStatus(item,'browse')\r\n        })\r\n        // props.pushTo(cardUrl, {\r\n        //     pagecode: pageId,\r\n        //     appcode: appId,\r\n        //     status: 'browse'\r\n        // })\r\n        props.setUrlParam({\r\n            pagecode: pageId,\r\n            appcode: appId,\r\n            status: 'browse'\r\n        });\r\n        toggleShow(props,pk == '' || pk == null ? true : false)\r\n\r\n        // props.form.cancel([this.formId,'customer'])\r\n        // tableIds.forEach(item => {\r\n        // \tprops.cardTable.resetTableData(item)\r\n        // })\r\n    }\r\n\r\n    //附件管理\r\n    Attment=()=>{\r\n        this.state.showlogoUploader=true;\r\n        this.setState(this.state);\r\n    }\r\n    //关闭附件窗口\r\n    onHideUploader=()=>{\r\n        this.state.showlogoUploader=false;\r\n        this.setState(this.state);\r\n    }\r\n    //打印\r\n    onPrint=()=>{\r\n\r\n        let allData = this.props.form.getAllFormValue(formId);\r\n\r\n        if(allData.length === 0){\r\n            toast({content:this.state.json['10140CUSTPF-000029'],color:'warning'});/* 国际化处理： 无可打印数据*/\r\n            return;\r\n        }\r\n\r\n        let pks = [];\r\n\r\n        pks.push(allData.rows[0].values[pk_item].value);\r\n\r\n        print(\r\n            'pdf',\r\n            printUrl,\r\n            {\r\n                funcode:printFunCode,//功能节点编码\r\n                nodekey:printNodeKey,//模板节点编码\r\n                oids:pks\r\n            }\r\n        )\r\n    }\r\n    //输出\r\n    onOutput=()=>{\r\n\r\n        let allData = this.props.form.getAllFormValue(formId);\r\n\r\n        if(allData.length === 0){\r\n            toast({content:this.state.json['10140CUSTPF-000029'],color:'warning'});/* 国际化处理： 无可打印数据*/\r\n            return;\r\n        }\r\n\r\n        let pks = [];\r\n\r\n        pks.push(allData.rows[0].values[pk_item].value);\r\n\r\n        this.setState({\r\n            ids : pks\r\n        },this.refs.printOutput.open());\r\n    }\r\n\r\n    refresh=(props)=>{\r\n        // props.pushTo(cardUrl, {\r\n        //     pagecode: pageId,\r\n        //     appcode: appId,\r\n        //     status:props.getUrlParam('status'),\r\n        //     [pk_item]:props.getUrlParam(pk_item)\r\n        // })\r\n        props.setUrlParam({\r\n            pagecode: pageId,\r\n            appcode: appId,\r\n            status:props.getUrlParam('status'),\r\n            id:props.getUrlParam('id')\r\n        })\r\n        this.getdata(props.getUrlParam('id'),()=>{\r\n            toast({title:this.state.json['10140CUSTPF-000026'],color:'success'});/* 国际化处理： 刷新成功！*/\r\n        });\r\n    }\r\n\r\n    addLineClick=(tableid)=>{\r\n        if(tableid == 'custcontacts'){\r\n            this.props.cardTable.addRow(tableid);\r\n            // this.props.modal.show('linkman')\r\n            // this.props.form.setFormStatus('Linkman','edit')\r\n            // this.props.form.EmptyAllFormValue('Linkman')\r\n        }else{\r\n\r\n            this.props.cardTable.addRow(tableid);\r\n        }\r\n    }\r\n\r\n    pageInfoClick=(props, pk)=>{\r\n\r\n        let data = {\r\n            \"pk\": pk,\r\n            \"pageid\": pageId\r\n        };\r\n        ajax({\r\n            url: queryCardUrl,\r\n            data: data,\r\n            success: (res) =>{\r\n                if (res.data.head) {\r\n                    debugger;\r\n                    props.form.setAllFormValue({ [formId]: res.data.head[formId] });\r\n                    props.setUrlParam(pk)//动态修改地址栏中的id的值\r\n                }\r\n                if (res.data.body) {\r\n                    props.editTable.setTableData(tableId, res.data.body[tableId]);\r\n                }\r\n                toggleShow(props);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    afterEvent =(props, moduleId, key,value, changedrows, i, s, g)=>{\r\n\r\n        if(eventItems.includes(key)){\r\n\r\n            let data={};\r\n\r\n            let customerpf = this.props.form.getAllFormValue('customerpf');\r\n            let customer = this.props.form.getAllFormValue('customer');\r\n    \r\n            data.CustomerPfVO = customerpf;\r\n            data.CustomerVO = customer;\r\n            data.key = key;\r\n            data.status = this.props.getUrlParam('status');\r\n\r\n            if(key == 'pk_org'){\r\n                props.meta.getMeta()['customer'].items.forEach(item => {\r\n\r\n                    if(['pk_custclass','pk_areacl','pk_customer_main','pk_supplier'].includes(item.attrcode)){\r\n                        item.queryCondition = {\r\n                            'pk_org':value.value\r\n                        };\r\n                    }\r\n\r\n                    // if(item.attrcode != 'pk_custclass') {\r\n                    //     item.queryCondition = {\r\n                    //         'pk_org':value.value\r\n                    //     };\r\n                    // }else if(item.attrcode != 'pk_areacl'){\r\n                    //     item.queryCondition = {\r\n                    //         'pk_org':value.value\r\n                    //     };\r\n                    // }else if(item.attrcode != 'pk_customer_main'){\r\n                    //     item.queryCondition = {\r\n                    //         'pk_org':value.value\r\n                    //     };\r\n                    // }else if(item.attrcode != 'pk_supplier'){\r\n                    //     item.queryCondition = {\r\n                    //         'pk_org':value.value\r\n                    //     };\r\n                    // }\r\n                })\r\n            }\r\n\r\n            //目的组织为本组织时\r\n            if(key == 'destorg'){\r\n                let disableFlag = value.value == '0'?true:false;\r\n                this.props.form.setFormItemsDisabled('customer',{'custprop':disableFlag,'pk_financeorg':disableFlag});\r\n            }\r\n            if(key == 'custprop'){\r\n                //客户类型为内部单位，对应业务单元必填\r\n                let disableFlag = value.value == '1'?true:false;\r\n                this.props.form.setFormItemsRequired('customer',{'pk_financeorg':disableFlag});\r\n            }\r\n            // data = {\r\n            //     custAndCustApplyForm:data\r\n            // }\r\n            this.setDefaultValue(data);\r\n        }\r\n    }\r\n\r\n    getTableHead=(tableId)=> {\r\n        let {createButtonApp,createButton} = this.props.button\r\n        return (\r\n            <div className=\"shoulder-definition-area\">\r\n                <div className=\"definition-icons\">\r\n                    {createButtonApp({\r\n                        area: 'definition-icons',//按钮注册中的按钮区域\r\n                        //buttonLimit: 5,\r\n                        onButtonClick: this.addLineClick.bind(this,tableId)\r\n                        //popContainer: document.querySelector('.header-button-area')\r\n                    })}\r\n                    {this.props.cardTable.createBrowseIcons(tableId, {\r\n                        iconArr: ['close', 'open', 'max','setCol'],\r\n                        maxDestAreaId: 'nc-bill-card'\r\n                    })}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    getTableHeadSpe(tableId) {\r\n        let {createButtonApp} = this.props.button\r\n\t\treturn (\r\n\t\t\t<div className=\"shoulder-definition-area\">\r\n\t\t\t\t<div className=\"definition-icons\" style={{padding: '0px'}}>\r\n\t\t\t\t\t{createButtonApp({\r\n\t\t\t\t\t\tarea: `${tableId}-action`,//按钮注册中的按钮区域\r\n\t\t\t\t\t\tonButtonClick: this.buttonClick.bind(this)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\t\r\n\t\t\t</div>\r\n\t\t)\r\n    }\r\n\r\n    //通过单据id查询单据信息\r\n    getdata = (pk, callback, speTables = []) =>{\r\n        let data = {pk};\r\n        ajax({\r\n            url: queryCardUrl,\r\n            data,\r\n            success: (res) => {\r\n                let retBillStatus = -1\r\n                if(res.data){\r\n                    if (res.data.head) {\r\n                        let formData = {\r\n                            [this.formId]: res.data.head[this.formId],\r\n                            \"customer\": res.data['customer']['customer']\r\n                        }\r\n                        this.props.form.setAllFormValue(formData)\r\n                        retBillStatus = res.data.head[this.formId].rows[0].values.approvestate.value\r\n                    }\r\n                    if (res.data.bodys) {\r\n                        // this.props.editTable.setTableData(this.tableId, res.data.body[this.tableId]);\r\n                        // let totalcount = this.props.cardTable.getNumberOfRows(this.tableId);\r\n                        // let arr = this.props.cardTable.getAllRows(this.tableId);\r\n                        // let applycount = 0;\r\n                        // // arr.map((item)=>{\r\n                        // // \tapplycount += parseInt(item.values.pk_project.value);\r\n                        // // })\r\n                        // this.setState({applycount});\r\n                        // this.setState({totalcount});\r\n                        //特殊赋值，为了应对三个特殊子表的刷新操作：财务，采购，信用控制域\r\n                        if(speTables.length > 0) {\r\n                            res.data.bodys.forEach((item, index) => {\r\n                                speTables.forEach((tableId) => {\r\n                                    if(item.hasOwnProperty(tableId)) {\r\n                                        this.props.cardTable.setTableData(tableId,res.data.bodys[index][tableId])\r\n                                    }\r\n                                })\r\n                            })\r\n                            return;\r\n                        }\r\n    \r\n                        res.data.bodys.forEach((item, index) => {\r\n                            tableIds.forEach((tableId) => {\r\n                                if(item.hasOwnProperty(tableId)) {\r\n                                    this.props.cardTable.setTableData(tableId,res.data.bodys[index][tableId])\r\n                                }\r\n                            })\r\n                        })\r\n                        // for(let tableId in tableIds) {\r\n                        // \tif(res.data.body.hasOwnProperty(tableId)) {\r\n                        // \t\tthis.props.cardTable.setTableData(tableId,res.data.body[tableId])\r\n                        // \t}\r\n                        // }\r\n                    }\r\n                }\r\n                else{\r\n                    this.props.form.EmptyAllFormValue(this.formId);\r\n                    this.props.form.EmptyAllFormValue('customer');\r\n                }\r\n                toggleShow(this.props, pk == '' || pk == null ? true : false);\r\n                this.setState(this.state);\r\n\r\n                if(callback && typeof callback == 'function') {\r\n                    callback(retBillStatus)\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    onCardTableAfterEvent(props, moduleId, key,value, changedrows, index, record) {\r\n        if(changedrows[0].newvalue.value != changedrows[0].oldvalue.value) {\r\n            let setObj = {}\r\n            setObj.value = record.values.pk_region.value\r\n            setObj.display = record.values.pk_region.display\r\n            props.cardTable.setValByKeyAndIndex(this.tableId,index,'pk_region.name',setObj)\r\n            record.values.pk_region.display = value.refcode\r\n        }\r\n    }\r\n\r\n    //保存单据\r\n    saveClick = (props) =>{\r\n        let url = saveUrl;//新增保存\r\n        if (this.props.getUrlParam('status') === 'edit') {\r\n            url = updateUrl;//修改保存\r\n        }\r\n        let finalData = {}\r\n        if(!props.form.isCheckNow(this.formId)){\r\n            return;\r\n        }\r\n        \r\n        let mainFormData = props.form.getAllFormValue(this.formId)\r\n        let baseInfoData = props.form.getAllFormValue('customer')\r\n        finalData.CustomerPfVO = mainFormData\r\n        finalData.CustomerVO = baseInfoData\r\n        //保存每个子表信息\r\n        tableIds.forEach(item => {\r\n            if(!(item=='bankaccsub')){\r\n                finalData[item] = props.cardTable.getAllData(item);\r\n            }\r\n        })\r\n\r\n        //供应商基本信息校验\r\n\t\tlet baseInfoMeta = this.props.meta.getMeta()\r\n\t\tbaseInfoMeta = baseInfoMeta.customer.items\r\n\t\tlet emtpyNesItems = []\r\n\t\tbaseInfoMeta.forEach(item => {\r\n\t\t\tif(item.required == true) {\r\n\t\t\t\tif(baseInfoData.rows[0].values[item.attrcode].value == null || baseInfoData.rows[0].values[item.attrcode].value == '') {\r\n\t\t\t\t\temtpyNesItems.push(item.label)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tlet afterInsertToastInfo = null\r\n\t\tif(emtpyNesItems.length > 0) {\r\n\t\t\tafterInsertToastInfo = `${this.state.json['10140CUSTPF-000053']}[${emtpyNesItems.join('],[')}]`/* 国际化处理： 供应商基本信息校验失败,详细信息如下,下列字段值不能为空*/\r\n\t\t\tmainFormData.rows[0].values.memo.value = afterInsertToastInfo\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// 所有信息都已经录入，清除异常信息字段\r\n\t\t\tmainFormData.rows[0].values.memo.value = null\r\n\t\t}\r\n\r\n        finalData.preCustCode = this.preCustCode\r\n        finalData.hasPreCustCode = this.hasPreCustCode\r\n\r\n        ajax({\r\n            url: url,\r\n            data: finalData,\r\n            success: (res) => {\r\n                let pk = res.data;\r\n                props.setUrlParam({\r\n                    pagecode: pageId,\r\n                    appcode: appId,\r\n                    status: 'browse',\r\n                    id: pk\r\n                });\r\n                setDefData('preid',dataSource,pk);\r\n                this.getdata(pk, (vbillstatus) => {\r\n                    this.updateSpeTableBtnStatus(vbillstatus,'browse')\r\n                });\r\n\r\n                //业务参数设置当中允许违反规则校验并且必输项未填的话，成功保存之后需要在界面上展示一下提示信息\r\n\t\t\t\tif(afterInsertToastInfo) {\r\n\t\t\t\t\ttoast({color: 'warning',content: afterInsertToastInfo})\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ttoast({color: 'success', title: this.state.json['10140CUSTPF-000030']})/* 国际化处理： 保存成功！*/\r\n\t\t\t\t}\r\n            }\r\n        })\r\n    }\r\n\r\n    //删除单据\r\n    delConfirm = () => {\r\n        ajax({\r\n            url: deleteUrl,\r\n            data: {\r\n                deleteinfo: [\r\n                    {   \r\n                        pk_org:this.props.form.getFormItemsValue(this.formId, 'pk_org').value,\r\n                        id: this.props.getUrlParam('id')==null?this.props.form.getFormItemsValue(this.formId, pk_item).value:this.props.getUrlParam('id'),\r\n                        ts: this.props.form.getFormItemsValue(this.formId, 'ts').value\r\n                    }\r\n                ]\r\n            },\r\n            success: (res) => {\r\n                if(res){\r\n                    this.props.pushTo(listUrl,{\r\n                        pagecode: pagecode_list,\r\n                        appcode: appId,\r\n                        status: 'browse'\r\n                    });\r\n                }\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n    modelSave = (tableid)=>{\r\n        this.props.cardTable.closeModel(tableid);\r\n        this.saveClick(this.props);\r\n    }\r\n\r\n    showApprove() {\r\n        this.setState({\r\n            showApprove: true\r\n        })\r\n    }\r\n\r\n    closeApprove() {\r\n        this.setState({\r\n            showApprove: false\r\n        })\r\n    }\r\n\r\n    bankaccClick(props,id) {\r\n        switch(id) {\r\n            case 'BankAdd':\r\n                this.setState({\r\n                    isList: false\r\n                })\r\n                break;\r\n        }\r\n    }\r\n\r\n    bankaccModalChange(info) {\r\n        let isList = info.isList\r\n        delete info.isList\r\n        if(isList) {\r\n            this.bankaccConfig = {\r\n                tableId: 'custbank',\r\n                formId1: 'accbasinfo',\r\n                formId2: 'netbankinfo',\r\n                cardTableId: 'bankaccsub',\r\n                mainPk : this.props.getUrlParam('id'),\r\n                bankaccModalChange: this.bankaccModalChange.bind(this),\r\n                ...info\r\n            }\r\n            this.props.modal.close('bankaccList')\r\n            this.props.modal.show('bankaccForm')\r\n        }\r\n        else {\r\n            this.bankaccConfig = {\r\n                tableId: 'custbank',\r\n                formId1: 'accbasinfo',\r\n                formId2: 'netbankinfo',\r\n                cardTableId: 'bankaccsub',\r\n                mainPk : this.props.getUrlParam('id'),\r\n                bankaccModalChange: this.bankaccModalChange.bind(this)\r\n            }\r\n            this.props.modal.close('bankaccForm')\r\n            this.props.modal.show('bankaccList')\r\n        }\r\n\r\n    }\r\n\r\n    linkmanClose(props) {\r\n        let allRows = props.cardTable.getAllRows('custcontacts')\r\n        allRows.forEach(item => {\r\n            if(item.status == 2) {\r\n                item.values.forEach(value => {\r\n                    value.display = value.value\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cardTableDoubleClick(props, record, index) {\r\n\r\n        let currStatus = props.form.getFormStatus(this.formId)\r\n        if(currStatus == 'edit') {\r\n            let pk = record.values.pk_linkman.value\r\n            ajax({\r\n                url: queryLinkmanUrl,\r\n                data: {pk},\r\n                success: res => {\r\n                    props.modal.show('linkman')\r\n                    props.form.setAllFormValue({Linkman: res.data.Linkman})\r\n                    props.form.setFormStatus('Linkman','edit')\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    linkmanSaveClick() {\r\n        let linkmanData = this.props.form.getAllFormValue('Linkman')\r\n        let finalData = {\r\n            model: linkmanData\r\n        }\r\n        let allOtherKeys = ['pk_suplinkman','pk_linkman','opr','isdefault','ts','def1','def2','def3','def4','def5','def6','def7','def8','def9','def10']\r\n        let allShowKeys = ['name','sex','vjob','phone','cell']\r\n        let allRows = this.props.cardTable.getAllRows('custcontacts')\r\n        ajax({\r\n            url: saveLinkmanUrl,\r\n            data: finalData,\r\n            success: (res) => {\r\n                let addResult = false\r\n                let pk_linkman = res.data\r\n                allRows.forEach(item => {\r\n                    if(item.values.pk_linkman.value == pk_linkman) {\r\n                        allShowKeys.forEach(key => {\r\n                            item.values[`pk_linkman.${key}`].display = linkmanData.rows[0].values[key].value\r\n                        })\r\n                        item.values.pk_linkman.value = pk_linkman\r\n                        addResult = true\r\n                    }\r\n                })\r\n                if(!addResult) {\r\n                    let value = {}\r\n                    allShowKeys.forEach(key => {\r\n                        value[`pk_linkman.${key}`] = {\r\n                            value: linkmanData.rows[0].values[key].value,\r\n                            display: linkmanData.rows[0].values[key].value\r\n                        }\r\n                        if(key == 'sex') {\r\n                            let sexValue = linkmanData.rows[0].values[key].value\r\n                            value[`pk_linkman.${key}`].display = sexValue && sexValue == '1' ? this.state.json['10140CUSTPF-000031'] : this.state.json['10140CUSTPF-000032']/* 国际化处理： 男,女*/\r\n                        }\r\n                    })\r\n                    value.pk_linkman = {\r\n                        value: pk_linkman,\r\n                        display: linkmanData.rows[0].values['name'].value\r\n                    }\r\n                    let newRow = {\r\n                        rowid:pk_linkman,\r\n                        status: 2,\r\n                        values: value\r\n                    }\r\n                    allRows.push(newRow)\r\n                }\r\n                this.props.cardTable.setTableData('custcontacts',{rows: allRows})\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    onLinkmanBeforeEvent(props, moduleId, key, value, index, record, status) {\r\n\t\tlet meta = props.meta.getMeta()\r\n\t\tif(status == 'model') {\r\n\t\t\tmoduleId = 'custcontacts_edit'\r\n\t\t}\r\n\t\tif(record.values.pk_linkman.value) {\r\n\t\t\tthis.editLinkmanPk = record.values.pk_linkman.value\r\n\t\t\tmeta[moduleId].items.find(item => item.attrcode == 'pk_linkman').queryCondition = () => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpk_linkman: record.values.pk_linkman.value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmeta[moduleId].items.find(item => item.attrcode == 'pk_linkman').queryCondition = () => {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t\tthis.editLinkmanPk = null\r\n\t\t}\r\n\t\tthis.linkmanIndex = index\r\n\t\tmeta[moduleId].items.find(item => item.attrcode == 'pk_linkman').onAfterEdit = this.onLinkmanAfterEdit.bind(this)\r\n\t\treturn true\r\n    }\r\n    \r\n    /**\r\n\t * 根据联系人参照返回的数据构建供应商了联系人表格的行数据，并更新到表格上\r\n\t * \r\n\t * @param {*} savedData \r\n\t */\r\n\tonLinkmanAfterEdit(savedData) {\r\n\t\tlet allShowKeys = ['name','sex','vjob','phone','cell']\r\n\t\tlet allRows = this.props.cardTable.getAllRows('custcontacts')\r\n\t\tlet pk_linkman = savedData.linkmanRefer.rows[0].values.pk_linkman.value\r\n\t\tallRows.forEach((item, index) => {\r\n\t\t\tlet itemPkLinkman = item.values.pk_linkman.value\r\n\t\t\tif(itemPkLinkman == pk_linkman || ((itemPkLinkman == null || itemPkLinkman == '') && index == this.linkmanIndex)) {\r\n\t\t\t\tallShowKeys.forEach((key) => {\r\n\t\t\t\t\t//性别需要进行一下特殊处理\r\n\t\t\t\t\tif(key == 'sex') {\r\n\t\t\t\t\t\titem.values[`pk_linkman.${key}`].value = savedData.linkmanRefer.rows[0].values[key].value\r\n\t\t\t\t\t\tif(savedData.linkmanRefer.rows[0].values[key].value) {\r\n\t\t\t\t\t\t\titem.values[`pk_linkman.${key}`].display = savedData.linkmanRefer.rows[0].values[key].value == 1 ? this.state.json['10140CUSTPF-000031'] : this.state.json['10140CUSTPF-000032']/* 国际化处理： 男,女*/\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n                        if(key == \"name\") {\r\n                            item.values[`pk_linkman`].value = savedData.linkmanRefer.rows[0].values[key].value\r\n                            item.values[`pk_linkman`].display = savedData.linkmanRefer.rows[0].values[key].value\r\n                            //下面这段代码是为了修正一个奇怪的问题：如果不把isEdit删掉的话，那么列表界面上联系人字段出不来\r\n                            delete item.values[`pk_linkman`].isEdit\r\n                        }\r\n                        else {\r\n                            item.values[`pk_linkman.${key}`].value = savedData.linkmanRefer.rows[0].values[key].value\r\n                            item.values[`pk_linkman.${key}`].display = savedData.linkmanRefer.rows[0].values[key].value\r\n                        }\r\n\t\t\t\t\t}\r\n                })\r\n                item.values.pk_linkman.value = pk_linkman\r\n\t\t\t\t//item.values.pk_custlinkman.value = pk_linkman\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\tthis.props.cardTable.setTableData('custcontacts',{rows: allRows})\r\n    }\r\n    \r\n    resetDeptAndPsnRef(props, moduleId, key, value,  index, record,status) {\r\n        //修正一下专管部门和专管业务员的参照的查询条件\r\n        let meta = this.props.meta.getMeta();\r\n        let realModuleId = status == 'model' ? `${moduleId}_edit` : moduleId;\r\n        if(moduleId == 'finance') {\r\n            meta[realModuleId].items.find(item => item.attrcode == 'pk_respdept1').queryCondition = () => {\r\n                return {\r\n                    pk_org: record.values.pk_org.value\r\n                }\r\n            }\r\n\r\n            meta['finance'].items.find(item => item.attrcode == 'pk_resppsn1').queryCondition = () => {\r\n                let paramObj = {\r\n                    pk_org: record.values.pk_org.value\r\n                }\r\n                if(record && record.values && record.values.pk_respdept1 && record.values.pk_respdept1.value && record.values.pk_respdept1.value != '') {\r\n                    paramObj.pk_dept = record.values.pk_respdept1.value\r\n                }\r\n                return paramObj;\r\n            }\r\n\r\n            meta['finance_edit'].items.find(item => item.attrcode == 'pk_resppsn1').queryCondition = () => {\r\n                let paramObj = {\r\n                    pk_org: record.values.pk_org.value\r\n                }\r\n                if(record && record.values && record.values.pk_respdept1 && record.values.pk_respdept1.value && record.values.pk_respdept1.value != '') {\r\n                    paramObj.pk_dept = record.values.pk_respdept1.value\r\n                }\r\n                return paramObj;\r\n            }\r\n        }\r\n\r\n        if(moduleId == 'sale') {\r\n            meta[realModuleId].items.find(item => item.attrcode == 'respdept').queryCondition = () => {\r\n                return {\r\n                    pk_org: record.values.pk_org.value\r\n                }\r\n            }\r\n\r\n            meta['sale'].items.find(item => item.attrcode == 'respperson').queryCondition = () => {\r\n                let paramObj = {\r\n                    pk_org: record.values.pk_org.value\r\n                }\r\n                if(record && record.values && record.values.respdept && record.values.respdept.value && record.values.respdept.value != '') {\r\n                    paramObj.pk_dept = record.values.respdept.value\r\n                }\r\n                return paramObj;\r\n            }\r\n\r\n            meta['sale_edit'].items.find(item => item.attrcode == 'respperson').queryCondition = () => {\r\n                let paramObj = {\r\n                    pk_org: record.values.pk_org.value\r\n                }\r\n                if(record && record.values && record.values.respdept && record.values.respdept.value && record.values.respdept.value != '') {\r\n                    paramObj.pk_dept = record.values.respdept.value\r\n                }\r\n                return paramObj;\r\n            }\r\n        }\r\n        this.props.meta.setMeta(meta)\r\n\r\n        return true;\r\n        \r\n    }\r\n\r\n    onSpeCardTableAfterEvent(props, moduleId, key,value, changedrows, index, record) {\r\n\t\tif(changedrows[0].newvalue.value != changedrows[0].oldvalue.value) {\r\n            //重新设置一下专管部门\r\n            if(key == 'pk_resppsn1' && moduleId == 'finance') {\r\n                this.props.cardTable.setValByKeyAndIndex(moduleId,index,'pk_respdept1',{value: value.values.pk_dept.value,display: value.values.deptname.values});\r\n            }\r\n            else if(key == 'respperson' && moduleId == 'sale') {\r\n                this.props.cardTable.setValByKeyAndIndex(moduleId,index,'respdept',{value: value.values.pk_dept.value,display: value.values.deptname.values})\r\n            }\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * 返回按钮操作\r\n     */\r\n    onReturnClick(){\r\n        this.props.pushTo(listUrl, {\r\n            pagecode: pagecode_list,\r\n            appcode: appId,\r\n            status: 'browse'\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { cardTable, form, button, modal, cardPagination, BillHeadInfo } = this.props;\r\n        const {createCardPagination} = cardPagination;\r\n        const {createBillHeadInfo} = BillHeadInfo;\r\n        let { createForm } = form;\r\n        let { createCardTable } = cardTable;\r\n        let { createButtonApp,createButton } = button;\r\n        let { createModal } = modal;\r\n        let status = this.props.getUrlParam('status');\r\n\r\n        let iconItem = this.state.showBaseInfo ? 'icon-jiantouxia1' : 'icon-jiantouyou'\r\n\r\n        let groupItem = this.state.showBaseInfo ? \"show-form\" : \"hide-form\"\r\n        return (\r\n            <div className='nc-bill-card'>\r\n                <div className=\"nc-bill-top-area\">\r\n                    <NCAffix>\r\n                        <div className='nc-bill-header-area'>\r\n                            {/* <div>\r\n                                {status=='browse'?<NCBackBtn onClick={ this.onReturnClick.bind(this) }></NCBackBtn>:''}\r\n                            </div> */}\r\n                            <div className='header-title-search-area'>\r\n                                {createBillHeadInfo({\r\n                                        backBtnClick: this.onReturnClick.bind(this)\r\n                                    }\r\n                                )}\r\n                                {/* {createPageIcon ()}  */}\r\n                                <h2 className='title-search-detail'>{this.state.json['10140CUSTPF-000001']/* 国际化处理： 客户申请单*/}{status=='browse'?`：${this.state.title_code}`:''}</h2>\r\n                            </div>\r\n                            <div className=\"header-button-area\">\r\n                                {createButtonApp({\r\n                                area: 'header-button-area',//按钮注册中的按钮区域\r\n                                //buttonLimit: 5,\r\n                                onButtonClick: this.buttonClick.bind(this)\r\n                                //popContainer: document.querySelector('.header-button-area')\r\n                                })}\r\n                                {/*{buttons.map( (v) =>{*/}\r\n                                    {/*return (createButton(v.btncode, {*/}\r\n                                        {/*name: v.btnname,*/}\r\n                                        {/*onButtonClick: this.buttonClick.bind(this),*/}\r\n                                        {/*buttonColor: this.getButtonNames(v.btncode)*/}\r\n                                    {/*}))*/}\r\n                                {/*})}*/}\r\n                                {createCardPagination({\r\n                                    handlePageInfoChange: this.pageInfoClick.bind(this)\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </NCAffix>\r\n                    {/*//子表导航树*/}\r\n                    <NCAnchor>\r\n                        <NCScrollLink\r\n                            to={this.formId}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000000']/* 国际化处理： 客户基本信息*/}</p>\r\n                        </NCScrollLink>\r\n                        <NCScrollLink\r\n                            to={'custapplybanks'}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000003']/* 国际化处理： 客户银行帐号*/}</p>\r\n                        </NCScrollLink>\r\n                        <NCScrollLink\r\n                            to={'custcontacts'}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000005']/* 国际化处理： 客户联系人*/}</p>\r\n                        </NCScrollLink>\r\n                        <NCScrollLink\r\n                            to={'custtaxtypes'}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000004']/* 国际化处理： 客户国家税类*/}</p>\r\n                        </NCScrollLink>\r\n                        <NCScrollLink\r\n                            to={'finance'}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000006']/* 国际化处理： 财务信息*/}</p>\r\n                        </NCScrollLink>\r\n                        <NCScrollLink\r\n                            to={'sale'}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000007']/* 国际化处理： 销售信息*/}</p>\r\n                        </NCScrollLink>\r\n                        <NCScrollLink\r\n                            to={'creditctl'}\r\n                            spy={true}\r\n                            smooth={true}\r\n                            duration={300}\r\n                            offset={-100}\r\n                        >\r\n                            <p>{this.state.json['10140CUSTPF-000008']/* 国际化处理： 信用控制信息*/}</p>\r\n                        </NCScrollLink>\r\n                    </NCAnchor>\r\n                    <NCScrollElement name={this.formId}>\r\n                        <div className=\"nc-bill-form-area\">\r\n                            {createForm(this.formId, {\r\n                                onAfterEvent: this.afterEvent.bind(this)\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n\r\n                    <NCScrollElement name={this.state.json['10140CUSTPF-000000']/* 国际化处理： 客户基本信息*/}>\r\n                        <div className=\"nc-bill-form-area\">\r\n                            <div className='group-form-wrapper'>\r\n                                <div className=\"group-form-name\">\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n                                            className={`toggle-form-icon iconfont ${iconItem}`}\r\n                                            onClick={() => {\r\n                                                let show = !this.state.showBaseInfo\r\n                                                this.setState({\r\n                                                    showBaseInfo: show\r\n                                                });\r\n                                            }}\r\n                                        />\r\n                                    <span className=\"name\">{this.state.json['10140CUSTPF-000000']/* 国际化处理： 客户基本信息*/}</span>\r\n                                </div>\r\n                                <div className={`group-form-item ${groupItem} `}>\r\n                                    {createForm('customer', {\r\n                                        onAfterEvent: this.afterEvent.bind(this)\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </NCScrollElement>\r\n                </div>\r\n                \r\n                <div className=\"nc-bill-bottom-area\">\r\n                    <NCScrollElement name={'custapplybanks'}>\r\n                        <div className=\"nc-bill-table-area\">\r\n                            {createCardTable(\"custapplybanks\", {\r\n\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n                    <NCScrollElement name={'custcontacts'}>\r\n                        <div className=\"nc-bill-table-area\">\r\n                            {createCardTable(\"custcontacts\", {\r\n                                tableHead: this.getTableHead.bind(this,'custcontacts'),\r\n                                onBeforeEvent: this.onLinkmanBeforeEvent.bind(this),\r\n                                //onRowDoubleClick: this.cardTableDoubleClick.bind(this),\r\n                                modelClose: this.linkmanClose.bind(this)\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n                    <NCScrollElement name={'custtaxtypes'}>\r\n                        <div className=\"nc-bill-table-area\">\r\n                            {createCardTable(\"custtaxtypes\", {\r\n                                tableHead: this.getTableHead.bind(this,'custtaxtypes')\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n                    <NCScrollElement name={'finance'}>\r\n                        <div className=\"nc-bill-table-area\">\r\n                            {createCardTable(\"finance\", {\r\n                                tableHead: this.getTableHeadSpe.bind(this,'finance'),\r\n                                // modelSave: this.modelSave.bind(this,'finance')\r\n                                onBeforeEvent: this.resetDeptAndPsnRef.bind(this),\r\n                                onAfterEvent: this.onSpeCardTableAfterEvent.bind(this),\r\n                                hideAdd:true,\r\n                                hideDel:true,\r\n                                hideModelSave:true\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n                    <NCScrollElement name={'sale'}>\r\n                        <div className=\"nc-bill-table-area\">\r\n                            {createCardTable(\"sale\", {\r\n                                tableHead: this.getTableHeadSpe.bind(this,'sale'),\r\n                                onBeforeEvent: this.resetDeptAndPsnRef.bind(this),\r\n                                onAfterEvent: this.onSpeCardTableAfterEvent.bind(this),\r\n                                // modelSave: this.modelSave.bind(this,'sale')\r\n                                hideAdd:true,\r\n                                hideDel:true,\r\n                                hideModelSave:true\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n                    <NCScrollElement name={'creditctl'}>\r\n                        <div className=\"nc-bill-table-area\">\r\n                            {/*{this.getTableHead('creditctl')}*/}\r\n                            {createCardTable(\"creditctl\", {\r\n                                tableHead: this.getTableHeadSpe.bind(this,'creditctl'),\r\n                                // modelSave: this.modelSave.bind(this,'creditctl')\r\n                                hideAdd:true,\r\n                                hideDel:true,\r\n                                hideModelSave:true\r\n                            })}\r\n                        </div>\r\n                    </NCScrollElement>\r\n\r\n                    {createModal('delete', {\r\n                        title: this.state.json['10140CUSTPF-000016'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140CUSTPF-000017'],/* 国际化处理： 确认删除？*/\r\n                        beSureBtnClick: this.delConfirm.bind(this)\r\n                    })}\r\n                    {createBankaccList(Object.assign({json: this.state.json},this.props),this.bankaccConfig)}\r\n                    {createBankaccForm(Object.assign({json: this.state.json},this.props),this.bankaccConfig)}\r\n                    {createModal('linkman',{\r\n                        title: this.state.json['10140CUSTPF-000033'],/* 国际化处理： 联系人*/\r\n                        content: (createForm('Linkman',{\r\n\r\n                        })),\r\n                        beSureBtnClick: this.linkmanSaveClick.bind(this)\r\n                    })}\r\n                </div>\r\n                {/*<BillApprove*/}\r\n                {/*show = {this.state.show}*/}\r\n                {/*close = {this.closeApprove.bind(this)}*/}\r\n                {/*billType = '10GY'*/}\r\n                {/*billid = {this.bankaccConfig.mainPk}*/}\r\n                {/*/>*/}\r\n                <PrintOutput\r\n                    ref='printOutput'\r\n                    url={printUrl}\r\n                    data={{\r\n                        funcode:printFunCode,//功能节点编码\r\n                        nodekey:printNodeKey,//模板节点编码\r\n                        oids : this.state.ids,\r\n                        outputType : 'output'\r\n                    }}\r\n                />\r\n                {/*附件管理*/}\r\n                {this.state.showlogoUploader&&<NCUploader\r\n                    // billId={cacheTools.get('pk_org')}\r\n                    billId={'uapbd/6d6d4a15-d9bb-4b0c-9da3-80760872bf87/'+this.props.getUrlParam('id')}\r\n                        //{'upbd/'+cacheTools.get('orgunit_pk_org')}\r\n                    //billNo={'001'}\r\n                    //target={target}\r\n                    placement={'bottom_right'}\r\n                    multiple={false}\r\n                    // beforeUpload={this.beforeUpload}\r\n                    onHide={this.onHideUploader.bind(this)}\r\n                />}\r\n                {this.state.compositedisplay ? <ApprovalTrans\r\n                    title={this.state.json['10140CUSTPF-000034']}/* 国际化处理： 指派*/\r\n                    data={this.state.compositedata}\r\n                    display={this.state.compositedisplay}\r\n                    getResult={this.getAssginUsedr.bind(this)}\r\n                    cancel={this.turnOff.bind(this)}\r\n                /> : \"\"}\r\n                <ApproveDetail\r\n                    show={this.state.approveDetailShow}\r\n                    close={this.closeApprove.bind(this)}\r\n                    billtype='10KH'\r\n                    billid={this.state.billid}\r\n                />\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nCard = createPage({\r\n    //initTemplate: initTemplate\r\n})(Card);\r\n\r\nexport default Card;\r\n","import { createPage, ajax, base, toast } from 'nc-lightapp-front';\r\nimport List from './bankacc/list'\r\nimport Form from './bankacc/form'\r\nconst { NCAffix,NCPopconfirm,NCFormControl,NCAnchor,NCScrollElement,NCScrollLink } = base;\r\n\r\nconst {createModal} = base\r\n\r\n/**\r\n * config对象结构：\r\n * config : {\r\n *  isList          //判定当前弹出层处于列表态\r\n *  bankaccModalChange    //弹出层导致卡片和列表切换的钩子函数\r\n *  tableId         //弹出层的列表界面的区域编码\r\n *  formId          //弹出层的卡片界面的区域编码\r\n *  cardTableId     //弹出层卡片机界面的子表的区域编码\r\n * }\r\n */\r\nexport function createBankaccList(props,config) {\r\n    let { cardTable, form, button, modal, cardPagination, table } = props;\r\n    let { createForm } = form;\r\n    let { createCardTable } = cardTable;\r\n    let { createButtonApp } = button;\r\n    let { createSimpleTable } = table\r\n    let { createModal } = modal\r\n    let listPage = (<div><List {...props} {...config} /></div>)\r\n    return createModal('bankaccList',{\r\n        content: listPage,\r\n        noFooter: true\r\n    })\r\n}\r\n\r\nexport function createBankaccForm(props,config) {\r\n    let { cardTable, form, button, modal, cardPagination, table } = props;\r\n    let { createModal } = modal\r\n    let formPage = (<div><Form {...props} {...config} /></div>)\r\n    return createModal('bankaccForm',{\r\n        content: formPage,\r\n        size: 'xlg',\r\n        noFooter: true\r\n    })\r\n}\r\n","//主子表列表\r\n\r\nimport React, { Component } from 'react';\r\nimport { createPage, ajax, base ,toast,cardCache} from 'nc-lightapp-front';\r\nconst {NCPopconfirm, NCIcon,NCTabs}=base;\r\nconst NCTabPane=NCTabs.NCTabPane;\r\n\r\nconst queryList = '/nccloud/uapbd/customer/CustAppQueryBankList.do'\r\nconst deleteUrl = '/nccloud/uapbd/customer/CustAppDelBank.do'\r\n\r\nclass List extends Component {\r\n    constructor(props) {    \r\n        super(props);\r\n        this.tableId = props.tableId;\r\n        this.selectedRow = null\r\n        \r\n        //将修改以及删除按钮移到行上\r\n        let meta = this.props.meta.getMeta()\r\n        let hasOprColumn = false\r\n        meta[this.tableId].items.forEach(item => {\r\n            if(item.attrcode == 'opr') {\r\n                hasOprColumn = true\r\n            }\r\n        })\r\n        props.button.setPopContent('BankListDel',this.props.json['10140CUSTPF-000052']) /* 设置操作列上删除按钮的弹窗提示 */\r\n        if(!hasOprColumn) {\r\n            meta[this.tableId].items.push({\r\n                itemtype: \"customer\",\r\n                attrcode: 'opr',\r\n                label: this.props.json['10140SPF-000019'],/* 国际化处理： 操作*/\r\n                fixed: 'right',\r\n                className : 'tab le-opr',\r\n                visible: true,\r\n                render: (text, record, index) => {\r\n        \r\n                    let btnArray = ['BankListEdit','BankListDel']\r\n        \r\n                    return props.button.createOprationButton(\r\n                        btnArray,\r\n                        {\r\n                            area: \"brow-action\",\r\n                            buttonLimit: 3,\r\n                            onButtonClick: (props, id) => {this.tableRowButtonClick(props, id, text, record, index)}\r\n                        }\r\n                    )\r\n                }\r\n            });\r\n            this.props.meta.setMeta(meta)\r\n        }\r\n    }\r\n\r\n    tableRowButtonClick(props, id, text, record, index) {\r\n        switch(id) {\r\n            case 'BankListEdit':\r\n                let info = {\r\n                    isList: true,\r\n                    accnum: record.accnum.value,\r\n                    pk_banktype: record.pk_banktype.value,\r\n                    cardStatus: 'edit'\r\n                }\r\n                if(this.props.bankaccModalChange) {\r\n                    this.props.bankaccModalChange(info)\r\n                }\r\n                break\r\n            case 'BankListDel':\r\n                info = {\r\n                    mainPk: this.props.mainPk,\r\n                    accnum: record.accnum.value,\r\n                    pk_banktype: record.pk_banktype.value\r\n                }\r\n                ajax({\r\n                    url: deleteUrl,\r\n                    data: info,\r\n                    success: res => {\r\n                        this.getData(this.props)\r\n                    }\r\n                })\r\n                break\r\n        }\r\n    }\r\n\r\n    updateButtonStatus() {\r\n        this.props.button.setButtonVisible(['BankAdd','BankRefresh'],true);\r\n        this.props.button.setButtonVisible(['BankEdit','BankDelete','BankCancel','BankSave','BankBack','BankSaveAdd'],false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData(this.props)\r\n        setTimeout(() => this.updateButtonStatus(),1)\r\n    }\r\n\r\n    getData(props) {\r\n        let data = {\r\n            mainPk: props.mainPk\r\n        }\r\n        ajax({\r\n            url: queryList,\r\n            data,\r\n            success: res => {\r\n                //setTimeout(() => props.table.setAllTableData(props.tableId, res.data[props.tableId]),1);\r\n                if(res && res.data && res.data.hasOwnProperty(props.tableId)){\r\n                    props.table.setAllTableData(props.tableId, res.data[props.tableId])\r\n                }\r\n                else{\r\n                    props.table.setAllTableData(props.tableId, {rows:[]})\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    buttonClick(props,id) {\r\n        switch(id) {\r\n            case 'BankAdd':\r\n                let row = this.selectedRow\r\n                let info = {\r\n                    isList: true,\r\n                    cardStatus: 'add'\r\n                }\r\n                if(this.props.bankaccModalChange) {\r\n                    this.props.bankaccModalChange(info)\r\n                }\r\n                break;\r\n            case 'BankEdit':\r\n                row = this.selectedRow\r\n                console.log(row)\r\n                info = {\r\n                    isList: true,\r\n                    accnum: row.accnum.value,\r\n                    pk_banktype: row.pk_banktype.value,\r\n                    cardStatus: 'edit'\r\n                }\r\n                if(this.props.bankaccModalChange) {\r\n                    this.props.bankaccModalChange(info)\r\n                }\r\n                break;\r\n            case 'BankDelete':\r\n                row = this.selectedRow\r\n                info = {\r\n                    mainPk: this.props.mainPk,\r\n                    accnum: row.accnum.value,\r\n                    pk_banktype: row.pk_banktype.value\r\n                }\r\n                ajax({\r\n                    url: deleteUrl,\r\n                    data: info,\r\n                    success: res => {\r\n                        this.getData(this.props)\r\n                    }\r\n                })\r\n                break;\r\n            case 'BankRefresh':\r\n                this.getData(this.props)\r\n                break;\r\n        }\r\n    }\r\n\r\n    doubleClick = (record, index, e)=>{\r\n        let info = {\r\n            isList: true,\r\n            cardStatus: 'browse',\r\n            accnum: record.accnum.value,\r\n            pk_banktype: record.pk_banktype.value\r\n        }\r\n        if(this.props.bankaccModalChange) {\r\n            this.props.bankaccModalChange(info)\r\n        }\r\n    }\r\n\r\n    onRowClick(props,moduleId,record,index) {\r\n        this.selectedRow = record\r\n    }\r\n\r\n    onSelected=()=>{}\r\n\r\n    render() {\r\n        let { table, button, search } = this.props;\r\n        let { createSimpleTable } = table;\r\n        let { createButtonApp,createButton } = button;\r\n        return (<div className=\"nc-bill-list\">\r\n                <div className='nc-bill-header-area'>\r\n                    <div className='header-title-search-area'>\r\n                        <h2 className='title-search-detail'>{this.props.json['10140CUSTPF-000018']/* 国际化处理： 客户银行账户申请*/}</h2></div>\r\n                    <div className=\"header-button-area\">\r\n                        {createButtonApp({\r\n                            area: 'bank-action',\r\n                            buttonLimit: 3,\r\n                            onButtonClick: this.buttonClick.bind(this),\r\n                            popContainer: document.querySelector('.header-button-area')\r\n\r\n                        })}\r\n                        {/*{buttons.map( (v) =>{*/}\r\n                        {/*return (createButton(v.btncode, {*/}\r\n                        {/*name: v.btnname,*/}\r\n                        {/*onButtonClick: this.buttonClick.bind(this)*/}\r\n                        {/*}))*/}\r\n                        {/*})}*/}\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{height:'10px'}}></div>\r\n                <div className=\"nc-bill-table-area\">\r\n                    {createSimpleTable(this.tableId, {\r\n                        //showCheck:true,\r\n                        onRowClick: this.onRowClick.bind(this),\r\n                        onRowDoubleClick: this.doubleClick.bind(this),\r\n                        showIndex: true,\r\n                        onSelected:this.onSelected.bind(this),\r\n                        onSelectedAll:this.onSelected.bind(this)  \r\n                    })}\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default List\r\n","//主子表卡片\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createPage, ajax, base, toast ,promptBox,cardCache} from 'nc-lightapp-front';\r\nconst { NCAffix,NCPopconfirm,NCFormControl, NCBackBtn } = base;\r\n\r\nconst queryCardUrl = '/nccloud/uapbd/customer/CustAppQueryBankCard.do'\r\nconst saveUrl = '/nccloud/uapbd/customer/CustAppSaveBank.do'\r\nconst deleteUrl = '/nccloud/uapbd/customer/CustAppDelBank.do'\r\nconst exFieldUrl = '/nccloud/uapbd/customer/CustApplyExField.do'\r\n\r\nclass Card extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.formId1 = this.props.formId1;\r\n        this.formId2 = this.props.formId2;\r\n        this.tableId = this.props.cardTableId;\r\n        this.cardStatus = this.props.cardStatus\r\n\r\n        //关于过滤当前是哪条银行账户信息的字段\r\n        this.accnum = this.props.accnum\r\n        this.pk_banktype = this.props.pk_banktype\r\n        this.state = {\r\n            pk_org : '',\r\n            title_code : '',\r\n            totalcount : 0,\r\n            applycount : 0,\r\n            showAccbase: true,\r\n            showNetBank: false,\r\n            backVisible: true\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let cardStatus = this.cardStatus\r\n        \r\n        if(cardStatus && cardStatus == 'add') {\r\n            setTimeout(() => this.props.form.EmptyAllFormValue(this.props.formId1),1)\r\n            setTimeout(() => this.props.form.EmptyAllFormValue(this.props.formId2),1)\r\n            setTimeout(() => this.props.cardTable.setTableData(this.props.cardTableId,{rows : []}),1)\r\n            setTimeout(() => this.props.form.setFormStatus(this.props.formId1,'edit'),1)\r\n            setTimeout(() => this.props.form.setFormStatus(this.props.formId2,'edit'),1)\r\n            setTimeout(() => this.props.cardTable.setStatus(this.props.cardTableId,'edit'),1)\r\n\r\n            ajax({\r\n                url: exFieldUrl,\r\n                data: {\r\n                    pk_country: this.props.form.getFormItemsValue('customer','pk_country').value,\r\n                    operation: \"bankinfo\"\r\n                },\r\n                success: (res) => {\r\n                    if(res.data.pk_currtype) {\r\n                        this.props.cardTable.addRow(this.props.cardTableId,0,{pk_currtype: {\r\n                            value: res.data.pk_currtype,\r\n                            display: res.data.currtypename\r\n                        }})\r\n                        let accNameValue = this.props.form.getFormItemsValue('customer','name')\r\n                        this.props.form.setFormItemsValue(this.props.formId1,{accname: {\r\n                            value: accNameValue.name.value,\r\n                            display: accNameValue.name.display\r\n                        }})\r\n                    }\r\n                }\r\n            })\r\n            \r\n        }\r\n        else if(cardStatus && cardStatus == 'edit') {\r\n            this.getData(this.props.mainPk,this.accnum,this.pk_banktype)\r\n            setTimeout(() => this.props.form.setFormStatus(this.props.formId1,'edit'),1)\r\n            setTimeout(() => this.props.form.setFormStatus(this.props.formId2,'edit'),1)\r\n            setTimeout(() => this.props.cardTable.setStatus(this.props.cardTableId,'edit'),1)\r\n        }\r\n        else if(cardStatus && cardStatus == 'browse') {\r\n            this.getData(this.props.mainPk,this.accnum,this.pk_banktype)\r\n        }\r\n        setTimeout(() => this.updateButtonStatus(),1)\r\n    }\r\n\r\n    updateButtonStatus() {\r\n        let cardStatus = this.cardStatus\r\n        if(cardStatus && cardStatus == 'browse') {\r\n\r\n            if(this.accnum && this.pk_banktype){\r\n                this.props.button.setButtonVisible(['BankAdd','BankEdit','BankDelete','BankRefresh','BankDefault'],true);\r\n                this.props.button.setButtonVisible(['BankCancel','BankSave','BankAddLine','BankBack','BankSaveAdd'],false);     \r\n            }\r\n            else{\r\n                this.props.button.setButtonVisible(['BankAdd'],true);\r\n                this.props.button.setButtonVisible(['BankCancel','BankSave','BankAddLine','BankBack','BankSaveAdd','BankEdit','BankDelete','BankRefresh','BankDefault'],false);    \r\n            \r\n            }\r\n\r\n            this.setState({\r\n\t\t\t\tbackVisible: true\r\n\t\t\t})\r\n        }\r\n        else {\r\n            let visibleAction = ['BankCancel','BankSave','BankAddLine']\r\n            let unVisibleAction = ['BankAdd','BankEdit','BankDelete','BankRefresh','BankBack','BankDefault']\r\n            if(this.cardStatus == 'add') {\r\n                visibleAction.push('BankSaveAdd')\r\n            }\r\n            else {\r\n                unVisibleAction.push('BankSaveAdd')\r\n            }\r\n            this.props.button.setButtonVisible(unVisibleAction,false);\r\n            this.props.button.setButtonVisible(visibleAction,true);\r\n            this.setState({\r\n\t\t\t\tbackVisible: false\r\n\t\t\t})\r\n        }\r\n    }\r\n\r\n    getData(mainPk,accnum,pk_banktype) {\r\n        let data = {\r\n            mainPk,\r\n            accnum,\r\n            pk_banktype\r\n        }\r\n\r\n        ajax({\r\n            url: queryCardUrl,\r\n            data,\r\n            success: res => {\r\n                this.props.form.setAllFormValue({[this.props.formId1]: res.data.head.custbank})\r\n                this.props.form.setAllFormValue({[this.props.formId2]: res.data.head.custbank})\r\n                if(res.data.body && res.data.body[this.props.cardTableId])\r\n                    this.props.cardTable.setTableData(this.props.cardTableId,res.data.body[this.props.cardTableId])\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    buttonClick(props,id) {\r\n        switch(id) {\r\n            case 'BankAdd':\r\n                this.props.form.EmptyAllFormValue(this.props.formId1)\r\n                this.props.form.EmptyAllFormValue(this.props.formId2)\r\n                this.props.cardTable.setTableData(this.props.cardTableId,{rows : []})\r\n                setTimeout(() => this.props.form.setFormStatus(this.props.formId1,'edit'),1)\r\n                setTimeout(() => this.props.form.setFormStatus(this.props.formId2,'edit'),1)\r\n                setTimeout(() => this.props.cardTable.setStatus(this.props.cardTableId,'edit'),1)\r\n                this.cardStatus = 'add'\r\n                setTimeout(() => this.updateButtonStatus(),1)\r\n                ajax({\r\n                    url: exFieldUrl,\r\n                    data: {\r\n                        pk_country: this.props.form.getFormItemsValue('customer','pk_country').value,\r\n                        operation: \"bankinfo\"\r\n                    },\r\n                    success: (res) => {\r\n                        if(res.data.pk_currtype) {\r\n                            this.props.cardTable.addRow(this.props.cardTableId,0,{pk_currtype: {\r\n                                value: res.data.pk_currtype,\r\n                                display: res.data.currtypename\r\n                            }})\r\n                            let accNameValue = this.props.form.getFormItemsValue('customer','name')\r\n                            this.props.form.setFormItemsValue(this.props.formId1,{accname: {\r\n                                value: accNameValue.name.value,\r\n                                display: accNameValue.name.display\r\n                            }})\r\n                        }\r\n                    }\r\n                })\r\n                break;\r\n            case 'BankEdit':\r\n                this.props.form.setFormStatus(this.props.formId1,'edit')\r\n                this.props.form.setFormStatus(this.props.formId2,'edit')\r\n                this.props.cardTable.setStatus(this.props.cardTableId,'edit')\r\n                this.cardStatus = 'edit'\r\n                setTimeout(() => this.updateButtonStatus(),1)\r\n                break;\r\n            case 'BankSave':\r\n                let finalData = {\r\n                    isAdd: this.cardStatus == 'add' ? true : false\r\n                }\r\n                if(!this.getValueFromForm(finalData))\r\n                    return;\r\n                finalData.mainPk = this.props.mainPk\r\n                ajax({\r\n                    url: saveUrl,\r\n                    data: finalData,\r\n                    success: res => {\r\n                        this.props.form.setFormStatus(this.props.formId1,'browse')\r\n                        this.props.form.setFormStatus(this.props.formId2,'browse')\r\n                        this.props.cardTable.setStatus(this.props.cardTableId,'browse')\r\n                        this.props.form.setAllFormValue({[this.props.formId1]: res.data.head.custbank})\r\n                        this.props.form.setAllFormValue({[this.props.formId2]: res.data.head.custbank})\r\n                        if(res.data.body && res.data.body[this.props.cardTableId])\r\n                            this.props.cardTable.setTableData(this.props.cardTableId,res.data.body[this.props.cardTableId])\r\n                        //this.getData(this.props.mainPk,this.accnum,this.pk_banktype)\r\n                        this.accnum = res.data.head.custbank.rows[0].values.accnum.value\r\n                        this.pk_banktype = res.data.head.custbank.rows[0].values.pk_banktype.value\r\n                        this.cardStatus = 'browse'\r\n                        this.updateButtonStatus()\r\n                    }\r\n                })\r\n                break;\r\n            case 'BankDelete':\r\n\r\n                promptBox({\r\n                    color:\"warning\",\r\n                    title : this.props.json['10140CUSTPF-000022'],/* 国际化处理： 确认删除*/\r\n                    content : this.props.json['10140CUSTPF-000023'],/* 国际化处理： 是否确认要删除？*/\r\n                    beSureBtnClick : ()=>{\r\n                        let info = {\r\n                            mainPk: this.props.mainPk,\r\n                            accnum: this.accnum,\r\n                            pk_banktype: this.pk_banktype\r\n                        }\r\n                        ajax({\r\n                            url: deleteUrl,\r\n                            data: info,\r\n                            success: res => {\r\n                                info = {\r\n                                    isList: false\r\n                                }\r\n                                if(this.props.bankaccModalChange) {\r\n                                    this.props.bankaccModalChange(info)\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n                break;\r\n            case 'BankCancel':\r\n                promptBox({\r\n                    color:\"warning\",\r\n                    title : this.props.json['10140CUSTPF-000027'],/* 国际化处理： 确认取消*/\r\n                    content : this.props.json['10140CUSTPF-000028'],/* 国际化处理： 是否确认要取消？*/\r\n                    beSureBtnClick : ()=>{\r\n\r\n                        this.props.form.setFormStatus(this.props.formId1,'browse')\r\n                        this.props.form.setFormStatus(this.props.formId2,'browse')\r\n                        this.props.cardTable.setStatus(this.props.cardTableId,'browse')\r\n                        this.props.form.EmptyAllFormValue(this.props.formId1)\r\n                        this.props.cardTable.setTableData(this.props.cardTableId,{rows:[]})\r\n\r\n                        if(this.accnum && this.pk_banktype){\r\n                            this.getData(this.props.mainPk,this.accnum,this.pk_banktype)\r\n                        }\r\n                        else{\r\n                            let listData = this.props.table.getAllTableData(this.props.tableId);\r\n                            if(listData && listData.rows && listData.rows.length>0){\r\n                                this.accnum = listData.rows[0].values.accnum.value;\r\n                                this.pk_banktype = listData.rows[0].values.pk_banktype.value;\r\n                                this.getData(this.props.mainPk,this.accnum,this.pk_banktype)\r\n                            }\r\n                        }\r\n                            \r\n                        this.cardStatus = 'browse'\r\n                        this.updateButtonStatus()\r\n                    }\r\n                })\r\n                break;\r\n            case 'BankAddLine':\r\n                setTimeout(() => this.props.cardTable.addRow(this.props.cardTableId),1)\r\n                break;\r\n            case 'BankBack':\r\n                let info = {\r\n                    isList: false\r\n                }\r\n                if(this.props.bankaccModalChange) {\r\n                    this.props.bankaccModalChange(info)\r\n                }\r\n                break;\r\n            case 'BankDefault':\r\n                let checkedRows = this.props.cardTable.getCheckedRows(this.props.cardTableId);\r\n\r\n                if(!checkedRows || checkedRows.length == 0){\r\n                    toast({content:this.props.json['10140CUSTPF-000009'],color:'danger'})/* 国际化处理： 请选择要设置的默认账户!*/\r\n                }\r\n                else{\r\n                    //参照NC，只对选中的第一行做校验\r\n                    let checkedRow = checkedRows[0];\r\n                    let isdefault = checkedRow.data.values.isdefault.value;\r\n                    if(isdefault && isdefault != null && isdefault == true){\r\n                        toast({content:this.props.json['10140CUSTPF-000010'],color:'danger'})/* 国际化处理： 该子户已经是默认账户*/\r\n                    }\r\n                    else{\r\n                        this.props.modal.show('modal',{\r\n                            title:this.props.json['10140CUSTPF-000011'],/* 国际化处理： 询问*/\r\n                            content:this.props.json['10140CUSTPF-000012'],/* 国际化处理： 请确定要改变默认账户吗？*/\r\n                            beSureBtnClick:this.setBankAccSubDefault.bind(this,checkedRow.index)\r\n                        })\r\n                    }\r\n                }\r\n                break;\r\n            case 'BankSaveAdd':\r\n                finalData = {\r\n                    isAdd: this.props.cardStatus == 'add' ? true : false\r\n                }\r\n                if(!this.getValueFromForm(finalData))\r\n                    return;\r\n                finalData.mainPk = this.props.mainPk\r\n                ajax({\r\n                    url: saveUrl,\r\n                    data: finalData,\r\n                    success: res => {\r\n                        this.props.form.EmptyAllFormValue(this.props.formId1)\r\n                        this.props.form.EmptyAllFormValue(this.props.formId2)\r\n                        this.props.cardTable.setTableData(this.props.cardTableId,{rows : []})\r\n                        setTimeout(() => this.props.form.setFormStatus(this.props.formId1,'edit'),1)\r\n                        setTimeout(() => this.props.form.setFormStatus(this.props.formId2,'edit'),1)\r\n                        setTimeout(() => this.props.cardTable.setStatus(this.props.cardTableId,'edit'),1)\r\n                        this.cardStatus = 'add'\r\n                        setTimeout(() => this.updateButtonStatus(),1)\r\n                        ajax({\r\n                            url: exFieldUrl,\r\n                            data: {\r\n                                pk_country: this.props.form.getFormItemsValue('customer','pk_country').value,\r\n                                operation: \"bankinfo\"\r\n                            },\r\n                            success: (res) => {\r\n                                if(res.data.pk_currtype) {\r\n                                    this.props.cardTable.addRow(this.props.cardTableId,0,{pk_currtype: {\r\n                                        value: res.data.pk_currtype,\r\n                                        display: res.data.currtypename\r\n                                    }})\r\n                                    let accNameValue = this.props.form.getFormItemsValue('customer','name')\r\n                                    this.props.form.setFormItemsValue(this.props.formId1,{accname: {\r\n                                        value: accNameValue.name.value,\r\n                                        display: accNameValue.name.display\r\n                                    }})\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n                break\r\n            default:\r\n                console.log(id,index);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onAfterEvent(props, moduleId, key, value, oldValue) {\r\n\t\tif(oldValue == null || oldValue.value == null || (oldValue.value && value.value != oldValue.value)) {\r\n\t\t\tif(key == 'pk_banktype') {\r\n\t\t\t\tlet meta = props.meta.getMeta()\r\n\t\t\t\tlet targetItem = meta.accbasinfo.items.find((item) => item.attrcode == 'pk_bankdoc')\r\n\t\t\t\ttargetItem.queryCondition = () => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tpk_banktype: value.value\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tprops.meta.setMeta(meta)\r\n\t\t\t}\r\n\t\t\telse if(key == 'pk_bankdoc') {\r\n\t\t\t\tif(value && value.value) {\r\n\t\t\t\t\tajax({\r\n\t\t\t\t\t\turl: exFieldUrl,\r\n\t\t\t\t\t\tdata: {operation: 'bankdoc', primaryKey: value.value},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif(res.data) {\r\n\t\t\t\t\t\t\t\tlet setObj = {\r\n\t\t\t\t\t\t\t\t\tpk_banktype: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: res.data.value,\r\n\t\t\t\t\t\t\t\t\t\tdisplay: res.data.display\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.props.form.setFormItemsValue(this.formId1, setObj)\r\n\t\t\t\t\t\t\t\tthis.props.form.setFormItemsDisabled(this.formId1,{pk_banktype: true})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.props.form.setFormItemsDisabled(this.formId1,{pk_banktype: false})\r\n\t\t\t\t\tthis.props.form.setFormItemsValue(this.formId1, {pk_banktype: {value: null, display: null}})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n    //默认币种设置\r\n    setBankAccSubDefault=(index)=>{\r\n        let finalData = {\r\n            isAdd: false\r\n        }\r\n        this.getValueFromForm(finalData)\r\n        finalData.mainPk = this.props.mainPk\r\n        \r\n        let rows = finalData.cardTable.model.rows;\r\n\r\n        rows.forEach(row => {\r\n           row.values.isdefault.value= false;\r\n        });\r\n                \r\n        rows[index].values.isdefault.value= true;\r\n\r\n        ajax({\r\n            url: saveUrl,\r\n            data: finalData,\r\n            success: res => {\r\n\r\n                this.props.cardTable.setStatus(this.props.cardTableId,'browse')\r\n                this.props.form.setAllFormValue({[this.props.formId1]: res.data.head.custbank})\r\n                this.props.form.setAllFormValue({[this.props.formId2]: res.data.head.custbank})\r\n                if(res.data.body && res.data.body[this.props.cardTableId])\r\n                    this.props.cardTable.setTableData(this.props.cardTableId,res.data.body[this.props.cardTableId])\r\n                //this.getData(this.props.mainPk,this.accnum,this.pk_banktype)\r\n                this.accnum = res.data.head.custbank.rows[0].values.accnum.value\r\n                this.pk_banktype = res.data.head.custbank.rows[0].values.pk_banktype.value\r\n                this.cardStatus = 'browse'\r\n                this.updateButtonStatus()\r\n            }\r\n        })\r\n    }\r\n\r\n    getValueFromForm(finalData) {\r\n        if(!this.props.form.isCheckNow([this.props.formId1,this.props.formId2]))\r\n            return false;\r\n        let formValue1 = this.props.form.getAllFormValue(this.props.formId1)\r\n        let formValue2 = this.props.form.getAllFormValue(this.props.formId2)\r\n        delete formValue1.rows[0].values.bankaccsub\r\n        delete formValue2.rows[0].values.bankaccsub\r\n        finalData.form1 = {model: formValue1}\r\n        finalData.form2 = {model: formValue2}\r\n        finalData.cardTable = {\r\n            model: {\r\n                rows: this.props.cardTable.getVisibleRows(this.props.cardTableId)\r\n            }\r\n        }\r\n\r\n        let currTypeInfo = this.props.cardTable.getAllRows(this.props.cardTableId)\r\n\r\n        if(currTypeInfo == null || currTypeInfo.length == 0) {\r\n\t\t\ttoast({color: 'danger',content: this.props.json['10140CUSTPF-000013']})/* 国际化处理： 客户银行账户必须设置一个币种！*/\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn true\r\n\t\t}\r\n    }\r\n\r\n    //删除单据\r\n    delConfirm = () => {\r\n        ajax({\r\n            url: deleteUrl,\r\n            data: {\r\n                deleteinfo: [\r\n                    {\r\n                        id: this.props.getUrlParam('id'),\r\n                        ts: this.props.form.getFormItemsValue(this.formId, 'ts').value\r\n                    }\r\n                ]\r\n            },\r\n            success: (res) => {\r\n                if(res){\r\n                    this.props.linkTo('../list/index.html');\r\n                }\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n    //获取列表肩部信息\r\n\tgetTableHead = () => {\r\n\t\tlet {button} = this.props;\r\n\t\tlet { createButtonApp } = button;\r\n        return (\r\n\t\t\t<div className=\"shoulder-definition-area\">\r\n\t\t\t\t<div className=\"definition-icons\">\r\n\t\t\t\t\t{createButtonApp({\r\n\t\t\t\t\t\tarea: 'bank-body',//按钮注册中的按钮区域\r\n\t\t\t\t\t\tonButtonClick: this.buttonClick.bind(this)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{this.props.cardTable.createBrowseIcons(this.tableId, {\r\n\t\t\t\t\t\ticonArr: ['close', 'open', 'max','setCol'],\r\n\t\t\t\t\t\tmaxDestAreaId: 'nc-bill-card'\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\t\r\n\t\t\t</div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        let { cardTable, form, button, modal, cardPagination } = this.props;\r\n        const {createCardPagination} = cardPagination;\r\n        let { createForm } = form;\r\n        let { createCardTable } = cardTable;\r\n        let { createButtonApp,createButton} = button;\r\n        let { createModal } = modal;\r\n        let iconItem = this.state.showAccbase ? 'icon-jiantouxia1' : 'icon-jiantouyou'\r\n\r\n        let groupItem = this.state.showAccbase ? \"show-form\" : \"hide-form\"\r\n\r\n        let iconItem2 = this.state.showNetBank ? 'icon-jiantouxia1' : 'icon-jiantouyou'\r\n        let groupItem2 = this.state.showNetBank ? \"show-form\" : \"hide-form\"\r\n        return (\r\n            <div  id='nc-bill-card'>\r\n                <div className=\"nc-bill-card\">\r\n                    <NCAffix>\r\n                        <div className='nc-bill-header-area'>\r\n                            <NCBackBtn className='title-search-detail' style={{'line-height':'32px',display: this.state.backVisible ? 'inline' : 'none'}}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={ this.buttonClick.bind(this,this.props,'BankBack') }></NCBackBtn>\r\n                            <div className=\"header-button-area\">\r\n                                {createButtonApp({\r\n                                    area: 'bank-action',//按钮注册中的按钮区域\r\n                                    //buttonLimit: 5,\r\n                                    onButtonClick: this.buttonClick.bind(this)\r\n                                    //popContainer: document.querySelector('.header-button-area')\r\n                                })}\r\n                                {/*{buttons.map( (v) =>{*/}\r\n                                {/*return (createButton(v.btncode, {*/}\r\n                                {/*name: v.btnname,*/}\r\n                                {/*onButtonClick: this.buttonClick.bind(this)*/}\r\n                                {/*}))*/}\r\n                                {/*})}*/}\r\n                            </div>\r\n                        </div>\r\n                    </NCAffix>\r\n                    <div className=\"nc-bill-form-area\">\r\n                        <div className='group-form-wrapper'>\r\n                            <div className=\"group-form-name\">\r\n\t\t\t\t\t\t\t\t\t<span\r\n                                        className={`toggle-form-icon iconfont ${iconItem}`}\r\n                                        onClick={() => {\r\n                                            let show = !this.state.showAccbase\r\n                                            this.setState({\r\n                                                showAccbase: show\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                <span className=\"name\">{this.props.json['10140CUSTPF-000014']/* 国际化处理： 账户基本信息*/}</span>\r\n                            </div>\r\n                            <div className={`group-form-item ${groupItem} `}>\r\n                                {createForm(this.props.formId1, {\r\n\t\t\t\t\t\t\t\t\t\tonAfterEvent: this.onAfterEvent.bind(this)\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                        <div className='group-form-wrapper'>\r\n                            <div className=\"group-form-name\">\r\n\t\t\t\t\t\t\t\t\t<span\r\n                                        className={`toggle-form-icon iconfont ${iconItem2}`}\r\n                                        onClick={() => {\r\n                                            let show = !this.state.showNetBank\r\n                                            this.setState({\r\n                                                showNetBank: show\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                <span className=\"name\">{this.props.json['10140CUSTPF-000015']/* 国际化处理： 网银信息*/}</span>\r\n                            </div>\r\n                            <div className={`group-form-item ${groupItem2} `}>\r\n                                {createForm(this.props.formId2, {\r\n\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"nc-bill-table-area\">\r\n                        {createCardTable(this.tableId, {\r\n\t\t\t\t\t\t\ttableHead: this.getTableHead.bind(this),                            \r\n                            showIndex:true,\r\n                            showCheck: true\r\n                        })}\r\n                    </div>\r\n                    {createModal('delete', {\r\n                        title: this.props.json['10140CUSTPF-000016'],/* 国际化处理： 注意*/\r\n                        content: this.props.json['10140CUSTPF-000017'],/* 国际化处理： 确认删除？*/\r\n                        beSureBtnClick: this.delConfirm.bind(this)\r\n                    })}\r\n                    {createModal('modal',{})}\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default Card\r\n"],"sourceRoot":""}