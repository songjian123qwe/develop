{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"nc-lightapp-front\"","webpack://[name]/external {\"root\":\"React\",\"var\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://[name]/external {\"root\":\"ReactDOM\",\"var\":\"ReactDOM\",\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://[name]/./src/uapbd/public/utils/BDCreateUIDom.js","webpack://[name]/./src/uapbd/busiinfo/stordoc/list/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__125__","__WEBPACK_EXTERNAL_MODULE__128__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","props","pageCfg","arguments","length","undefined","langCfg","callback","count","result","hander","templateData","langData","inlt","console","log","newLangCfg","data","success","_ncLightappFront","toast","content","color","MultiInit","getMultiLang","createUIDom","_react","setDefData","cardCache","NCPopconfirm","getDefData","base","NCTabs","NCIcon","NCCheckbox","PrintOutput","NCTabPane","high","urls","templateElements","dataSource","totalPks","List","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","_initialiseProps","state","pks","isShowOff","json","enableNumber","disableNumber","initTemplate","Component","_this2","_BDCreateUIDom2","default","pagecode","domainName","template","meta","modifierMeta","setMeta","button","setButtonDisabled","deleteAction","disableAction","enableAction","searchVal","cacheTools","search","setSearchValue","queryInfo","getQueryInfo","pageInfo","table","getTablePageInfo","querycondition","queryAreaCode","oid","querytype","custcondition","conditions","field","oprtype","firstvalue","logic","ajax","url","res","formulamsg","Array","dealFormulamsg","stordoc","allpks","setAllTableData","tableId","rows","error","message","setButtons","_this3","items","map","item","col","pkOrgCond","find","attrcode","isMultiSelectedEnabled","isShowDisabledData","queryCondition","GridRefActionExt","pagination","width","render","text","record","index","_react2","createElement","style","cursor","onClick","searchValues","getAllSearchData","set","pushTo","status","id","org","push","label","fixed","className","visible","itemtype","cpk_org","pk_stordocs","loading","pk_org","mdOperateCode","trigger","placement","onClose","pk_stordoc","ts","deleteCacheId","title","deleteTableRowsByIndex","initButtonStatus","buttonStatus","_this4","remove","checkedRows","getCheckedRows","pushToParam","values","getUrlParam","refreshAction","promptBox","noFooter","noCancelBtn","beSureBtnName","cancelBtnName","beSureBtnClick","size","allData","getAllTableData","print","funcode","nodekey","oids","outputType","setState","refs","printOutput","open","_this5","allRows","selectedRowRecord","Copy","Print","Output","forEach","row","enablestate","cacheQueryCondition","isShowWarning","updateButtonStatus","val","_this6","_props","createModal","modal","buttons","getButtons","sort","a","b","btnorder","createSimpleTable","NCCreateSearch","createButtonApp","onChange","onShowDisable","checked","area","buttonLimit","onButtonClick","buttonClick","popContainer","document","querySelector","clickSearchBtn","pkname","handlePageInfoChange","pageInfoClick","tableModelConfirm","showIndex","onRowClick","showCheck","onRowDoubleClick","doubleClick","onSelected","onSelectedChange","onSelectedAll","ref","getButtonNames","codeId","curSels","_this7","curTableData","curFilterValues","Map","element","ipk","ind","selectAllRows","e","splice","getQueryData","config","pageid","createPage","billinfo","billtype","bodycode"],"mappings":"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","file":"uapbd/busiinfo/stordoc/list/index.0034b335.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"nc-lightapp-front\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"nc-lightapp-front\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"uapbd/busiinfo/stordoc/list/index\"] = factory(require(\"nc-lightapp-front\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"uapbd/busiinfo/stordoc/list/index\"] = factory(root[\"nc-lightapp-front\"], root[\"React\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__125__, __WEBPACK_EXTERNAL_MODULE__128__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../../../../\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 162);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__125__;","module.exports = __WEBPACK_EXTERNAL_MODULE__128__;","//   pagecode:props.config.pageCode?props.config.pageCode:pagecode\r\n//  getMultiLang({moduleId: \"10140ADRB\",domainName: 'uapbd',callback})\r\n\r\n\r\nimport { toast} from 'nc-lightapp-front';\r\nexport default function(props){\r\n     return ( pageCfg = {} , langCfg = {}, callback ) => {\r\n\r\n         var count = 0;\r\n         var result = {};\r\n\r\n         var hander = () => {\r\n             if(count == 2){\r\n                 callback && callback(result.templateData || {} , result.langData || {},result.inlt||{});\r\n             }\r\n         }\r\n         if(langCfg.callback){\r\n             console.log('咱们自己createUIDom会同时获取多语和单据模板,并通过一个回调函数返回, langCfg中的回调函数将被忽略');\r\n         }\r\n\r\n         var newLangCfg = { ...langCfg, callback: (data, success,inlt) => {\r\n                    count = count + 1;\r\n                 if(!success){\r\n                     toast({content:'load muti lang error',color:'warning'});\r\n                 }\r\n                 result.langData = data || {};\r\n                 result.inlt = inlt || {};\r\n                 hander();\r\n         }};\r\n         props.MultiInit.getMultiLang(newLangCfg);\r\n\r\n         props.createUIDom(pageCfg, (data) => {\r\n             count = count + 1;\r\n             result.templateData = data || {};\r\n             hander();\r\n         });\r\n    };\r\n};","//主子表列表\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createPage, ajax, base ,toast, cacheTools, print, high, promptBox ,cardCache} from 'nc-lightapp-front';\r\nimport { ENGINE_METHOD_PKEY_ASN1_METHS } from 'constants';\r\nimport createUIDom from '../../../public/utils/BDCreateUIDom';\r\nlet {setDefData,getDefData} = cardCache;\r\nconst {NCPopconfirm, NCIcon,NCTabs,NCCheckbox}=base;\r\nconst NCTabPane=NCTabs.NCTabPane;\r\nconst {PrintOutput} = high\r\n/****************默认参数  开始***********************/\r\nlet urls={\r\n\tqueryTemplateUrl:'/nccloud/platform/templet/querypage.do',\r\n\taddUrl:'',\r\n\tlistDelUrl:'/nccloud/uapbd/stordoc/StordocListDelete.do',\r\n\tqueryListUrl:'/nccloud/uapbd/stordoc/StordocListQuery.do',\r\n\tsaveUrl:'',\r\n\tlistEnableUrl:'/nccloud/uapbd/stordoc/StordocListEnable.do',\r\n\tlistDisableUrl:'/nccloud/uapbd/stordoc/StordocListDisable.do',\r\n\tqueryPageUrl:'/nccloud/uapbd/stordoc/StordocQueryPageGridByPks.do',\r\n\tprintUrl: '/nccloud/uapbd/stordoc/printStordoc.do',\r\n\tcheckModelUrl:'/nccloud/uapbd/stordoc/StordocCheckDataModel.do',//这个用来检查数据权限\r\n};\r\n\r\nlet templateElements={\r\n\tpageId:'10140WARH_list',\r\n\tsearchId:'search',\r\n\ttableId:'stordoc',\r\n\toId:'1009Z0100000000020LD',\r\n\tappid:'0001Z010000000000LN4',//按钮注册中的关联appid\r\n\tlinkItem:'code',//仓库编码\r\n\tpk_item:'pk_stordoc',\r\n\tpk_org:'pk_org',\r\n};\r\n\r\n\r\nlet dataSource = 'upabd.busiinfo.stordoc.data'\r\n\r\n/***************默认参数  结束********************/\r\n\r\nlet totalPks = [];//用来装载本地页面的pks\r\n\r\n\r\n\r\nclass List extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpks: [],\r\n\t\t\tisShowOff: false,\r\n\t\t\tjson:{},\r\n\t\t\tinlt:null,\r\n\t\t}\r\n\r\n\t\tthis.enableNumber = 0\r\n\t\tthis.disableNumber = 0\r\n\t\tthis.initTemplate(this.props);\r\n\t}\r\n\r\n/*单据模板修改部分*/\r\ninitTemplate(props) {\r\n\r\n\r\n\tcreateUIDom(props)(\r\n\t\t{\r\n\t\t\tpagecode: templateElements.pageId//页面id\r\n\t\t\t//appid: templateElements.appid,//注册按钮的id\r\n\t\t},\r\n        {\r\n            moduleId: \"10140WARH\",domainName: 'uapbd'\r\n        },     \t\t\r\n\t\t(data,langData,inlt)=>{\r\n            if(langData){\r\n                this.state.json = langData\r\n                if(inlt){\r\n                    this.state.inlt = inlt\r\n                }\r\n            }\r\n\r\n\t\t\tif (data) {\r\n\t\t\t\tif (data.template) {\r\n\t\t\t\t\tlet meta = data.template;\r\n\t\t\t\t\tmeta = this.modifierMeta(props, meta)\r\n\t\t\t\t\tprops.meta.setMeta(meta,() => {\r\n\t\t\t\t\t\tprops.button.setButtonDisabled({deleteAction: true,disableAction: true,enableAction: true})\r\n\t\t\t\t\t\t//props.button.setButtonDisabled(['deleteAction','disableAction','enableAction'],true)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet searchVal = cacheTools.get(\"searchParams\");\r\n\t\t\t\t\tconsole.log(searchVal);\r\n\t\t\t\t\tif(searchVal && searchVal != false){\r\n\t\t\t\t\t\tprops.search.setSearchValue(templateElements.searchId,searchVal);\r\n\t\t\t\t\t\tlet queryInfo = props.search.getQueryInfo('search',false)\r\n\t\t\t\t\t\tif(queryInfo) {\r\n\t\t\t\t\t\t\tlet pageInfo = props.table.getTablePageInfo(templateElements.tableId)\r\n\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\tquerycondition:searchVal,\r\n\t\t\t\t\t\t\t\tpagecode:templateElements.pageId,\r\n\t\t\t\t\t\t\t\tqueryAreaCode:templateElements.searchId,\r\n\t\t\t\t\t\t\t\toid: queryInfo.oid , \r\n\t\t\t\t\t\t\t\tpageInfo: pageInfo,\r\n\t\t\t\t\t\t\t\tquerytype:'tree',\r\n\t\t\t\t\t\t\t\tcustcondition:{\r\n\t\t\t\t\t\t\t\t\tconditions:[{field:'showDisable',oprtype:'like',value:{firstvalue:false}}],\r\n\t\t\t\t\t\t\t\t\tlogic:\"and\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tajax({\r\n\t\t\t\t\t\t\t\turl: urls.queryListUrl,\r\n\t\t\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tthis.props.dealFormulamsg(res.formulamsg,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"stordoc\":\"table\",\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\tif(res.data){\r\n\t\t\t\t\t\t\t\t\t\ttotalPks = res.data[templateElements.tableId].allpks\r\n\t\t\t\t\t\t\t\t\t\tprops.table.setAllTableData(templateElements.tableId, res.data[templateElements.tableId]);\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tlet tableData = {\r\n\t\t\t\t\t\t\t\t\t\t\tallpks: [],\r\n\t\t\t\t\t\t\t\t\t\t\trows: []\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\ttotalPks = []\r\n\t\t\t\t\t\t\t\t\t\tprops.table.setAllTableData(tableId, tableData);\r\n\t\t\t\t\t\t\t\t\t\t//toast({content:languageRes.noData,color:\"warning\"});\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tprops.button.setButtonDisabled(['deleteAction','enableAction','disableAction','Print','Output'], true)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\terror : (res)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(res.message);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tlet tableData = {\r\n\t\t\t\t\t\t\tallpks: [],\r\n\t\t\t\t\t\t\trows: []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttotalPks = []\r\n\t\t\t\t\t\tprops.table.setAllTableData(templateElements.tableId, tableData);\r\n\t\t\t\t\t\t//toast({content:languageRes.noData,color:\"warning\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (data.button) {\r\n\t\t\t\t\tlet button = data.button;\r\n\t\t\t\t\tprops.button.setButtons(button);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n}\r\n\r\nmodifierMeta(props, meta) {\r\n\tmeta[templateElements.searchId].items = meta[templateElements.searchId].items.map((item, key) => {\r\n\t\titem.col = '3';\r\n\t\treturn item;\r\n\t})\r\n\r\n\t//查询区的库存组织增加主组织过滤权限以及多选\r\n\tlet pkOrgCond = meta[templateElements.searchId].items.find(item => item.attrcode == 'pk_org')\r\n\tpkOrgCond.isMultiSelectedEnabled = true\r\n\tpkOrgCond.isShowDisabledData = true;\r\n\tpkOrgCond.queryCondition = () => {\r\n\t\treturn {\r\n\t\t\tGridRefActionExt: \"nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder\",\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tmeta[templateElements.tableId].pagination = true;\r\n\tmeta[templateElements.tableId].items = meta[templateElements.tableId].items.map((item, key) => {\r\n\t\titem.width = 150;\r\n\t\tif (item.attrcode == templateElements.linkItem) {\r\n\t\t\titem.render = (text, record, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{color: '#007ace', cursor: 'pointer' }}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tlet searchValues = props.search.getAllSearchData('search',false) || {};\r\n\t\t\t\t\t\t\tcacheTools.set(\"searchParams\",searchValues);\r\n\r\n\t\t\t\t\t\t\t//设置缓存值\r\n\t\t\t\t\t\t\tcacheTools.set('preid',record[templateElements.pk_item].value);\r\n\t\t\t\t\t\t\tprops.pushTo('/card', {\r\n\t\t\t\t\t\t\t\tstatus: 'browse',\r\n\t\t\t\t\t\t\t\tid: record[templateElements.pk_item].value,//列表卡片传参\r\n\t\t\t\t\t\t\t\torg:record[templateElements.pk_org].value,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{record && record[templateElements.linkItem] && record[templateElements.linkItem].value}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn item;\r\n\t});\r\n\t//添加操作列\r\n\tmeta[templateElements.tableId].items.push({\r\n\t\tattrcode: 'opr',\r\n\t\tlabel: this.state.json['10140WARH-000000'],/* 国际化处理： 操作*/\r\n\t\twidth: 200,\r\n\t\tfixed: 'right',\r\n\t\tclassName : 'table-opr',\r\n\t\tvisible: true,\r\n\t\titemtype:\"customer\",\r\n\t\trender: (text, record, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{cursor: 'pointer' }}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t//在这里加载一下数据权限的校验类；\r\n\t\t\t\t\t\t\tlet cpk_org = record[templateElements.pk_org].value;\r\n\t\t\t\t\t\t\tlet pk_stordocs =[];\r\n\t\t\t\t\t\t\tpk_stordocs.push(record[templateElements.pk_item].value);\r\n\t\t\t\t\t\t\tajax({\r\n\t\t\t\t\t\t\t\tloading: true,\r\n\t\t\t\t\t\t\t\turl: urls.checkModelUrl,\r\n\t\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\t\t\"pk_org\":cpk_org,\r\n\t\t\t\t\t\t\t\t\t\"pk_stordocs\":pk_stordocs,\r\n\t\t\t\t\t\t\t\t\tmdOperateCode:'edit',//增加一个修改参数，用来标志数据权限；\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif(res.success && res.data){//如果有修改权限才跳转到卡片页面\r\n\t\t\t\t\t\t\t\t\t\tprops.pushTo('/card', {\r\n\t\t\t\t\t\t\t\t\t\t\tstatus: 'edit',\r\n\t\t\t\t\t\t\t\t\t\t\tid: record[templateElements.pk_item].value,\r\n\t\t\t\t\t\t\t\t\t\t\torg:record[templateElements.pk_org].value,\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//===============================\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.json['10140WARH-000026']}{/* 国际化处理： 修改*/}\r\n\t\t\t\t\t</span><span>&nbsp; &nbsp;</span>\r\n\t\t\t\t\t<NCPopconfirm\r\n\t\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\tcontent={this.state.json['10140WARH-000006']}/* 国际化处理： 确定删除？*/\r\n\t\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\t\tajax({\r\n\t\t\t\t\t\t\t\turl: urls.listDelUrl,\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tpk_org: record.pk_org.value,\r\n\t\t\t\t\t\t\t\t\tpk_stordocs: [record.pk_stordoc.value],\r\n\t\t\t\t\t\t\t\t\tts: record.ts.value,\r\n\t\t\t\t\t\t\t\t\tmdOperateCode:'delete',//增加一个参数，用来标志数据权限；\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\t\t\t\t\t//列表态删除时调用一下平台方法更新缓存\r\n\t\t\t\t\t\t\t\t\t\tlet {deleteCacheId} = props.table\r\n\t\t\t\t\t\t\t\t\t\tdeleteCacheId(templateElements.tableId, record.pk_stordoc.value)\r\n\r\n\t\t\t\t\t\t\t\t\t\ttoast({ color: 'success', title: this.state.json['10140WARH-000027'] });/* 国际化处理： 删除成功！*/\r\n\t\t\t\t\t\t\t\t\t\tprops.table.deleteTableRowsByIndex(templateElements.tableId, index);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span style={{cursor: 'pointer' }}>{this.state.json['10140WARH-000002']}</span>{/* 国际化处理： 删除*/}\r\n\t\t\t\t\t</NCPopconfirm>\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\treturn meta;\r\n}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t//this.getData(); 平台考虑效率，打开节点不直接加载数据\r\n\t\tthis.initButtonStatus();//added by liusenc 20180927\r\n\t}\r\n\tinitButtonStatus(){\r\n\t\tlet buttonStatus = {};\r\n\t\tbuttonStatus.Print = true;\r\n\t\tbuttonStatus.Output = true;//默认进入系统打印按钮不可用\r\n\t\tbuttonStatus.Copy = true;//默认进入系统不可用赋值按钮\r\n\t\tthis.props.button.setButtonDisabled(buttonStatus)\r\n\t}\r\n\r\n\tgetButtonNames = (codeId) => {\r\n\t\tif (codeId === 'edit'||codeId === 'add'||codeId === 'save'){\r\n\t\t\treturn 'main-button'\r\n\t\t}else {\r\n\t\t\treturn 'secondary - button'\r\n\t\t}\r\n\t};\r\n\r\n    buttonClick(props, id) {\r\n        switch (id) {\r\n\t\t\tcase 'addAction':\r\n\t\t\tsetDefData('cpk_stordoc',dataSource,'add');\r\n                props.pushTo('/card',{\r\n                    status:'add'\r\n                })\r\n                cacheTools.remove('preid');\r\n                \r\n                break;\r\n\t\t\tcase 'Edit':\r\n\t\t\t\tlet checkedRows = props.table.getCheckedRows(templateElements.tableId)\r\n\t\t\t\tlet pushToParam = {\r\n\t\t\t\t\tid: checkedRows[0].data.values[templateElements.pk_item].value,\r\n\t\t\t\t\torg: checkedRows[0].data.values[templateElements.pk_org].value\r\n\t\t\t\t}\r\n\r\n\t\t\t\tajax({\r\n\t\t\t\t\tloading: true,\r\n\t\t\t\t\turl: urls.checkModelUrl,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\"pk_org\":pushToParam.org,\r\n\t\t\t\t\t\t\"pk_stordocs\":[pushToParam.id],\r\n\t\t\t\t\t\tmdOperateCode:'edit',//增加一个修改参数，用来标志数据权限；\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif(res.success && res.data){//如果有修改权限才跳转到卡片页面\r\n\t\t\t\t\t\t\tthis.props.pushTo('/card', {\r\n\t\t\t\t\t\t\t\tstatus: 'edit',\r\n\t\t\t\t\t\t\t\tid: this.props.getUrlParam('id'),\r\n\t\t\t\t\t\t\t\torg:this.props.getUrlParam('org'),\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n                break;\t\r\n            case 'Refresh':\r\n                this.refreshAction(props);\r\n                break;\r\n\t\t\tcase 'deleteAction':\r\n\t\t\t\tpromptBox({\r\n\t\t\t\t\tcolor: 'warning',               // 提示类别默认\"success\"， \"success\"/\"info\"/\"warning\"/\"danger\",非必输\r\n\t\t\t\t\ttitle: this.state.json['10140WARH-000005'],                // 提示标题, 默认不同类别下分别为：\"已成功\"/\"帮助信息\"/\"请注意\"/\"出错啦\",非必输/* 国际化处理： 注意*/\r\n\t\t\t\t\tcontent: this.state.json['10140WARH-000028'],             // 提示内容,非必输/* 国际化处理： 确认删除？*/\r\n\t\t\t\t\tnoFooter: false,                // 是否显示底部按钮(确定、取消),默认显示(false),非必输\r\n\t\t\t\t\tnoCancelBtn: false,             // 是否显示取消按钮,，默认显示(false),非必输\r\n\t\t\t\t\tbeSureBtnName: this.state.json['10140WARH-000029'],          // 确定按钮名称, 默认为\"确定\",非必输/* 国际化处理： 确定*/\r\n\t\t\t\t\tcancelBtnName: this.state.json['10140WARH-000030'],           // 取消按钮名称, 默认为\"取消\",非必输/* 国际化处理： 取消*/\r\n\t\t\t\t\tbeSureBtnClick: this.deleteAction.bind(this)   // 确定按钮点击调用函数,非必输\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'enableAction':\r\n\t\t\t\t//this.props.modal.show('enable')\r\n\t\t\t\tpromptBox({\r\n\t\t\t\t\tcolor:\"warning\",\r\n\t\t\t\t\ttitle:this.state.json['10140WARH-000010'],/* 国际化处理： 提示*/\r\n\t\t\t\t\tsize:'lg',\r\n\t\t\t\t\tcontent:  this.state.json['10140WARH-000011'],/* 国际化处理： 确认是否启用数据*/\r\n\t\t\t\t\tbeSureBtnClick: this.enableAction.bind(this)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'disableAction':\r\n\t\t\t\t//this.props.modal.show('disable')\r\n\t\t\t\tpromptBox({\r\n\t\t\t\t\tcolor:\"warning\",\r\n\t\t\t\t\ttitle:this.state.json['10140WARH-000010'],/* 国际化处理： 提示*/\r\n\t\t\t\t\tsize:'lg',\r\n\t\t\t\t\tcontent:  this.state.json['10140WARH-000012'],/* 国际化处理： 确认是否停用数据*/\r\n\t\t\t\t\tbeSureBtnClick: this.disableAction.bind(this)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Print':\r\n\t\t\t\tlet allData = this.props.table.getAllTableData(templateElements.tableId)\r\n\t\t\t\tprint(\r\n\t\t\t\t\t'pdf',\r\n\t\t\t\t\turls.printUrl,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfuncode:/*this.props.config.funcode*/'10140WARH',     //功能节点编码\r\n\t\t\t\t\t\tnodekey:'list',     //模板节点标识\r\n\t\t\t\t\t\toids:allData.allpks,\r\n\t\t\t\t\t\toutputType:'print'\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Output':\r\n\t\t\t\tallData = this.props.table.getAllTableData(templateElements.tableId)\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpks: allData.allpks\r\n\t\t\t\t},() => {\r\n\t\t\t\t\tthis.refs.printOutput.open()\r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Copy':\r\n\t\t\t\t//let record = this.selectedRowRecord\r\n\t\t\t\tlet record  = props.table.getCheckedRows(templateElements.tableId)\r\n\t\t\t\tif(!record) {\r\n\t\t\t\t\ttoast({content:this.state.json['10140WARH-000031'],color:'warning'})/* 国际化处理： 请选择需要复制的数据！*/\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tsetDefData('cpk_stordoc',dataSource,record[0].data.values[templateElements.pk_item].value);\r\n\t\t\t\tprops.pushTo('/card', {\r\n\t\t\t\t\tstatus: 'copy',\r\n\t\t\t\t\tid: record[0].data.values[templateElements.pk_item].value,\r\n\t\t\t\t\torg:record[0].data.values[templateElements.pk_org].value,\r\n\t\t\t\t});\r\n\t\t\t\tbreak\r\n            default:\r\n                break;\r\n        }\r\n\t}\r\n\t\r\n\tupdateButtonStatus() {\r\n\t\tlet allRows = this.props.table.getCheckedRows(templateElements.tableId)\r\n\t\tlet allData = this.props.table.getAllTableData(templateElements.tableId)\r\n\t\tlet selData = this.selectedRowRecord;\r\n\t\tlet buttonStatus = {}\r\n\t\t/*\r\n\t\tif(selData  && selData[templateElements.pk_item] && selData[templateElements.pk_item].value){\r\n\t\t\tbuttonStatus.Copy = false;//判断复制态的时候按钮是否可用\r\n\t\t}else{\r\n\t\t\tbuttonStatus.Copy = true;\r\n\t\t}\r\n\t\t*/\r\n\t\tif(allRows && allRows.length == 1){//当且仅当选中了一条数据的时候才能可用复制按钮；\r\n\t\t\tbuttonStatus.Copy = false;\r\n\t\t}else{\r\n\t\t\tbuttonStatus.Copy = true;\r\n\t\t}\r\n\r\n\t\tif(allRows.length > 0) {\r\n\t\t\tbuttonStatus.deleteAction = false\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbuttonStatus.deleteAction = true\r\n\t\t}\r\n\r\n\t\tif(allData && allData.rows.length > 0) {\r\n\t\t\tbuttonStatus.Print = false\r\n\t\t\tbuttonStatus.Output = false\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbuttonStatus.Print = true\r\n\t\t\tbuttonStatus.Output = true\r\n\t\t}\r\n\r\n\t\tthis.enableNumber = 0\r\n\t\tthis.disableNumber = 0\r\n\t\t//控制一下停用以及启用按钮的状态\r\n\t\tif(allRows.length > 0) {\r\n\t\t\tallRows.forEach(row => {\r\n\t\t\t\tlet recordStatus = row.data.values.enablestate.value\r\n\t\t\t\tif(recordStatus == 2) {\r\n\t\t\t\t\tthis.enableNumber++\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.disableNumber++\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tbuttonStatus.enableAction = this.disableNumber > 0 ? false : true\r\n\t\tbuttonStatus.disableAction = this.enableNumber > 0 ? false : true\r\n\t\tthis.props.button.setButtonDisabled(buttonStatus)\r\n\t}\r\n\r\n\tenableAction = ()=>{\r\n\t\t//前台校验，过滤出来停用数据传到后台；\r\n\t\t//管控范围和对对象是否有操作权限在后台校验；\r\n\t\t//传递参数需要：1,当前pk_org(因为现在后台还没有方案，加上单个人能打开的组织数据)\r\n\t\t//2，选中的数据的主键\r\n\t\tlet curSels = this.props.table.getCheckedRows(templateElements.tableId);\r\n\t\tlet curTableData = this.props.table.getAllTableData(templateElements.tableId);\r\n\t\tlet curFilterValues = new Map();//放到一个map中，pk_stordoc为key，index为value\r\n\t\tlet pk_stordocs = [];\r\n\t\tlet cpk_org = \"\";\r\n\t\tcurSels.forEach(element => {\r\n\t\t\tif(\"2\" !== element.data.values.enablestate.value)//如果已经启用，\r\n\t\t\t{\t\r\n\t\t\t\tif(\"\" === cpk_org){\r\n\t\t\t\t\tcpk_org = element.data.values.pk_org.value;\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\tpk_stordocs.push(element.data.values.pk_stordoc.value);\r\n\t\t\t\t//curFilterValues.push(element);\r\n\t\t\t\tcurFilterValues.set(element.data.values.pk_stordoc.value,element.index);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(curFilterValues.size === 0){\r\n\t\t\ttoast({content:this.state.json['10140WARH-000032'],color:\"warning\"});/* 国际化处理： 所选数据都已启用,请重新选择数据！*/\r\n\t\t\treturn\r\n\t\t}\r\n\t\tajax({\r\n            loading: true,\r\n            url:urls.listEnableUrl, \r\n            data:{\r\n\t\t\t\t\"pk_org\":cpk_org,\r\n\t\t\t\t\"pk_stordocs\":pk_stordocs,\r\n\t\t\t\tmdOperateCode:'enable',//增加一个参数，用来标志数据权限；\r\n\t\t\t},\r\n            success: (res) => {\r\n\t\t\t\tif (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n\t\t\t\t\tthis.props.dealFormulamsg(res.formulamsg,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"stordoc\":\"table\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\tres.data.stordoc.rows.forEach(element =>{\r\n\t\t\t\t\tlet ipk = element.values.pk_stordoc.value;\r\n\t\t\t\t\tlet ind = curFilterValues.get(ipk);\r\n\t\t\t\t\tcurTableData.rows[ind].values = element.values;\r\n\t\t\t\t});\r\n\t\t\t\tthis.props.table.setAllTableData(templateElements.tableId,curTableData);\r\n\t\t\t\t//鉴于对停用启用按钮的处理，此处对所有数据行取消选中，然后设置停用启用按钮置灰\r\n\t\t\t\tthis.props.button.setButtonDisabled({disableAction: true,enableAction: true})\r\n\t\t\t\tthis.props.table.selectAllRows(templateElements.tableId,false)\r\n\t\t\t\ttoast({title : this.state.json['10140WARH-000014'],color : 'success'});/* 国际化处理： 启用成功！*/\r\n            }\r\n        }); \r\n\r\n\t}\r\n\tdisableAction = ()=>{\r\n\t\t//前台校验，过滤出来停用数据传到后台；\r\n\t\t//管控范围和对对象是否有操作权限在后台校验；\r\n\t\t//传递参数需要：1,当前pk_org(因为现在后台还没有方案，加上单个人能打开的组织数据)\r\n\t\t//2，选中的数据的主键\r\n\t\tlet curSels = this.props.table.getCheckedRows(templateElements.tableId);\r\n\t\tlet curTableData = this.props.table.getAllTableData(templateElements.tableId);\r\n\t\tlet curFilterValues = new Map();//放到一个map中，pk_stordoc为key，index为value\r\n\t\tlet pk_stordocs = [];\r\n\t\tlet cpk_org = \"\";\r\n\t\tcurSels.forEach(element => {\r\n\t\t\tif(\"3\" !== element.data.values.enablestate.value)//如果已经启用，\r\n\t\t\t\t{\t\r\n\t\t\t\t\tif(\"\" === cpk_org){\r\n\t\t\t\t\t\tcpk_org = element.data.values.pk_org.value;\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\tpk_stordocs.push(element.data.values.pk_stordoc.value);\r\n\t\t\t\t\t//curFilterValues.push(element);\r\n\t\t\t\t\tcurFilterValues.set(element.data.values.pk_stordoc.value,element.index);\r\n\t\t}\r\n\t\t});\r\n\t\tif(curFilterValues.size === 0){\r\n\t\t\ttoast({content:this.state.json['10140WARH-000033'],color:\"warning\"});/* 国际化处理： 所选数据都已停用,请重新选择数据！*/\r\n\t\t}\r\n\t\tajax({\r\n            loading: true,\r\n            url:urls.listDisableUrl, \r\n            data:{\r\n\t\t\t\t\"pk_org\":cpk_org,\r\n\t\t\t\t\"pk_stordocs\":pk_stordocs,\r\n\t\t\t\tmdOperateCode:'disable',//增加一个参数，用来标志数据权限；\r\n\t\t\t},\r\n            success: (res) => {\r\n\t\t\t\tif (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n\t\t\t\t\tthis.props.dealFormulamsg(res.formulamsg,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"stordoc\":\"table\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\tres.data.stordoc.rows.forEach(element =>{\r\n\t\t\t\t\tlet ipk = element.values.pk_stordoc.value;\r\n\t\t\t\t\tlet ind = curFilterValues.get(ipk);\r\n\t\t\t\t\tcurTableData.rows[ind].values = element.values;\r\n\t\t\t\t});\r\n\t\t\t\tthis.props.table.setAllTableData(templateElements.tableId,curTableData);\r\n\t\t\t\t//鉴于对停用启用按钮的处理，此处对所有数据行取消选中，然后设置停用启用按钮置灰\r\n\t\t\t\tthis.props.button.setButtonDisabled({disableAction: true,enableAction: true})\r\n\t\t\t\tthis.props.table.selectAllRows(templateElements.tableId,false);\r\n\t\t\t\ttoast({title : this.state.json['10140WARH-000015'],color : 'success'});/* 国际化处理： 停用成功！*/\r\n            }\r\n        }); \r\n\r\n\t}\r\n\tdoubleClick = (record, index, props, e)=>{\r\n            \r\n\t\tlet searchValues = props.search.getAllSearchData('search', false) || {};\r\n\t\tcacheTools.set(\"searchParams\",searchValues);\r\n\t\r\n\t\t//缓存查询值\r\n\t\tcacheTools.set('preid',record[templateElements.pk_item].value);\r\n\t\tcacheTools.set('preorg',record[templateElements.pk_org].value);\r\n        this.props.pushTo('/card', {\r\n            status: 'browse',\r\n\t\t\tid: record[templateElements.pk_item].value,\r\n\t\t\torg:record[templateElements.pk_org].value,\r\n        });\r\n\t}\r\n\r\n    deleteAction = (props) =>{\r\n\t\tlet curSels = this.props.table.getCheckedRows(templateElements.tableId);\r\n\t\tlet cpk_org = \"\";\r\n\t\tlet pk_stordocs =[];\r\n\t\tcurSels.forEach(element => {\r\n\t\r\n\t\t\t\t\tif(\"\" === cpk_org){\r\n\t\t\t\t\t\tcpk_org = element.data.values.pk_org.value;\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\tpk_stordocs.push(element.data.values.pk_stordoc.value);\r\n\r\n\t\t});\r\n\r\n        ajax({\r\n\t\t\tloading: true,\r\n            url: urls.listDelUrl,\r\n\t\t\tdata:{\r\n\t\t\t\t\"pk_org\":cpk_org,\r\n\t\t\t\t\"pk_stordocs\":pk_stordocs,\r\n\t\t\t\tmdOperateCode:'delete',//增加一个参数，用来标志数据权限；\r\n\t\t\t},\r\n            success: (res) => {\r\n\t\t\t\ttoast({color:\"success\",title:this.state.json['10140WARH-000027']});/* 国际化处理： 删除成功！*/\r\n\t\t\t\t//优化效率（SQL数量问题），删除之后不再刷新了，从后台返回删除的PK，直接前端合并\r\n\t\t\t\tlet allData = this.props.table.getAllTableData(templateElements.tableId)\r\n\t\t\t\tres.data.forEach(key => {\r\n\t\t\t\t\tallData.rows.forEach((row,index) => {\r\n\t\t\t\t\t\tif(key == row.values[templateElements.pk_item].value) {\r\n\t\t\t\t\t\t\tallData.rows.splice(index,1)\r\n\t\t\t\t\t\t\tallData.allpks.splice(index,1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.props.table.setAllTableData(templateElements.tableId, allData)\r\n                //this.refreshAction(this.props);\r\n            }\r\n        });\r\n    }\r\n\r\n    refreshAction =(props)=>{\r\n\r\n\t\tlet searchValues = props.search.getAllSearchData('search',false) || {};\r\n\t\tcacheTools.set(\"searchParams\",searchValues);\r\n\t\tlet data = this.getQueryData(props,searchValues)\t\t\t\r\n    \r\n\t\tajax({\r\n\t\t\turl: urls.queryListUrl,\r\n\t\t\tdata,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n\t\t\t\t\tthis.props.dealFormulamsg(res.formulamsg,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"stordoc\":\"table\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\tif(res.data){\r\n\t\t\t\t\ttotalPks = res.data[templateElements.tableId].allpks\r\n\t\t\t\t\tprops.table.setAllTableData(templateElements.tableId, res.data[templateElements.tableId]);\r\n\t\t\t\t\ttoast({ color: 'success', title: this.state.json['10140WARH-000009'] });/* 国际化处理： 刷新成功！*/\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet tableData = {\r\n\t\t\t\t\t\tallpks: [],\r\n\t\t\t\t\t\trows: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotalPks = []\r\n\t\t\t\t\tprops.table.setAllTableData(templateElements.tableId, tableData);\r\n\t\t\t\t\ttoast({content:this.state.json['10140WARH-000034'],color:\"warning\"});/* 国际化处理： 无数据！*/\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//更新一下按钮状态\r\n\t\t\t\tthis.updateButtonStatus()\r\n\t\t\t},\r\n\t\t\terror : (res)=>{\r\n\t\t\t\tconsole.log(res.message);\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n\r\n\r\n    pageInfoClick = (props, config, pks)=>{\r\n\r\n        let pageInfo = props.table.getTablePageInfo(templateElements.tableId);\r\n\t\tlet searchVal = this.props.search.getAllSearchData(templateElements.searchId);\r\n\t\t// //后台暂时还没有提供当前人所能打开的组织代码，现在先从前台传递过去\r\n\t\tlet cpk_org = \"\";\r\n\t\t searchVal.conditions.forEach(element=>{\r\n\t\t \tif(\"pk_org\" === element.field){\r\n\t\t \t\tcpk_org = element.value.firstvalue;\r\n\t\t \t}\r\n\t\t })\r\n        // 后台还没更新，暂不可用\r\n        let data = {\r\n            \"allpks\": pks,\r\n\t\t\t\"pageid\": templateElements.pageId,\r\n\t\t\t\"pk_org\":cpk_org,//暂时先从前台向后台传递一下：\r\n\t\t\t...pageInfo\r\n        };\r\n        //得到数据渲染到页面\r\n        let that = this;\r\n        ajax({\r\n            url: urls.queryPageUrl,\r\n            data: data,\r\n            success: (res) => {\r\n\t\t\t\tif (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n\t\t\t\t\tthis.props.dealFormulamsg(res.formulamsg,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"stordoc\":\"table\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\t\t\t\t\t\r\n                let { success, data } = res;\r\n                if (success) {\r\n                    if (data) {\r\n\t\t\t\t\t\t//点击分页时设置一下分页信息\r\n\t\t\t\t\t\tdata[templateElements.tableId].allpks = totalPks\r\n                        props.table.setAllTableData(templateElements.tableId, data[templateElements.tableId]);\r\n                    } else {\r\n\t\t\t\t\t\tlet tableData = {\r\n\t\t\t\t\t\t\tallpks: [],\r\n\t\t\t\t\t\t\trows: []\r\n\t\t\t\t\t\t}\r\n                        props.table.setAllTableData(templateElements.tableId, tableData);\r\n                    }\r\n\t\t\t\t}\r\n\t\t\t\tthis.selectedRowRecord = undefined;\r\n\t\t\t\tthis.updateButtonStatus();//added by liusenc 20181008\r\n            }\r\n        });\r\n\t}\r\n\t\r\n\tgetQueryData(props,cacheQueryCondition,isShowWarning = false){\r\n\t\tlet queryInfo = props.search.getQueryInfo('search',isShowWarning)\r\n\t\tlet pageInfo  = props.table.getTablePageInfo(templateElements.tableId);\t\r\n\t\treturn{\r\n\t\t\tquerycondition:cacheQueryCondition,\r\n\t\t\tpagecode:templateElements.pageId,\r\n\t\t\tqueryAreaCode:templateElements.searchId,\r\n\t\t\toid: queryInfo.oid , \r\n\t\t\tpageInfo: pageInfo,\r\n\t\t\tquerytype:'tree',\r\n\t\t\tcustcondition:{\r\n\t\t\t\tconditions:[{field:'showDisable',oprtype:'like',value:{firstvalue:this.state.isShowOff}}],\r\n\t\t\t\tlogic:\"and\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n    clickSearchBtn = (props,searchVal)=>{\r\n\r\n\t\tif(!searchVal) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tlet searchValues = props.search.getAllSearchData('search') || {};\r\n\t\tcacheTools.set(\"searchParams\",searchValues);\r\n\t\tlet data = this.getQueryData(props,searchValues,true)\r\n\t\t\r\n        ajax({\r\n            url: urls.queryListUrl,\r\n            data,\r\n            success: (res) => {\r\n\t\t\t\tif (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n\t\t\t\t\tthis.props.dealFormulamsg(res.formulamsg,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"stordoc\":\"table\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\t\t\t\t\t\r\n                console.log(res);\r\n                if(res.data){\r\n\t\t\t\t\ttotalPks = res.data[templateElements.tableId].allpks\r\n                    props.table.setAllTableData(templateElements.tableId, res.data[templateElements.tableId]);\r\n\t\t\t\t\ttoast({ color: 'success', content: this.state.json['10140WARH-000035']+totalPks.length+this.state.json['10140WARH-000018'] });/* 国际化处理： 查询成功,共,条*/\r\n                }else{\r\n\t\t\t\t\ttotalPks = []\r\n                    props.table.setAllTableData(templateElements.tableId, {rows:[]});\r\n                    toast({content:this.state.json['10140WARH-000036'],color:\"warning\"});/* 国际化处理： 未查询出符合条件的数据!*/\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateButtonStatus()\r\n            },\r\n            error : (res)=>{\r\n                console.log(res.message);\r\n            }\r\n        });\r\n\t}\r\n\r\n\tonSelectedChange(props,moduleId,record,index,status) {\r\n\t\tthis.updateButtonStatus()\r\n\t}\r\n\t\r\n\tonRowClick(props,moduleId,record,index) {\r\n\t\tthis.selectedRowRecord = record;\r\n\t\tthis.updateButtonStatus();//added by liusenc 20181008\r\n\t}\r\n\r\n    //加判断\r\n    /**按钮响应事件 */\r\n    onShowDisable(val){\r\n\t\tlet isShowOff = this.state.isShowOff\r\n\t\tthis.setState({\r\n\t\t\tisShowOff: !isShowOff\r\n\t\t},() => {\r\n\t\t\tthis.refreshAction(this.props)\r\n\t\t})\r\n    }\t\r\n\t\r\n\trender() {\r\n\t\tlet { table, button, search, modal } = this.props;\r\n\t\tlet { createModal } = modal\r\n\t\tlet buttons  = this.props.button.getButtons();\r\n\t\tbuttons = buttons.sort((a,b)=>{\r\n\t\t\treturn b.btnorder - a.btnorder;\r\n\t\t});\r\n\t\tlet { createSimpleTable } = table;\r\n\t\tlet { NCCreateSearch } = search;\r\n\t\tlet { createButtonApp , getButtons } = button;\r\n\t\treturn (<div className=\"nc-bill-list\">\r\n\t\t\t\t<div className='nc-bill-header-area'>\r\n\t\t\t\t\t<div className='header-title-search-area'>\r\n\t\t\t\t\t<h2 className='title-search-detail'>{this.state.json['10140WARH-000021']}</h2></div>{/* 国际化处理： 仓库*/}\r\n\t\t\t\t\t<span className=\"showOff\">\r\n\t\t\t\t\t\t<NCCheckbox \r\n\t\t\t\t\t\t\tonChange={this.onShowDisable.bind(this)}\r\n\t\t\t\t\t\t\tchecked={this.state.isShowOff}>\r\n\t\t\t\t\t\t\t{this.state.json['10140WARH-000037']}{/* 国际化处理： 显示停用*/}\r\n\t\t\t\t\t\t</NCCheckbox>\r\n\t\t\t        </span>\r\n\t\t\t\t\t<div className=\"header-button-area\">\r\n\t\t\t\t\t\t{createButtonApp({\r\n\t\t\t\t\t\t\tarea: 'header-button-area',\r\n\t\t\t\t\t\t\tbuttonLimit: 3, \r\n\t\t\t\t\t\t\tonButtonClick: this.buttonClick.bind(this), \r\n\t\t\t\t\t\t\tpopContainer: document.querySelector('.header-button-area')\r\n\t\r\n\t\t\t\t\t\t})}\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"nc-bill-search-area\">\r\n\t\t\t\t\t{NCCreateSearch(templateElements.searchId, {\r\n\t\t\t\t\t\tclickSearchBtn: this.clickSearchBtn.bind(this)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"nc-bill-table-area\">\r\n\t\t\t\t\t{createSimpleTable(templateElements.tableId, {\r\n\t\t\t\t\t\tdataSource: dataSource,\r\n\t\t\t\t\t\tpkname: templateElements.pk_item,\r\n\t\t\t\t\t\thandlePageInfoChange: this.pageInfoClick,\r\n\t\t\t\t\t\ttableModelConfirm: this.tableModelConfirm,\r\n\t\t\t\t\t\tshowIndex:true,\r\n\t\t\t\t\t\tonRowClick: this.onRowClick.bind(this),\r\n\t\t\t\t\t\tshowCheck:true,\r\n\t\t\t\t\t\tonRowDoubleClick: this.doubleClick.bind(this),\r\n\t\t\t\t\t\tonSelected: this.onSelectedChange.bind(this),\r\n\t\t\t\t\t\tonSelectedAll: this.onSelectedChange.bind(this)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<PrintOutput\r\n\t\t\t\t\tref='printOutput'\r\n\t\t\t\t\turl={urls.printUrl}\r\n\t\t\t\t\tdata={{\r\n\t\t\t\t\t\tfuncode: '10140WARH',\r\n\t\t\t\t\t\toids: this.state.pks,\r\n\t\t\t\t\t\tnodekey: 'list',\r\n\t\t\t\t\t\toutputType: 'output'\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{createModal('enable', {\r\n\t\t\t\t\ttitle: this.state.json['10140WARH-000022'],/* 国际化处理： 询问*/\r\n\t\t\t\t\tcontent: this.state.json['10140WARH-000024'],/* 国际化处理： 您确定要启用所选数据吗？*/\r\n\t\t\t\t\tbeSureBtnClick: this.enableAction.bind(this)\r\n\t\t\t\t})}\r\n\r\n\t\t\t\t{createModal('disable', {\r\n\t\t\t\t\ttitle: this.state.json['10140WARH-000022'],/* 国际化处理： 询问*/\r\n\t\t\t\t\tcontent: this.state.json['10140WARH-000025'],/* 国际化处理： 您确定要停用所选数据吗？*/\r\n\t\t\t\t\tbeSureBtnClick: this.disableAction.bind(this)\r\n\t\t\t\t})}\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nList = createPage({\r\n\t//initTemplate: initTemplate\r\n\tbillinfo:{\r\n\t\tbilltype:'grid',\r\n\t\tpagecode:'10140WARH_list',\r\n\t\tbodycode:'stordoc'\r\n\t},\r\n})(List);\r\n\r\n//ReactDOM.render(<List />, document.querySelector('#app'));\r\nexport default List\r\n"],"sourceRoot":""}