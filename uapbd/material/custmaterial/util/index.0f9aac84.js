!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["uapbd/material/custmaterial/util/index"]=t(require("nc-lightapp-front")):e["uapbd/material/custmaterial/util/index"]=t(e["nc-lightapp-front"])}(window,function(e){return function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=284)}({1:function(t,a){t.exports=e},189:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.config={queryarea:"10140CMG",tablemater:"custmater",tablesub:"subcustom",urls:{savemater:"/nccloud/uapbd/custmateria/savemater.do",querymater:"/nccloud/uapbd/custmateria/querymater.do",savesub:"/nccloud/uapbd/custmateria/savesub.do",custexist:"/nccloud/uapbd/custmateria/custexist.do",vfreedisable:"/nccloud/uapbd/custmateria/vfreedisable.do",print:"/nccloud/uapbd/custmateria/print.do"}}},219:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatus=t.rowDisable=t.initTemplate=void 0;var o=a(189),r=a(1),n=o.config.queryarea,u=o.config.tablemater,i=o.config.tablesub,s=o.config.urls;t.initTemplate=function(e,t,a){e.createUIDom({pagecode:e.config.pageCode},function(a){var o=a.template;o=function(e,t,a){var o=this;t[u].showindex=!0,t[u].status="browse",t[u].items.forEach(function(e){"materialid"===e.attrcode&&(e.isMultiSelectedEnabled=!0)}),t[i].items.forEach(function(e){"subcustom"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.isShowDisabledData=!1,e.queryCondition={enablestate:"2",isShowDisabledData:!1})}),t[n].items.forEach(function(e){"materialid.pk_marbasclass"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.isShowDisabledData=!0),"materialid"===e.attrcode&&(e.isShowDisabledData=!0)});var b=function(e,t,o,n,l){t.values;switch(l){case"oprextend":case"opredit":d(n,u,"edit"),n.editTable.openModel(u,"edit",t,e,!1);break;case"oprdel":if(c(n,t))return;n.editTable.deleteTableRowsByIndex(u,e);break;case"oprdelbro":if(c(n,t))return;var b={rowId:e,status:"3"};b.values=t.values;var p={pageid:n.config.pageCode,model:{areaType:"table",pageinfo:null,rows:[b]}};(0,r.ajax)({url:s.savemater,data:p,success:function(t){if(t.success){n.editTable.deleteTableRowsByIndex(u,[e]);var o=n.editTable.getAllData(u);o.rows=o.rows.filter(function(e){return"3"!=e.status}),n.editTable.setTableData(u,o),(0,r.toast)({title:a["10140CMG-000012"],color:"success"})}}});break;case"oprdelsub":if(c(n,t))return;n.editTable.deleteTableRowsByIndex(i,e);break;case"oprdelsubbro":if(c(n,t))return;var f={rowId:t.rowid,status:"3",values:{ts:{value:t.values.ts.value},pk_custom:{value:t.values.pk_custom.value}}},m={pageid:n.config.pageCode,model:{areaType:"table",pageinfo:null,rows:[f]}};(0,r.ajax)({url:s.savesub,data:m,success:function(t){if(t.success){n.editTable.deleteTableRowsByIndex(i,[e]);var o=n.editTable.getAllData(i);o.rows=o.rows.filter(function(e){return"3"!=e.status}),n.editTable.setTableData(i,o),(0,r.toast)({title:a["10140CMG-000012"],color:"success"})}}})}};return t[u].items.push({attrcode:"opr",label:a["10140CMG-000026"],itemtype:"customer",width:120,fixed:"right",className:"table-opr",visible:!0,render:function(t,a,r){var n=[];return l(e,a)||(n="browse"===e.editTable.getStatus(u)?["oprdelbro"]:["oprdel"]),e.button.createOprationButton(n,{area:"opractions",buttonLimit:2,onButtonClick:b.bind(a,r,t,o)})}}),t[i].showindex=!0,t[i].status="browse",t[i].items.push({attrcode:"opr",label:a["10140CMG-000026"],itemtype:"customer",width:150,className:"table-opr",visible:!0,render:function(t,a,r){var n="browse"===e.editTable.getStatus(i)?["oprdelsubbro"]:["oprdelsub"];return e.button.createOprationButton(n,{area:"oprsubactions",buttonLimit:2,onButtonClick:b.bind(a,r,t,o)})}}),t}(e,o,t),e.meta.setMeta(o),a.button&&e.button.setButtons(a.button),a.button&&(e.button.setButtons(a.button),e.button.setPopContent("oprdelbro",t["10140CMG-000024"]),e.button.setPopContent("oprdelsubbro",t["10140CMG-000024"])),function(e){"browse"===e.editTable.getStatus(u)?e.button.setButtonsVisible({btnSave:!1,btnCancel:!1,btnAdd:!0,btnEdit:!0}):e.button.setButtonsVisible({btnAdd:!0,btnEdit:!1,btnSave:!0,btnCancel:!0})}(e)})};var l=t.rowDisable=function(e,t){return t.values.pk_group.value==t.values.pk_org.value&&"ORG_NODE"==e.config.nodeType||t.values.pk_group.value!=t.values.pk_org.value&&"GROUP_NODE"==e.config.nodeType};function c(e,t){if(l(e,t)){if("ORG_NODE"==e.config.nodeType)return(0,r.toast)({content:json["10140CMG-000006"],color:"warning"}),!0;if("GROUP_NODE"==e.config.nodeType)return!1}}var d=t.setStatus=function(e,t,a){e.editTable.setStatus(t,a),window.onbeforeunload="edit"==a?function(){return""}:null}},284:function(e,t,a){e.exports=a(219)}})});
//# sourceMappingURL=index.0f9aac84.js.map