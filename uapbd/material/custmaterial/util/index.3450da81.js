!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["uapbd/material/custmaterial/util/index"]=t(require("nc-lightapp-front")):e["uapbd/material/custmaterial/util/index"]=t(e["nc-lightapp-front"])}(window,function(e){return function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="../../../../",o(o.s=282)}({1:function(t,o){t.exports=e},189:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.config={tablemater:"custmater",tablesub:"subcustom",urls:{savemater:"/nccloud/uapbd/custmateria/savemater.do",querymater:"/nccloud/uapbd/custmateria/querymater.do",savesub:"/nccloud/uapbd/custmateria/savesub.do",custexist:"/nccloud/uapbd/custmateria/custexist.do",vfreedisable:"/nccloud/uapbd/custmateria/vfreedisable.do",print:"/nccloud/uapbd/custmateria/print.do"}}},219:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatus=t.rowDisable=t.initTemplate=void 0;var a=o(189),n=o(1),r=a.config.tablemater,u=a.config.tablesub,i=a.config.urls;t.initTemplate=function(e,t,o){e.createUIDom({pagecode:e.config.pageCode},function(o){var a=o.template;a=function(e,t,o){var a=this;t[r].showindex=!0,t[r].status="browse",t[r].items.forEach(function(e){"materialid"===e.attrcode&&(e.isMultiSelectedEnabled=!0)}),t[u].items.forEach(function(e){"subcustom"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.isShowDisabledData=!1,e.queryCondition={enablestate:"2",isShowDisabledData:!1})});var d=function(e,t,a,s,d){t.values;switch(d){case"oprextend":case"opredit":c(s,r,"edit"),s.editTable.openModel(r,"edit",t,e,!1);break;case"oprdel":if(l(s,t))return;s.editTable.deleteTableRowsByIndex(r,e);break;case"oprdelbro":if(l(s,t))return;var b={rowId:e,status:"3"};b.values=t.values;var p={pageid:s.config.pageCode,model:{areaType:"table",pageinfo:null,rows:[b]}};(0,n.ajax)({url:i.savemater,data:p,success:function(t){if(t.success){s.editTable.deleteTableRowsByIndex(r,[e]);var a=s.editTable.getAllData(r);a.rows=a.rows.filter(function(e){return"3"!=e.status}),s.editTable.setTableData(r,a),(0,n.toast)({title:o["10140CMG-000012"],color:"success"})}}});break;case"oprdelsub":if(l(s,t))return;s.editTable.deleteTableRowsByIndex(u,e);break;case"oprdelsubbro":if(l(s,t))return;var f={rowId:t.rowid,status:"3",values:{ts:{value:t.values.ts.value},pk_custom:{value:t.values.pk_custom.value}}},v={pageid:s.config.pageCode,model:{areaType:"table",pageinfo:null,rows:[f]}};(0,n.ajax)({url:i.savesub,data:v,success:function(t){if(t.success){s.editTable.deleteTableRowsByIndex(u,[e]);var a=s.editTable.getAllData(u);a.rows=a.rows.filter(function(e){return"3"!=e.status}),s.editTable.setTableData(u,a),(0,n.toast)({title:o["10140CMG-000012"],color:"success"})}}})}};return t[r].items.push({attrcode:"opr",label:o["10140CMG-000026"],itemtype:"customer",width:120,fixed:"right",className:"table-opr",visible:!0,render:function(t,o,n){var u=[];return s(e,o)||(u="browse"===e.editTable.getStatus(r)?["oprdelbro"]:["oprdel"]),e.button.createOprationButton(u,{area:"opractions",buttonLimit:2,onButtonClick:d.bind(o,n,t,a)})}}),t[u].showindex=!0,t[u].status="browse",t[u].items.push({attrcode:"opr",label:o["10140CMG-000026"],itemtype:"customer",width:150,className:"table-opr",visible:!0,render:function(t,o,n){var r="browse"===e.editTable.getStatus(u)?["oprdelsubbro"]:["oprdelsub"];return e.button.createOprationButton(r,{area:"oprsubactions",buttonLimit:2,onButtonClick:d.bind(o,n,t,a)})}}),t}(e,a,t),e.meta.setMeta(a),o.button&&e.button.setButtons(o.button),o.button&&(e.button.setButtons(o.button),e.button.setPopContent("oprdelbro",t["10140CMG-000024"]),e.button.setPopContent("oprdelsubbro",t["10140CMG-000024"])),function(e){"browse"===e.editTable.getStatus(r)?e.button.setButtonsVisible({btnSave:!1,btnCancel:!1,btnAdd:!0,btnEdit:!0}):e.button.setButtonsVisible({btnAdd:!0,btnEdit:!1,btnSave:!0,btnCancel:!0})}(e)})};var s=t.rowDisable=function(e,t){return t.values.pk_group.value==t.values.pk_org.value&&"ORG_NODE"==e.config.nodeType||t.values.pk_group.value!=t.values.pk_org.value&&"GROUP_NODE"==e.config.nodeType};function l(e,t){if(s(e,t)){if("ORG_NODE"==e.config.nodeType)return(0,n.toast)({content:json["10140CMG-000006"],color:"warning"}),!0;if("GROUP_NODE"==e.config.nodeType)return!1}}var c=t.setStatus=function(e,t,o){e.editTable.setStatus(t,o),window.onbeforeunload="edit"==o?function(){return""}:null}},282:function(e,t,o){e.exports=o(219)}})});
//# sourceMappingURL=index.3450da81.js.map