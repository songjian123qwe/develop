{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"nc-lightapp-front\"","webpack://[name]/./src/uapbd/material/custmaterial/config/index.js","webpack://[name]/./src/uapbd/material/custmaterial/util/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","config","queryarea","tablemater","tablesub","urls","savemater","querymater","savesub","custexist","vfreedisable","print","_index","_ncLightappFront","initTemplate","props","json","inlt","createUIDom","pagecode","pageCode","data","meta","template","_this","this","showindex","status","items","forEach","item","attrcode","isMultiSelectedEnabled","isShowDisabledData","queryCondition","enablestate","tableButtonClick","index","record","test","values","setStatus","editTable","openModel","checkDelDisable","deleteTableRowsByIndex","delObj","rowId","paramData","pageid","model","areaType","pageinfo","rows","ajax","url","success","res","allD","getAllData","filter","setTableData","toast","title","color","delObj2","rowid","ts","pk_custom","paramData2","push","label","itemtype","width","fixed","className","visible","render","text","buttonAry","rowDisable","getStatus","button","createOprationButton","area","buttonLimit","onButtonClick","modifierMeta","setMeta","setButtons","setPopContent","setButtonsVisible","btnSave","btnCancel","btnAdd","btnEdit","gridStatusChange","row","pk_group","pk_org","nodeType","content","tableId","onbeforeunload"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,sBACA,mBAAAC,eAAAC,IACAD,QAAA,qBAAAJ,GACA,iBAAAC,QACAA,QAAA,0CAAAD,EAAAG,QAAA,sBAEAJ,EAAA,0CAAAC,EAAAD,EAAA,sBARA,CASCO,OAAA,SAAAC,GACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAT,QAGA,IAAAC,EAAAM,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAX,YAUA,OANAY,EAAAH,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAU,GAAA,EAGAV,EAAAD,QA0DA,OArDAQ,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAhB,EAAAiB,EAAAC,GACAV,EAAAW,EAAAnB,EAAAiB,IACAG,OAAAC,eAAArB,EAAAiB,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAxB,GACA,oBAAAyB,eAAAC,aACAN,OAAAC,eAAArB,EAAAyB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAArB,EAAA,cAAiD2B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAlC,GACA,IAAAiB,EAAAjB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAO,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,eAIAhC,IAAAiC,EAAA,uBClFAxC,EAAAD,QAAAM,qFCAaoC,UACTC,UAAU,WACVC,WAAa,YACbC,SAAS,YACTC,MACIC,UAAY,0CACZC,WAAa,2CACbC,QAAU,wCACVC,UAAY,0CACZC,aAAa,6CACbC,MAAM,0KCVd,IAAAC,EAAA7C,EAAA,KACA8C,EAAA9C,EAAA,GACOmC,EAAsCD,SAAtCC,UAAUC,EAA4BF,SAA5BE,WAAWC,EAAiBH,SAAjBG,SAASC,EAAQJ,SAARI,KAC1BS,eAAe,SAACC,EAAMC,EAAKC,GAElCF,EAAMG,aACEC,SAAWJ,EAAMd,OAAOmB,UAK5B,SAACC,GACG,IAAIC,EAAOD,EAAKE,SAChBD,EA4BZ,SAAsBP,EAAMO,EAAKN,GAAM,IAAAQ,EAAAC,KAEnCH,EAAKnB,GAAYuB,WAAY,EAC7BJ,EAAKnB,GAAYwB,OAAS,SAE1BL,EAAKnB,GAAYyB,MAAMC,QAAQ,SAACC,GACT,eAAhBA,EAAKC,WACJD,EAAKE,wBAAyB,KAGtCV,EAAKlB,GAAUwB,MAAMC,QAAQ,SAACC,GACP,cAAhBA,EAAKC,WACJD,EAAKE,wBAAyB,EAC9BF,EAAKG,oBAAmB,EACxBH,EAAKI,gBAAkBC,YAAc,IAAIF,oBAAmB,MAIpEX,EAAKpB,GAAW0B,MAAMC,QAAQ,SAACC,GACR,8BAAhBA,EAAKC,WACJD,EAAKE,wBAAyB,EAC9BF,EAAKG,oBAAqB,GAEX,eAAhBH,EAAKC,WACJD,EAAKG,oBAAqB,KAIlC,IAAIG,EAAmB,SAAUC,EAAOC,EAAQC,EAAMxB,EAAOvB,GACzC8C,EAAOE,OACvB,OAAQhD,GAEJ,IAAK,YAKL,IAAK,UACDiD,EAAU1B,EAAMZ,EAAW,QAG3BY,EAAM2B,UAAUC,UAAUxC,EAAY,OAAQmC,EAAQD,GAAM,GAE5D,MACJ,IAAK,SACD,GAAGO,EAAgB7B,EAAMuB,GACrB,OAEJvB,EAAM2B,UAAUG,uBAAuB1C,EAAYkC,GACnD,MACJ,IAAK,YACD,GAAGO,EAAgB7B,EAAMuB,GACrB,OAGJ,IAAIQ,GACAC,MAAOV,EACPV,OAAQ,KAGZmB,EAAON,OAASF,EAAOE,OAEvB,IAAIQ,GACAC,OAASlC,EAAMd,OAAOmB,SACtB8B,OACIC,SAAU,QACVC,SAAU,KACVC,MAAQP,MAGhB,EAAAjC,EAAAyC,OACIC,IAAKlD,EAAKC,UACVe,KAAM2B,EACNQ,QAAS,SAACC,GACN,GAAIA,EAAID,QAAS,CACbzC,EAAM2B,UAAUG,uBAAuB1C,GAAakC,IACpD,IAAIqB,EAAO3C,EAAM2B,UAAUiB,WAAWxD,GAEtCuD,EAAKL,KAAOK,EAAKL,KAAKO,OAAO,SAAA9B,GAAA,MAAuB,KAAfA,EAAKH,SAC1CZ,EAAM2B,UAAUmB,aAAa1D,EAAWuD,IACxC,EAAA7C,EAAAiD,QAAOC,MAAM/C,EAAK,mBAAmBgD,MAAM,gBAKvD,MACJ,IAAK,YACD,GAAGpB,EAAgB7B,EAAMuB,GACrB,OAEJvB,EAAM2B,UAAUG,uBAAuBzC,EAAUiC,GACjD,MACJ,IAAK,eACD,GAAGO,EAAgB7B,EAAMuB,GACrB,OAGJ,IAAI2B,GACAlB,MAAOT,EAAO4B,MACdvC,OAAQ,IACRa,QACI2B,IACIjF,MAAOoD,EAAOE,OAAO2B,GAAGjF,OAE5BkF,WACIlF,MAAOoD,EAAOE,OAAO4B,UAAUlF,SAKvCmF,GACApB,OAASlC,EAAMd,OAAOmB,SACtB8B,OACIC,SAAU,QACVC,SAAU,KACVC,MAAQY,MAIhB,EAAApD,EAAAyC,OACIC,IAAKlD,EAAKG,QACVa,KAAMgD,EACNb,QAAS,SAACC,GACN,GAAIA,EAAID,QAAS,CACbzC,EAAM2B,UAAUG,uBAAuBzC,GAAWiC,IAClD,IAAIqB,EAAO3C,EAAM2B,UAAUiB,WAAWvD,GAEtCsD,EAAKL,KAAOK,EAAKL,KAAKO,OAAO,SAAA9B,GAAA,MAAuB,KAAfA,EAAKH,SAC1CZ,EAAM2B,UAAUmB,aAAazD,EAASsD,IACtC,EAAA7C,EAAAiD,QAAOC,MAAM/C,EAAK,mBAAmBgD,MAAM,kBA4DnE,OA/CA1C,EAAKnB,GAAYyB,MAAM0C,MACnBvC,SAAU,MACVwC,MAAOvD,EAAK,mBACZwD,SAAS,WACTC,MAAO,IACPC,MAAO,QACPC,UAAW,YACXC,SAAS,EACTC,OAAQ,SAACC,EAAMxC,EAAQD,GACnB,IAAI0C,KAOJ,OANIC,EAAWjE,EAAMuB,KACjByC,EAAsD,WAA1ChE,EAAM2B,UAAUuC,UAAU9E,IAC9B,cACA,WAGLY,EAAMmE,OAAOC,qBAAqBJ,GACrCK,KAAM,aACNC,YAAa,EACbC,cAAelD,EAAiB3C,KAAK6C,EAAOD,EAAMyC,EAAKtD,QAKnEF,EAAKlB,GAAUsB,WAAY,EAC3BJ,EAAKlB,GAAUuB,OAAS,SAExBL,EAAKlB,GAAUwB,MAAM0C,MACjBvC,SAAU,MACVwC,MAAOvD,EAAK,mBACZwD,SAAS,WACTC,MAAO,IACPE,UAAW,YACXC,SAAS,EACTC,OAAQ,SAACC,EAAMxC,EAAQD,GACnB,IAAI0C,EACwC,WAAxChE,EAAM2B,UAAUuC,UAAU7E,IAClB,iBACA,aAEZ,OAAOW,EAAMmE,OAAOC,qBAAqBJ,GACrCK,KAAM,gBACNC,YAAa,EACbC,cAAelD,EAAiB3C,KAAK6C,EAAOD,EAAMyC,EAAKtD,QAI5DF,EAzNQiE,CAAaxE,EAAOO,EAAKN,GAChCD,EAAMO,KAAKkE,QAAQlE,GACnBD,EAAK6D,QAAUnE,EAAMmE,OAAOO,WAAWpE,EAAK6D,QACzC7D,EAAK6D,SACJnE,EAAMmE,OAAOO,WAAWpE,EAAK6D,QAC7BnE,EAAMmE,OAAOQ,cAAc,YAAY1E,EAAK,oBAC5CD,EAAMmE,OAAOQ,cAAc,eAAe1E,EAAK,qBAM/D,SAA0BD,GAER,WADGA,EAAM2B,UAAUuC,UAAU9E,GACnBY,EAAMmE,OAAOS,mBACjCC,SAAU,EACVC,WAAY,EACZC,QAAS,EACTC,SAAU,IACXhF,EAAMmE,OAAOS,mBACZG,QAAS,EACTC,SAAU,EACVH,SAAU,EACVC,WAAY,IAfRG,CAAiBjF,MAoNtB,IAAMiE,eAAW,SAACjE,EAAMkF,GAC3B,OAAQA,EAAIzD,OAAO0D,SAAShH,OAAO+G,EAAIzD,OAAO2D,OAAOjH,OAA8B,YAAvB6B,EAAMd,OAAOmG,UAClEH,EAAIzD,OAAO0D,SAAShH,OAAO+G,EAAIzD,OAAO2D,OAAOjH,OAA8B,cAAvB6B,EAAMd,OAAOmG,UAG5E,SAASxD,EAAgB7B,EAAMkF,GAC3B,GAAGjB,EAAWjE,EAAMkF,GAAK,CACrB,GAA0B,YAAvBlF,EAAMd,OAAOmG,SAEZ,OADA,EAAAvF,EAAAiD,QAAOuC,QAAQrF,KAAK,mBAAmBgD,MAAM,aACtC,EACL,GAA0B,cAAvBjD,EAAMd,OAAOmG,SAClB,OAAO,GAMZ,IAAM3D,cAAU,SAAC1B,EAAMuF,EAAQ3E,GAElCZ,EAAM2B,UAAUD,UAAU6D,EAAQ3E,GAG9B/D,OAAO2I,eADA,QAAR5E,EACyB,WACpB,MAAO,IAGa","file":"uapbd/material/custmaterial/util/index.f8c7c8d8.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"nc-lightapp-front\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"nc-lightapp-front\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"uapbd/material/custmaterial/util/index\"] = factory(require(\"nc-lightapp-front\"));\n\telse\n\t\troot[\"uapbd/material/custmaterial/util/index\"] = factory(root[\"nc-lightapp-front\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../../../../\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 301);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","export const config={\r\n    queryarea:'10140CMG',\r\n    tablemater : 'custmater',\r\n    tablesub:'subcustom',\r\n    urls : {\r\n        savemater : '/nccloud/uapbd/custmateria/savemater.do',\r\n        querymater : '/nccloud/uapbd/custmateria/querymater.do',\r\n        savesub : '/nccloud/uapbd/custmateria/savesub.do',\r\n        custexist : '/nccloud/uapbd/custmateria/custexist.do',\r\n        vfreedisable:'/nccloud/uapbd/custmateria/vfreedisable.do',\r\n        print:'/nccloud/uapbd/custmateria/print.do'\r\n    }\r\n}","import {config} from '../config/index';\r\nimport { createPage, ajax, base,high,toast ,cacheTools,getBusinessInfo,promptBox} from 'nc-lightapp-front';\r\nconst {queryarea,tablemater,tablesub,urls} = config;\r\nexport let initTemplate = (props,json,inlt) => {\r\n    //let queryInfo = props.search.getQueryInfo(SEARCHAREA);\r\n    props.createUIDom({\r\n            pagecode : props.config.pageCode,\r\n            /*appid : props.config.appid,\r\n            appcode:props.config.funcode,\r\n            templeteid:*/\r\n        },\r\n        (data)=>{\r\n            let meta = data.template;\r\n            meta = modifierMeta(props, meta,json)\r\n            props.meta.setMeta(meta);\r\n            data.button && props.button.setButtons(data.button);\r\n            if(data.button){\r\n                props.button.setButtons(data.button);\r\n                props.button.setPopContent('oprdelbro',json['10140CMG-000024'])/* 国际化处理： 确认要删除该条吗？*/ /* 设置操作列上删除按钮的弹窗提示 */\r\n                props.button.setPopContent('oprdelsubbro',json['10140CMG-000024'])/* 国际化处理： 确认要删除该条吗？*/\r\n            }\r\n            gridStatusChange(props);\r\n        });\r\n}\r\n//表格状态改变监听事件\r\nfunction gridStatusChange(props){\r\n    let gridStatus = props.editTable.getStatus(tablemater);\r\n    gridStatus ==='browse' ?props.button.setButtonsVisible({\r\n        'btnSave':false,\r\n        'btnCancel':false,\r\n        'btnAdd':true,\r\n        'btnEdit':true\r\n    }):props.button.setButtonsVisible({\r\n        'btnAdd':true,\r\n        'btnEdit':false,\r\n        'btnSave':true,\r\n        'btnCancel':true,\r\n    })\r\n}\r\n\r\n//对表格模板进行加工操作\r\nfunction modifierMeta(props,meta,json) {\r\n\r\n    meta[tablemater].showindex = true;\r\n    meta[tablemater].status = 'browse';\r\n\r\n    meta[tablemater].items.forEach((item)=>{\r\n        if(item.attrcode==='materialid'){\r\n            item.isMultiSelectedEnabled = true;\r\n        }\r\n    })\r\n    meta[tablesub].items.forEach((item)=>{\r\n        if(item.attrcode==='subcustom'){\r\n            item.isMultiSelectedEnabled = true;\r\n            item.isShowDisabledData=false;\r\n            item.queryCondition = {'enablestate':'2',isShowDisabledData:false}\r\n        }\r\n    })\r\n\r\n    meta[queryarea].items.forEach((item)=>{\r\n        if(item.attrcode==='materialid.pk_marbasclass'){\r\n            item.isMultiSelectedEnabled = true;\r\n            item.isShowDisabledData = true;\r\n        }\r\n        if(item.attrcode==='materialid'){\r\n            item.isShowDisabledData = true;\r\n        }\r\n    })\r\n\r\n    let tableButtonClick = function (index, record, test, props, key){\r\n        let recordVal = record.values;\r\n        switch (key) {\r\n            // 表格操作按钮\r\n            case 'oprextend':\r\n                setStatus(props,tablemater,'edit');\r\n\r\n                props.editTable.openModel(tablemater, 'edit', record, index,false);\r\n                break;\r\n            case 'opredit':\r\n                setStatus(props,tablemater,'edit');\r\n                //editDisable(props,tablemater);\r\n                //setTimeout(()=>{\r\n                props.editTable.openModel(tablemater, 'edit', record, index,false);\r\n                // },50)\r\n                break;\r\n            case 'oprdel':\r\n                if(checkDelDisable(props,record)){\r\n                    return;\r\n                }\r\n                props.editTable.deleteTableRowsByIndex(tablemater, index);\r\n                break;\r\n            case 'oprdelbro':\r\n                if(checkDelDisable(props,record)){\r\n                    return;\r\n                }\r\n\r\n                let delObj = {\r\n                    rowId: index,\r\n                    status: '3'\r\n                };\r\n\r\n                delObj.values = record.values;\r\n\r\n                let paramData = {\r\n                    'pageid':props.config.pageCode,\r\n                    'model':{\r\n                        areaType: 'table',\r\n                        pageinfo: null,\r\n                        rows: [ delObj ]\r\n                    }\r\n                }\r\n                ajax({\r\n                    url: urls.savemater,\r\n                    data: paramData,\r\n                    success: (res) => {\r\n                        if (res.success) {\r\n                            props.editTable.deleteTableRowsByIndex(tablemater, [index]);\r\n                            let allD = props.editTable.getAllData(tablemater);\r\n                            //Utils.filterDelRows(allD.rows);//过滤清除删除状态的行\r\n                            allD.rows = allD.rows.filter(item => item.status != '3');\r\n                            props.editTable.setTableData(tablemater,allD);\r\n                            toast({title:json['10140CMG-000012'],color:'success'});/* 国际化处理： 删除成功！*/\r\n                        }\r\n                    }\r\n                });\r\n\r\n                break;\r\n            case 'oprdelsub':\r\n                if(checkDelDisable(props,record)){\r\n                    return;\r\n                }\r\n                props.editTable.deleteTableRowsByIndex(tablesub, index);\r\n                break;\r\n            case 'oprdelsubbro':\r\n                if(checkDelDisable(props,record)){\r\n                    return;\r\n                }\r\n\r\n                let delObj2 = {\r\n                    rowId: record.rowid,\r\n                    status: '3',\r\n                    values: {\r\n                        ts: {\r\n                            value: record.values.ts.value\r\n                        },\r\n                        pk_custom: {\r\n                            value: record.values.pk_custom.value\r\n                        }\r\n                    }\r\n                };\r\n\r\n                let paramData2 = {\r\n                    'pageid':props.config.pageCode,\r\n                    'model':{\r\n                        areaType: 'table',\r\n                        pageinfo: null,\r\n                        rows: [ delObj2 ]\r\n                    }\r\n                }\r\n\r\n                ajax({\r\n                    url: urls.savesub,\r\n                    data: paramData2,\r\n                    success: (res) => {\r\n                        if (res.success) {\r\n                            props.editTable.deleteTableRowsByIndex(tablesub, [index]);\r\n                            let allD = props.editTable.getAllData(tablesub);\r\n                            //Utils.filterDelRows(allD.rows);//过滤清除删除状态的行\r\n                            allD.rows = allD.rows.filter(item => item.status != '3');\r\n                            props.editTable.setTableData(tablesub,allD);\r\n                            toast({title:json['10140CMG-000012'],color:'success'});/* 国际化处理： 删除成功！*/\r\n                        }\r\n                    }\r\n                });\r\n\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    //添加操作列\r\n    meta[tablemater].items.push({\r\n        attrcode: 'opr',\r\n        label: json['10140CMG-000026'],/* 国际化处理： 操作*/\r\n        itemtype:'customer',\r\n        width: 120,\r\n        fixed: 'right',\r\n        className: 'table-opr',\r\n        visible: true,\r\n        render: (text, record, index) => {\r\n            let buttonAry = [];\r\n            if(!rowDisable(props,record)){\r\n                buttonAry = props.editTable.getStatus(tablemater) === \"browse\"\r\n                    ? [ 'oprdelbro']\r\n                    : [ \"oprdel\"];\r\n            }\r\n\r\n            return props.button.createOprationButton(buttonAry, {\r\n                area: 'opractions',\r\n                buttonLimit: 2,\r\n                onButtonClick: tableButtonClick.bind(record,index,text,this)\r\n            });\r\n        }\r\n    });\r\n\r\n    meta[tablesub].showindex = true;\r\n    meta[tablesub].status = 'browse';\r\n    //添加操作列\r\n    meta[tablesub].items.push({\r\n        attrcode: 'opr',\r\n        label: json['10140CMG-000026'],/* 国际化处理： 操作*/\r\n        itemtype:'customer',\r\n        width: 150,\r\n        className: 'table-opr',\r\n        visible: true,\r\n        render: (text, record, index) => {\r\n            let buttonAry =\r\n                props.editTable.getStatus(tablesub) === \"browse\"\r\n                    ? [ 'oprdelsubbro']\r\n                    : [ 'oprdelsub'];\r\n\r\n            return props.button.createOprationButton(buttonAry, {\r\n                area: 'oprsubactions',\r\n                buttonLimit: 2,\r\n                onButtonClick: tableButtonClick.bind(record,index,text,this)\r\n            });\r\n        }\r\n    });\r\n    return meta;\r\n}\r\n\r\nexport const rowDisable=(props,row)=>{\r\n    return (row.values.pk_group.value==row.values.pk_org.value&&props.config.nodeType=='ORG_NODE')\r\n        ||(row.values.pk_group.value!=row.values.pk_org.value&&props.config.nodeType=='GROUP_NODE');\r\n}\r\n\r\nfunction checkDelDisable(props,row){\r\n    if(rowDisable(props,row)){\r\n        if(props.config.nodeType=='ORG_NODE'){\r\n            toast({content:json['10140CMG-000006'],color:'warning'});/* 国际化处理： 业务单元节点不允许删除集团数据！*/\r\n            return true;\r\n        }else if(props.config.nodeType=='GROUP_NODE'){\r\n            return false;\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const setStatus=(props,tableId,status)=>{\r\n\r\n    props.editTable.setStatus(tableId,status);\r\n\r\n    if(status=='edit'){\r\n        window.onbeforeunload = () => {\r\n            return '';\r\n        };\r\n    }else{\r\n        window.onbeforeunload = null;\r\n    }\r\n}\r\n\r\n\r\n"],"sourceRoot":""}