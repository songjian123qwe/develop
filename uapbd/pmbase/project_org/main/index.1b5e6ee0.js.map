{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"nc-lightapp-front\"","webpack://[name]/./node_modules/_style-loader@0.18.2@style-loader/lib/addStyles.js","webpack://[name]/./node_modules/_style-loader@0.18.2@style-loader/lib/urls.js","webpack://[name]/./src/uapbd/pmbase/project_base/card/index.js","webpack://[name]/./src/uapbd/pmbase/project_base/list/index.js","webpack://[name]/./src/uapbd/pmbase/project_org/card/index.js","webpack://[name]/./src/uapbd/pmbase/project_org/list/index.js","webpack://[name]/./src/uapbd/pmbase/project_org/main/index.js","webpack://[name]/./src/uapbd/pmbase/project_org/main/router.js","webpack://[name]/external {\"root\":\"React\",\"var\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://[name]/external {\"root\":\"ReactDOM\",\"var\":\"ReactDOM\",\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://[name]/./src/uapbd/pmbase/project_base/assign/AssignModal.js","webpack://[name]/./src/uapbd/public/utils/BDCreateUIDom.js","webpack://[name]/./src/uapbd/pmbase/project_base/assign/OrgSelect.js","webpack://[name]/./src/uapbd/public/uapbdstyle/uapbd_style_common.less?0b4f","webpack://[name]/./src/uapbd/public/uapbdstyle/uapbd_style_common.less","webpack://[name]/./node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","stylesInDom","isOldIE","fn","memo","apply","this","arguments","memoize","document","all","atob","getElement","selector","target","querySelector","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","length","item","domStyle","id","refs","j","parts","push","addStyle","listToStyles","list","newStyles","base","part","css","media","sourceMap","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","undefined","convertToAbsoluteUrls","unescape","encodeURIComponent","JSON","stringify","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","replaceText","textStore","index","replacement","filter","Boolean","join","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","_react","_ncLightappFront","cardCache","getCacheById","updateCache","addCache","getCurrentLastId","getNextId","deleteCacheById","NCAffix","NCBackBtn","NCPopconfirm","NCFormControl","PrintOutput","high","formId","tableId","searchId","printUrl","pk_item","cachKey","Card","props","_classCallCheck","_this2","_possibleConstructorReturn","__proto__","getPrototypeOf","_initialiseProps","state","pk_org","title_code","totalcount","applycount","json","_BDCreateUIDom2","default","pagecode","pagecode_card","domainName","data","langData","template","meta","modifierMeta","setMeta","button","setButtons","toggleShow","Component","getUrlParam","pk","getdata","nodeType","setDefaultValue","l_formstatus","form","getFormStatus","onbeforeunload","pushTo","listUrl","pagecode_list","appcode","status","_this3","_props","cardTable","modal","createCardPagination","cardPagination","createForm","getButtons","createCardTable","createButtonApp","createModal","nodeName","_react2","className","onClick","onReturnClick","area","onButtonClick","buttonClick","handlePageInfoChange","pageInfoClick","dataSource","marginBottom","onAfterEvent","onOrgChange","afterEvent","tableHead","getTableHead","modelSave","showIndex","title","content","beSureBtnClick","delConfirm","_AssignModal2","_extends","ref","assignModal","getData","url","funcode","printFunCode","nodekey","printNodeKey","oids","ids","outputType","ajax","success","res","event","_this4","setAllFormValue","_defineProperty","head","billcode","rows","values","setFormItemsDisabled","billnumberIsEditable","body","setTableData","getFormItemsValue","setDeptPsnRefCond","setFormStatus","setStatus","EmptyAllFormValue","setUrlParam","valid","promptBox","color","cacheTools","saveClick","cancel","addRow","enableAction","disableAction","show","onPrint","onOutput","callback","pks","allData","getAllFormValue","print","toast","setState","printOutput","open","isSwitch","curSels","enablestate","model","getMeta","items","map","attrcode","queryCondition","busifuncode","setEnablestate","stat","setFormItemsValue","display","changedrows","g","pk_dutier","scale","pk_duty_dept_v","pk_vid","pk_currtype","deptValue","cancelBtnClick","rowNum","getNumberOfRows","isChangedRow","element","setValByKeyAndIndex","refpk","refcode","refname","showorder","pk_parti_org_v","pk_parti_org_v.name","split","btn","pk_group","orgvalue","validBodyRepeat","pkMap","Map","row","toString","set","errMsg","includes","validHead","formData","startDate","plan_start_date","finishDate","plan_finish_date","Date","parse","isCheckNow","checkTableRequired","msg","filterEmptyRows","visibleRows","getVisibleRows","CardData","createMasterChildData","validateToSave","pk_value","deleteinfo","ts","nextId","closeModel","getButtonNames","codeId","_data","createBrowseIcons","iconArr","maxDestAreaId","AppCode","TreeRefActionExt","isMultiSelectedEnabled","onlyLeafCanSelect","that","porCol","label","visible","width","itemtype","fixed","render","text","record","btnArray","tableBtnAry","createOprationButton","buttonLimit","tableButtonClick","delRowsByIndex","toggleRowView","openModel","console","log","setButtonDisabled","setButtonVisible","setCardPaginationVisible","hideColByKey","isAdd","showColByKey","headOrg","NCIcon","NCTabs","NCCheckbox","setDefData","getDefData","NCTabPane","deleteUrl","enableUrl","disableUrl","validUrl","List","_this","checked","setPopContent","searchVal","search","setSearchValue","conditions","loadData","checkedRows","table","getCheckedRows","cardUrl","deleteAction","assignAction","field","val","find","Array","isArray","actionType","isChecked","oprtype","firstvalue","secondvalue","OID","getQueryInfo","oid","querycondition","pageInfo","getTablePageInfo","queryAreaCode","querytype","appCode","setAllTableData","createSimpleTable","NCCreateSearch","onChange","onCheckShowDisable","popContainer","onSearchAfterEvent","clickSearchBtn","showCheck","onRowDoubleClick","doubleClick","onRowClick","onSelected","onSelectedAll","pkname","componentInitFinished","gridId","orgType","col","pagination","cursor","getAllSearchData","_this5","deleteTableRowsByIndex","getAllTableData","numberindex","action","v","e","params","refreshAction","config","allpks","pageid","isEnable","some","arr","isDisable","delete","assig","unassig","enable","disable","createPage","initTemplate","appid","CardModi","billinfo","billtype","headcode","bodycode","Cardgrp","Listgrp","_list2","routers","RenderRouter","routes","asyncComponent","Promise","resolve","then","path","component","exact","NCButton","NCModal","AssignModal","loadSaleInfoGridData","loadSubGridData","subGrid5","custsaleForm","loadFinaceInfoGridData","subGrid4","custfinanceForm","loadCreDitCtlInfoGridData","subGrid6","creditctlForm","modalDropup","size","backdrop","isAssign","pk_project","flag","orgSelect","reset","targetOrgIds","selectData","datas","projectpks","pkcustList","message","modalCfg","onHide","Header","closeButton","Title","Body","_OrgSelect2","Footer","onsubmit","pageCfg","langCfg","count","hander","templateData","inlt","newLangCfg","MultiInit","getMultiLang","createUIDom","NCTable","NCTree","NCCol","NCRow","OrgSelect","onExpandFn","tree","expandedKeys","main","defNodeCfg","renderNode","renderfn","disableCheckbox","nodeData","orgclazz","loopRender","nodecfg","children","NCTreeNode","isExpand","renderFileTreeTitle","isLeaf","checkable","defaultExpandAll","checkStrictly","onCheck","selectedKeys","node","selectedData","code","concat","rowKey","bodyStyle","overflow-y","height","columns","dataIndex","orgtypeIDs","isCludeGlobalAndGroupVO","isProject_grp","treedata","selectDatas","checkedKeys","marginTop","padding","background","marginLeft","fieldname","closeIcon","class","openIcon","onExpand","overflow","scroll","y","locals","useSourceMap","cssMapping","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules"],"mappings":"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","file":"uapbd/pmbase/project_org/main/index.1b5e6ee0.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"nc-lightapp-front\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"nc-lightapp-front\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"uapbd/pmbase/project_org/main/index\"] = factory(require(\"nc-lightapp-front\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"uapbd/pmbase/project_org/main/index\"] = factory(root[\"nc-lightapp-front\"], root[\"React\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../../../../\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 178);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","//主子表卡片\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createPage, ajax, base, toast,cacheTools,print,high,getBusinessInfo,promptBox,getMultiLang,cardCache} from 'nc-lightapp-front';\r\nlet { getCacheById, updateCache ,addCache,getCurrentLastId ,getNextId, deleteCacheById } = cardCache;\r\nconst { NCAffix,NCPopconfirm,NCFormControl,NCBackBtn} = base;\r\nconst {PrintOutput} = high;\r\nimport AssignModal from '../assign/AssignModal';\r\nimport createUIDom from '../../../public/utils/BDCreateUIDom';\r\n\r\nconst formId = 'head';                      //表头id\r\nconst tableId = 'bodyvos';                  //子表id\r\nconst pageId = '10140PRJG_card';            //pagecode\r\nconst searchId = 'search';                  //查询区id\r\nconst appId ='10140PRJG';        //按钮注册id\r\nconst queryCardUrl = '/nccloud/uapbd/pmbase/ProjectCardQuery.do';   //卡片查询url\r\nconst saveUrl = '/nccloud/uapbd/pmbase/ProjectSave.do';             //新增保存\r\nconst updateUrl = '/nccloud/uapbd/pmbase/ProjectUpdate.do';         //修改保存\r\nconst deleteUrl = '/nccloud/uapbd/pmbase/ProjectDelete.do';         //删除\r\nconst qryUserInfoUrl = '/nccloud/uapbd/sminfo/PaymentLoginUserInfoQuery.do'//登录用户信息\r\nconst enableUrl = '/nccloud/uapbd/pmbase/ProjectEnable.do';         //启用\r\nconst disableUrl = '/nccloud/uapbd/pmbase/ProjectDisable.do';       //停用\r\nconst printUrl = '/nccloud/uapbd/pmbase/ProjectPrint.do';       //打印\r\nconst addUrl = '/nccloud/uapbd/pmbase/ProjectAdd.do';           //新增\r\nconst vaidUrl = '/nccloud/uapbd/pmbase/ProjectValid.do';        //校验\r\nconst pk_item = 'pk_project';               //单据主键--用于卡片查询刷新\r\nconst titleCode = 'project_code';           //单据编码--用于卡片表头显示\r\n// const titleName = this.state.json['10140PRJB-000011'];\t\t\t\t\t//节点名称/* 国际化处理： 项目*/\r\n//const tableBtnAry = ['delline','detail','spread'];\t\t//表格列操作按钮\r\nconst cachKey = '10140PRJG_list';//缓存的标识\r\n\r\nlet tableBtnAry =(props)=>{\r\n    return props.getUrlParam('status') === 'browse'\r\n        ? [ 'detail' ]: ['insertline','delline','spread'];\r\n}\r\n\r\n//\r\n// let initTemplate =(props)=>{\r\n//\r\n// }\r\n\r\n\r\nclass Card extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.formId = formId;\r\n        this.searchId = searchId;\r\n        this.tableId = tableId;\r\n        this.state = {\r\n            pk_org : '',\r\n            title_code : '',\r\n            totalcount : 0,\r\n            applycount : 0,\r\n            json:{}\t\r\n        }\r\n        createUIDom(props)(\r\n            {\r\n                pagecode: props.pagecode_card//,//页面id\r\n                // appcode: props.appcode//注册按钮的id\r\n            },\r\n            {\r\n                moduleId: \"10140PRJB\",domainName: 'uapbd'\r\n            },\r\n            (data,langData)=>{\r\n                if(langData){\r\n                    this.state.json = langData;\r\n                }\r\n                if(data){\r\n                    if(data.template){\r\n                        let meta = data.template;\r\n                        this.modifierMeta(props, meta)\r\n                        props.meta.setMeta(meta);\r\n                        // let status = props.getUrlParam('status');\r\n                        // if(status && status == 'add'){\r\n                        // \tprops.cardTable.addRow(tableId);\r\n                        // }\r\n                    }\r\n                    if(data.button){\r\n                        let button = data.button;\r\n                        props.button.setButtons(button);\r\n                        this.toggleShow(props);\r\n                    }\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    componentDidMount() {\r\n        // toggleShow(this.props);\r\n\r\n        let status = this.props.getUrlParam('status');\r\n        if(status != \"add\"){\r\n            let\tpk = this.props.getUrlParam('id');\r\n            if(pk && pk != 'undefined'){\r\n                this.getdata(pk);\r\n            }\r\n        }\r\n        else{\r\n            let data = {\r\n                nodeType:this.props.nodeType\r\n            }\r\n            this.setDefaultValue(data);\r\n        }\r\n        this.toggleShow(this.props);\r\n    }\r\n\r\n\r\n    componentDidUpdate(){\r\n        let l_formstatus = this.props.form.getFormStatus(formId);\r\n        if(l_formstatus != 'add' && l_formstatus != \"edit\"){\r\n            window.onbeforeunload = null;\r\n        }\r\n        else{\r\n            window.onbeforeunload = () => {//编辑态关闭页签或浏览器的提示\r\n                return '';\r\n            };\r\n        }\r\n    }\r\n\r\n    setDefaultValue = (data) =>{\r\n        // this.props.form.setFormItemsValue(this.formId,{'bill_status':{value:'0',display:'自由态'}});\r\n        // if(this.props.nodeType == 'group'){\r\n        //    ajax({\r\n        //        url:qryUserInfoUrl,\r\n        //        success:(res)=>{\r\n        //            this.props.form.setFormItemsValue(this.formId,{'pk_org':\r\n        //                    {\r\n        //                        value:res.data.group.pk_group,\r\n        //                        display:res.data.group.name\r\n        //                    }});\r\n        //        }\r\n        //    })\r\n        // }\r\n        // else if(this.props.nodeType == 'global'){\r\n        //\r\n        //    this.props.form.setFormItemsValue(this.formId,{'pk_org':\r\n        //            {\r\n        //                value:'GLOBLE00000000000000',\r\n        //                display:'全局'\r\n        //            }});\r\n        // }\r\n\r\n        ajax({\r\n            url:addUrl,\r\n            data,\r\n            success:(res)=>{\r\n                if(res){\r\n\r\n                    if(!(data.event && data.event == 'cancel')){\r\n\r\n                        this.props.form.setAllFormValue({[this.formId]:res.data[\"10140PRJG_card\"].head[this.formId]});\r\n                        \r\n                        let billcode = res.data[\"10140PRJG_card\"].head[this.formId].rows[0].values[titleCode].value;\r\n\r\n                        if(billcode && billcode != ''){\r\n                            //是否可编辑\r\n                            this.props.form.setFormItemsDisabled(this.formId,{[titleCode]:res.data.billnumberIsEditable=='Y'?false:true});\r\n                        }\r\n                        if(res.data[\"10140PRJG_card\"].body){\r\n                            this.props.cardTable.setTableData(this.tableId, res.data[\"10140PRJG_card\"].body[this.tableId]);\r\n                        }else{\r\n                            this.props.cardTable.setTableData(this.tableId, []);\r\n                        }\r\n                        // translateSwitch();\r\n                        // this.props.form.setFormItemsValue(this.formId,{'enablestate':{value:true,display:'已启用'}});\r\n                        // 项目组织节点，责任组织由项目组织带出,修改态不能编辑项目组织，所以取管理组织值，不触发编辑后事件,这先加上处理，之后可以看看改成编辑前事件\r\n                        if(this.props.nodeType == 'org'){\r\n                            let pk_org = this.props.form.getFormItemsValue(this.formId,'pk_org').value;\r\n                            this.setDeptPsnRefCond(this.props,pk_org);\r\n\r\n                            //项目组织节点，没有选项目组织的时候，表头不可编辑\r\n                            if(pk_org){\r\n                                this.props.form.setFormStatus(formId,this.props.getUrlParam('status'))\r\n                                this.props.cardTable.setStatus(tableId, this.props.getUrlParam('status'));\r\n                            }else{\r\n                                this.props.form.setFormStatus(formId, 'browse');\r\n                                this.props.cardTable.setStatus(tableId, 'browse');\r\n                            }                        \r\n                        }\r\n                    }\r\n                    this.toggleShow(this.props);\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    buttonClick =(props, id)=>{\r\n\r\n        let _this = this;\r\n        switch (id) {\r\n            case 'add':\r\n                props.form.EmptyAllFormValue(\"org_select\")\r\n                props.form.EmptyAllFormValue(this.formId)\r\n                props.cardTable.setTableData(this.tableId, { rows: [] })\r\n                // props.linkTo(props.cardUrl, {\r\n                //     appcode:props.appcode,\r\n                //     pagecode:props.pagecode_card,\r\n                //     status: 'add'\r\n                // })\r\n                props.setUrlParam({\r\n                    appcode:props.appcode,\r\n                    pagecode:props.pagecode_card,\r\n                    status: 'add'\r\n                });\r\n                let data = {\r\n                    nodeType:props.nodeType\r\n                }\r\n                this.setDefaultValue(data);\r\n                this.toggleShow(props)\r\n                break\r\n            case 'edit':\r\n                this.valid(props,()=>{\r\n                    // props.linkTo(props.cardUrl, {\r\n                    //     appcode:props.appcode,\r\n                    //     pagecode:props.pagecode_card,\r\n                    //     status: 'edit',\r\n                    //     id: props.getUrlParam('id')\r\n                    // })\r\n                    props.setUrlParam({\r\n                        appcode:props.appcode,\r\n                        pagecode:props.pagecode_card,\r\n                        status: 'edit',\r\n                        id: props.getUrlParam('id')\r\n                    });\r\n                    this.toggleShow(props);\r\n                })\r\n                break;\r\n            case 'delete':\r\n                this.valid(props,()=>{\r\n                        promptBox({\r\n                            color:\"warning\",title: this.state.json['10140PRJB-000010'],/* 国际化处理： 删除*/\r\n                            content: this.state.json['10140PRJB-000013'],/* 国际化处理： 确定要删除吗？*/\r\n                            beSureBtnClick: this.delConfirm.bind(this)\r\n                    })})\r\n                break\r\n            case 'back':\r\n                props.pushTo(props.listUrl, {\r\n                    appcode:props.appcode,\r\n                    pagecode:props.pagecode_list,\r\n                    status: 'browse'\r\n                });\r\n                cacheTools.remove('preid');\r\n                break\r\n            case 'save':\r\n                this.saveClick();\r\n                break\r\n            case 'cancel':\r\n                promptBox({\r\n                    color:\"warning\",\r\n                    title: this.state.json['10140PRJB-000012'],/* 国际化处理： 取消*/\r\n                    content: this.state.json['10140PRJB-000014'],/* 国际化处理： 确定要取消吗？*/\r\n                    beSureBtnClick: this.cancel.bind(this,props)\r\n                });\r\n                break\r\n            case 'addline':\r\n                props.cardTable.addRow(this.tableId);\r\n                break\r\n            case 'refresh':\r\n                // props.linkTo(props.cardUrl, {\r\n                //     appcode:props.appcode,\r\n                //     pagecode:props.pagecode_card,\r\n                //     status:props.getUrlParam('status'),\r\n                //     id:props.getUrlParam('id')\r\n                // })\r\n                props.setUrlParam({\r\n                    appcode:props.appcode,\r\n                    pagecode:props.pagecode_card,\r\n                    status:props.getUrlParam('status'),\r\n                    id:props.getUrlParam('id')\r\n                });\r\n                this.getdata(props.getUrlParam('id'),'refresh');\r\n                break;\r\n            case 'enable':\r\n                this.valid(props,()=>{\r\n                    promptBox({\r\n                        color:\"warning\",\r\n                        title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140PRJB-000015'],/* 国际化处理： 确认启用？*/\r\n                        beSureBtnClick: this.enableAction.bind(this)\r\n                    });\r\n                })\r\n                break;\r\n            case 'enable1':\r\n                this.valid(props,()=>{\r\n                    promptBox({\r\n                        color:\"warning\",\r\n                        title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140PRJB-000015'],/* 国际化处理： 确认启用？*/\r\n                        beSureBtnClick: this.enableAction.bind(this)\r\n                    });\r\n                })\r\n                break;\r\n            case 'disable':\r\n                this.valid(props,()=>{\r\n                    promptBox({\r\n                        color:\"warning\",\r\n                        title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140PRJB-000016'],/* 国际化处理： 确认停用？*/\r\n                        beSureBtnClick: this.disableAction.bind(this)\r\n                    });\r\n                })\r\n                break;\r\n            case 'assig':\r\n                this.valid(props,()=>{this.assignModal.show('assign');})\r\n                break;\r\n            case 'assig1':\r\n                this.valid(props,()=>{this.assignModal.show('assign');})\r\n            case 'unassig':\r\n                this.valid(props,()=>{this.assignModal.show('unassig');})\r\n                break;\r\n            case 'printGrp':\r\n                this.onPrint();\r\n                break;\r\n            case 'print':\r\n                this.onPrint();\r\n                break;\r\n            case 'output':\r\n                this.onOutput();\r\n                break;\r\n            default:\r\n                break\r\n        }\r\n    }\r\n\r\n    \r\n    cancel=(props)=>{\r\n\r\n        let pk = this.props.getUrlParam('id');\r\n        if(!pk){\r\n            pk = getCurrentLastId(cachKey);\r\n        }\r\n        props.setUrlParam({\r\n            appcode:props.appcode,\r\n            pagecode:props.pagecode_card,\r\n            status: 'browse',\r\n            id: pk \r\n        });\r\n        this.getdata(pk);\r\n        this.toggleShow(this.props);\r\n\r\n        // debugger\r\n        // if (props.getUrlParam('status') === 'add') {\r\n\r\n        //     let billcode = this.props.form.getFormItemsValue(this.formId,titleCode).value;\r\n\r\n        //     let data ={\r\n        //         event:'cancel',\r\n        //         [titleCode]:billcode==null?null:billcode\r\n        //     }\r\n\r\n        //     this.setDefaultValue(data);\r\n\r\n        //     if(cacheTools.get(\"preid\")){\r\n\r\n        //         props.form.cancel(this.formId);\r\n        //         props.cardTable.resetTableData(this.tableId);\r\n        //         // props.linkTo(props.cardUrl, {\r\n        //         //     appcode:props.appcode,\r\n        //         //     pagecode:props.pagecode_card,\r\n        //         //     status: 'browse',\r\n        //         //     id: cacheTools.get(\"preid\")\r\n        //         // })\r\n        //         props.setUrlParam({\r\n        //             appcode:props.appcode,\r\n        //             pagecode:props.pagecode_card,\r\n        //             status: 'browse',\r\n        //             id: cacheTools.get(\"preid\")\r\n        //         });\r\n        //         this.toggleShow(this.props);\r\n        //     }\r\n        //     else{\r\n        //         props.pushTo(props.listUrl, {\r\n        //             appcode:props.appcode,\r\n        //             pagecode:props.pagecode_list,\r\n        //             status: 'browse'\r\n        //         })\r\n        //     }\r\n        // }\r\n        // if ((props.getUrlParam('status') === 'edit')) {\r\n        //     // props.form.cancel(this.formId);\r\n        //     // props.cardTable.resetTableData(this.tableId);//新增的子表数据依旧存在\r\n        //     // props.linkTo(props.cardUrl, {\r\n        //     //     appcode:props.appcode,\r\n        //     //     pagecode:props.pagecode_card,\r\n        //     //     status: 'browse',\r\n        //     //     id: props.getUrlParam('id')\r\n        //     // })\r\n        //     let\tpk = this.props.getUrlParam('id');\r\n        //     if(pk && pk != 'undefined'){\r\n        //         this.getdata(pk);\r\n        //     }\r\n        //     props.setUrlParam({\r\n        //         appcode:props.appcode,\r\n        //         pagecode:props.pagecode_card,\r\n        //         status: 'browse',\r\n        //         id: props.getUrlParam('id')\r\n        //     });\r\n        // }\r\n        // this.toggleShow(this.props);\r\n    }\r\n\r\n    valid=(props,callback)=>{\r\n        let data = {\r\n            pks:[props.form.getFormItemsValue(formId,pk_item).value],\r\n            nodeType:props.nodeType\r\n        }\r\n        ajax({\r\n            url:vaidUrl,\r\n            data,\r\n            success:(res)=>{\r\n                callback && callback();\r\n            }\r\n        })\r\n    }\r\n    /**\r\n     * 返回按钮操作\r\n     */\r\n    onReturnClick(){\r\n        this.props.pushTo(this.props.listUrl, {\r\n            pagecode: this.props.pagecode_list,\r\n            appcode: this.props.appcode,\r\n            status: 'browse'\r\n        })\r\n    }\r\n    //打印\r\n    onPrint=()=>{\r\n\r\n        let allData = this.props.form.getAllFormValue(formId);\r\n\r\n        if(allData.length === 0){\r\n            toast({content:this.state.json['10140PRJB-000017'],color:'warning'});/* 国际化处理： 无可打印数据*/\r\n            return;\r\n        }\r\n\r\n        let pks = [];\r\n\r\n        allData.rows.forEach((item,key)=>{\r\n            pks.push(item.values[pk_item].value);\r\n        });\r\n        print(\r\n            'pdf',\r\n            printUrl,\r\n            {\r\n                funcode:this.props.printFunCode,//小应用编码\r\n                nodekey:this.props.printNodeKey,//模板节点编码\r\n                oids:pks\r\n            }\r\n        )\r\n    }\r\n    //输出\r\n    onOutput=()=>{\r\n\r\n        let allData = this.props.form.getAllFormValue(formId);\r\n        if(allData.length === 0){\r\n            toast({content:this.state.json['10140PRJB-000018'],color:'warning'});/* 国际化处理： 无可输出的数据*/\r\n            return;\r\n        }\r\n        let pks = [];\r\n\r\n        allData.rows.forEach((item,key)=>{\r\n            pks.push(item.values[pk_item].value);\r\n        });\r\n        this.setState({\r\n            ids : pks\r\n        },this.refs.printOutput.open());\r\n    }\r\n\r\n    //启用\r\n    enableAction=(isSwitch)=>{\r\n\r\n        let curSels = this.props.form.getAllFormValue(formId).rows[0];\r\n\r\n        let rows = [];\r\n        //获取到的是新状态，所以修改回原状态，做后台更新用\r\n        if(isSwitch){\r\n            curSels.values.enablestate.value = curSels.values.enablestate.value==true?'3':'2';\r\n        }else{\r\n            curSels.values.enablestate.value = curSels.values.enablestate.value==true?'2':'3';\r\n        }\r\n\r\n        rows.push(curSels);\r\n\r\n        let data= {\r\n            model:{rows:rows}\r\n        }\r\n\r\n        ajax({\r\n            url:enableUrl,\r\n            data:data,\r\n            success: (res) => {\r\n                toast({title : this.state.json['10140PRJB-000019'],color : 'success'});/* 国际化处理： 启用成功*/\r\n                this.getdata(this.props.getUrlParam('id'));\r\n            }\r\n        })\r\n    }\r\n    //停用\r\n    disableAction=(isSwitch)=>{\r\n        let curSels = this.props.form.getAllFormValue(formId).rows[0];\r\n\r\n        let rows = [];\r\n        //获取到的是新状态，所以修改回原状态，做后台更新用，开关事件，修改了启用状态\r\n        if(isSwitch){\r\n            curSels.values.enablestate.value = curSels.values.enablestate.value==true?'3':'2';\r\n        }else{\r\n            curSels.values.enablestate.value = curSels.values.enablestate.value==true?'2':'3';\r\n        }\r\n\r\n        rows.push(curSels);\r\n\r\n        let data= {\r\n            model:{rows:rows}\r\n        }\r\n\r\n        ajax({\r\n            url:disableUrl,\r\n            data:data,\r\n            success: (res) => {\r\n                toast({title : this.state.json['10140PRJB-000020'],color : 'success'});/* 国际化处理： 停用成功*/\r\n                this.getdata(this.props.getUrlParam('id'));\r\n            }\r\n        })\r\n    }\r\n\r\n    pageInfoClick=(props, pk)=>{\r\n\r\n        this.getdata(pk);\r\n\r\n        // let data = {\r\n        //     \"pk\": pk,\r\n        //     \"pageid\": props.pagecode_card\r\n        // };\r\n        // ajax({\r\n        //     url: queryCardUrl,\r\n        //     data: data,\r\n        //     success: (res) =>{\r\n        //         if (res.data.head) {\r\n\r\n        //             props.form.setAllFormValue({ [formId]: res.data.head[formId] });\r\n        //             props.setUrlParam(pk)//动态修改地址栏中的id的值\r\n        //         }\r\n        //         if (res.data.body) {\r\n        //             props.cardTable.setTableData(tableId, res.data.body[tableId]);\r\n        //         }\r\n        //     }\r\n        // });\r\n    }\r\n\r\n    setDeptPsnRefCond=(props,pk_org)=>{\r\n\r\n        let meta = props.meta.getMeta();\r\n\r\n        if(meta && meta != null && meta['head'] && meta['head'] != null){\r\n            meta['head'].items = meta['head'].items.map((item) => {\r\n                //责任部门参照需要将责任组织pk_org作为过滤条件\r\n                if (item.attrcode == 'pk_duty_dept_v') {\r\n                    item.queryCondition = () => {\r\n                        return {\r\n                            pk_org: pk_org,\r\n                            busifuncode: 'it',\r\n                        }\r\n                    }\r\n                }\r\n                //责任人参照需要将责任组织pk_org作为过滤条件\r\n                if (item.attrcode == 'pk_dutier') {\r\n                    item.queryCondition = {\r\n                        pk_org: pk_org,\r\n                        busifuncode: 'it'\r\n                    }\r\n                }\r\n                return item;\r\n            })\r\n            props.meta.setMeta(meta);\r\n        }\r\n    }\r\n\r\n    setEnablestate = (stat)=>{\r\n        this.props.form.setFormItemsValue(this.formId,{'enablestate':{value:stat,display:(stat == true?this.state.json['10140PRJB-000021']:this.state.json['10140PRJB-000022'])}});/* 国际化处理： 已启用,已停用*/\r\n    }\r\n\r\n    afterEvent =(props, moduleId, key,value, changedrows, i, s, g)=>{\r\n\r\n        //选择某一参照后需将参照值作为关联参照的过滤条件\r\n        if (key === 'pk_duty_org_v' && value.value !== '' && value.value != undefined && value.value != null) {\r\n            //选择责任组织后清空责任人和责任部门值\r\n            props.form.setFormItemsValue(formId,{'pk_dutier':{value:'',scale: \"-1\",display:''},'pk_duty_dept_v':{value:'',scale: \"-1\",display:''}});\r\n            let pk_vid = props.form.getFormItemsValue(formId, 'pk_duty_org_v');\r\n            let pk_org;\r\n            //根据责任组织pk_vid获取其pk_org\r\n            ajax({\r\n                url: '/nccloud/uapbd/pmbase/ProjectItemChangeQuery.do',\r\n                data: {\r\n                    item: 'pk_duty_org_v',\r\n                    pk: pk_vid.value\r\n                },\r\n                success: (res) => {\r\n                    pk_org = res.data['pk_itemorg']\r\n                    this.setDeptPsnRefCond(props,pk_org)\r\n                    // 设置币种\r\n                    let pk_currtype = res.data['PK_CURRTYPE']\r\n                    this.props.form.setFormItemsValue(formId,{'pk_currtype':{value:pk_currtype,display:''}})\r\n                }\r\n            });\r\n        }\r\n        //选择完责任人后,若责任部门为空则自动填充责任部门\r\n        if (key === 'pk_dutier') {\r\n            let pk_duty_dept_v = props.form.getFormItemsValue(formId, 'pk_duty_dept_v');\r\n            let deptValue = pk_duty_dept_v.value;\r\n            if ((deptValue === ''||deptValue==null||deptValue==undefined) && value.value !== '' && value.value != undefined && value.value != null) {\r\n                ajax({\r\n                    url: '/nccloud/uapbd/pmbase/ProjectItemChangeQuery.do',\r\n                    data: {\r\n                        item: 'pk_psndoc',\r\n                        pk: value.value\r\n                    },\r\n                    success: (res) => {\r\n                        props.form.setFormItemsValue(formId, { 'pk_duty_dept_v': { display: res.data['name'], scale: \"-1\", value: res.data['pk_vid'] } })\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n\r\n        }\r\n        if(key === 'enablestate' && props.form.getFormStatus(moduleId) == 'browse'){\r\n\r\n            this.valid(props,()=>{\r\n                if (value.value == true || value.value == '2') {\r\n                    promptBox({\r\n                        color:\"warning\",\r\n                        title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140PRJB-000015'],/* 国际化处理： 确认启用？*/\r\n                        beSureBtnClick: this.enableAction.bind(this,true),\r\n                        cancelBtnClick: this.setEnablestate.bind(this,false)\r\n                    });\r\n                }\r\n                else {\r\n                    promptBox({\r\n                        color:\"warning\",\r\n                        title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140PRJB-000016'],/* 国际化处理： 确认停用？*/\r\n                        beSureBtnClick: this.disableAction.bind(this,true),\r\n                        cancelBtnClick: this.setEnablestate.bind(this,true)\r\n                    });\r\n                }})\r\n        }\r\n\r\n        if(key === 'pk_parti_org_v' && s.status === '2'){\r\n            let rowNum = props.cardTable.getNumberOfRows(this.tableId)-1;\r\n            let isChangedRow = true;\r\n            // props.cardTable.delRowsByIndex(moduleId, rowNum);\r\n            //子表编辑弹出侧拉框，组织参照没有更新成多选，此处做个判断先，之后提问题给平台\r\n            if(value.length != undefined){\r\n                \r\n                value.forEach(element => {\r\n                    if(isChangedRow){\r\n                        props.cardTable.setValByKeyAndIndex(this.tableId,i,'pk_parti_org_v',{value: element.refpk, display: element.refcode});\r\n                        props.cardTable.setValByKeyAndIndex(this.tableId,i,'pk_parti_org_v.name',{value: element.refname, display: element.refname});\r\n                        isChangedRow = false;\r\n                    }\r\n                    else{\r\n                        props.cardTable.addRow(this.tableId,rowNum,{'showorder':{display:'',value:rowNum+1+''},'pk_parti_org_v':{display:element.refcode,value:element.refpk},'pk_parti_org_v.name':{display:element.refname,value:element.refname}},false);\r\n                    }\r\n                });\r\n            }\r\n            else{\r\n                // props.cardTable.addRow(this.tableId,rowNum,{'pk_parti_org_v':{display:value.refcode,value:value.refpk},'pk_parti_org_v.name':{display:value.refname,value:value.refname}},false);\r\n                props.cardTable.setValByKeyAndIndex(this.tableId,i,'pk_parti_org_v.name',{value: value.refname, display: value.refname});\r\n            }   \r\n        }\r\n        if(key === 'pk_parti_org_v' && s.status === '1'){\r\n            // props.cardTable.delRowsByIndex(moduleId, i);\r\n            var ss = s.values['pk_parti_org_v'].display.split(\",\");\r\n            var sProjectB = s.values['pk_project_b'].value;\r\n            let isChangedRow = true;\r\n            //先默认带备注，模板配其他字段后需要继承时可以用循环赋值，以后再处理！！！！！\r\n            let rowNum = props.cardTable.getNumberOfRows(this.tableId);\r\n            //props.cardTable.setValByKeyAndRowId(moduleId,rowNum,'item',{value: '' })\r\n            if(value.length != undefined){\r\n                value.forEach(element => {\r\n                    \r\n                    if(isChangedRow){\r\n                        props.cardTable.setValByKeyAndIndex(this.tableId,i,'pk_parti_org_v',{value: element.refpk, display: element.refcode});\r\n                        props.cardTable.setValByKeyAndIndex(this.tableId,i,'pk_parti_org_v.name',{value: element.refname, display: element.refname});\r\n                        isChangedRow = false;\r\n                    }\r\n                    else{\r\n                        // if(element.refcode == null){\r\n                        //     element.refcode = ss[0]\r\n                        // }\r\n                        props.cardTable.addRow(this.tableId,rowNum,{'showorder':{display:'',value:rowNum+1+''},'pk_parti_org_v':{display:element.refcode,value:element.refpk},'pk_parti_org_v.name':{display:element.refname,value:element.refname}},false);\r\n                    \r\n                    }\r\n                });\r\n            }\r\n            else{\r\n                // props.cardTable.addRow(this.tableId,rowNum,{'pk_parti_org_v':{display:value.refcode,value:value.refpk},'pk_parti_org_v.name':{display:value.refname,value:value.refname}},false);\r\n                props.cardTable.setValByKeyAndIndex(this.tableId,i,'pk_parti_org_v.name',{value: value.refname, display: value.refname});\r\n            }       \r\n        }\r\n    }\r\n\r\n    //通过单据id查询单据信息\r\n    getdata = (pk,btn) =>{\r\n        debugger;\r\n        if(pk == undefined || pk == ''){\r\n            // toast({ 'color':'danger','content':this.state.json['10140PRJB-000023']});/* 国际化处理： 卡片数据异常，返回列表后重新进入！*/\r\n            //清除上个界面的所有的值\r\n            this.props.form.EmptyAllFormValue(formId);\r\n            this.props.cardTable.setTableData(tableId,{rows: []});\r\n            return;\r\n        }\r\n        let data = {pk};\r\n        ajax({\r\n            url: queryCardUrl,\r\n            data,\r\n            success: (res) => {\r\n                if(res.data==undefined){\r\n                    toast({ 'color':'danger','content':this.state.json['10140PRJB-000024']});/* 国际化处理： 数据不存在或已删除！请返回列表*/\r\n                    return; \r\n                }\r\n                if (res.data.head) {\r\n                    res.data.head.head.rows[0].values.enablestate.value=res.data.head.head.rows[0].values.enablestate.value === '2'?true:false;\r\n                    // this.props.form.setFormItemsValue('org_select','pk_org',res.data.head.head.rows[0].values.pk_org);\r\n                    this.props.form.setAllFormValue({ [this.formId]: res.data.head[this.formId]});\r\n                    let title_code = res.data.head[this.formId].rows[0].values[titleCode].value;\r\n                    this.setState({title_code});\r\n\r\n                    // 设置项目组织默认值\r\n                    if(this.props.nodeType == 'org'){\r\n                        let pk_org = this.props.form.getFormItemsValue(this.formId,'pk_org');\r\n                        let pk_group = this.props.form.getFormItemsValue(this.formId,'pk_group');\r\n                        // let orgvalue= {'pk_org':{pk_org}};\r\n                        let orgvalue= {pk_org};\r\n                        if(pk_org && pk_org.value !=pk_group.value&&pk_org.value!='GLOBLE00000000000000'){\r\n                            this.props.form.setFormItemsValue('org_select',orgvalue);\r\n                        }\r\n                    }else{\r\n                        this.props.form.setFormItemsValue('org_select',{});\r\n                    }\r\n                    this.props.setUrlParam(pk)//动态修改地址栏中的id的值\r\n                }\r\n                if (res.data.body) {\r\n                    this.props.cardTable.setTableData(this.tableId, res.data.body[this.tableId]);\r\n                    // let totalcount = this.props.cardTable.getNumberOfRows(this.tableId);\r\n                    // let arr = this.props.cardTable.getAllRows(this.tableId);\r\n                    // let applycount = 0;\r\n                    // arr.map((item)=>{\r\n                    // \tapplycount += parseInt(item.values.pk_project.value);\r\n                    // })\r\n                    // this.setState({applycount});\r\n                    // this.setState({totalcount});\r\n                }else{\r\n                    this.props.cardTable.setTableData(this.tableId, {rows: []});\r\n                }\r\n                if(btn == 'refresh'){\r\n                    toast({title : this.state.json['10140PRJB-000025'],color : 'success'});/* 国际化处理： 刷新成功*/\r\n                }\r\n                this.toggleShow(this.props);\r\n            }\r\n        });\r\n    }\r\n\r\n    validBodyRepeat=(rows)=> {\r\n\r\n        if(!rows || rows.length == 0)\r\n            return true;\r\n\r\n        let pkMap = new Map();\r\n\r\n        if(rows && rows.length>0){\r\n            let i = 1;\r\n            rows.forEach((row,key)=>{\r\n                let pk = row.values.pk_parti_org_v.value;\r\n                let rowNum = pkMap.get(pk);\r\n                if(!rowNum || rowNum == null){\r\n                    rowNum = i.toString();\r\n                    i++;\r\n                }else{\r\n                    rowNum = `${rowNum},${i}`;\r\n                    i++;\r\n                }\r\n                pkMap.set(pk,rowNum);\r\n            });\r\n        }\r\n        let errMsg = this.state.json['10140PRJB-000026'];/* 国际化处理： 输入错误提示：项目-参与组织主键行  */\r\n        pkMap.forEach((value,key, map) => {\r\n            if(value.includes(',')){\r\n                errMsg = errMsg + '['+ value + this.state.json['10140PRJB-000027']/* 国际化处理： ] 不能重复*/\r\n            }\r\n        });\r\n        if(errMsg != this.state.json['10140PRJB-000026']){/* 国际化处理： 输入错误提示：项目-参与组织主键行  */\r\n            toast({content : errMsg ,color : 'danger'});\r\n            return false;\r\n        }\r\n        return true;\r\n    } \r\n\r\n    // 表头信息校验\r\n    validHead=(formData)=>{\r\n\r\n        if(formData){\r\n            let row = formData.rows[0];\r\n\r\n            if(row){\r\n                let startDate = row.values.plan_start_date;\r\n                let finishDate = row.values.plan_finish_date;\r\n                if(!(startDate && startDate.value != null))\r\n                    return this.state.json['10140PRJB-000028'];/* 国际化处理： 计划开始日期不能为空*/\r\n                if(!(finishDate && finishDate.value != null))\r\n                    return this.state.json['10140PRJB-000029'];/* 国际化处理： 计划完成日期不能为空*/\r\n                if(Date.parse(new Date(startDate.value))>Date.parse(new Date(finishDate.value)))\r\n                    return this.state.json['10140PRJB-000030']/* 国际化处理： 计划完成日期必须大于等于计划开始日期*/\r\n            }\r\n        }\r\n    }\r\n\r\n    //保存单据\r\n    saveClick = () =>{\r\n\r\n        if(this.props.form.isCheckNow(this.formId) && this.props.cardTable.checkTableRequired(tableId)){\r\n\r\n            let formData = this.props.form.getAllFormValue(this.formId);\r\n            \r\n            let msg = this.validHead(formData);\r\n\r\n            if( msg!= null){\r\n                toast({content : msg,color : 'danger'});\r\n                return;\r\n            } \r\n\r\n            this.props.cardTable.filterEmptyRows(tableId);\r\n            \r\n            let visibleRows = this.props.cardTable.getVisibleRows(tableId);\r\n            if(!this.validBodyRepeat(visibleRows))\r\n                return;\r\n\r\n            let CardData = this.props.createMasterChildData(this.props.pagecode_card, this.formId, this.tableId);\r\n            // CardData.head.head.rows[0].values.bill_code = _this.state.bill_code;\r\n            let url = saveUrl;//新增保存\r\n            if (this.props.getUrlParam('status') === 'edit') {\r\n                //启用状态调整\r\n                CardData.head.head.rows[0].values.enablestate.value = CardData.head.head.rows[0].values.enablestate.value==true?'2':'3';\r\n                url = updateUrl;//修改保存\r\n            }\r\n            //验证公式的校验方法\r\n            this.props.validateToSave( CardData ,()=>{\r\n                ajax({\r\n                    url: url,\r\n                    data: CardData,\r\n                    success: (res) => {\r\n                        let pk_value = null\r\n                        if (res.success) {\r\n                            if (res.data) {\r\n                                if (res.data.head && res.data.head[this.formId]) {\r\n                                    this.props.form.setAllFormValue({ [this.formId]: res.data.head[this.formId] });\r\n                                    pk_value = res.data.head[this.formId].rows[0].values[pk_item].value\r\n                                }\r\n                                if (res.data.body && res.data.body[this.tableId]) {\r\n                                    this.props.cardTable.setTableData(this.tableId, res.data.body[this.tableId])\r\n                                }\r\n                            }\r\n                            toast({title : this.state.json['10140PRJB-000031'],color : 'success'});/* 国际化处理： 保存成功*/\r\n                            this.getdata(pk_value);\r\n                            this.props.setUrlParam({\r\n                                appcode:this.props.appcode,\r\n                                pagecode:this.props.pagecode_card,\r\n                                status: 'browse',\r\n                                id: pk_value\r\n                            });\r\n                            cacheTools.set('preid',pk_value);\r\n                            this.toggleShow(this.props)\r\n                        }\r\n                    }\r\n                })\r\n            }, {\r\n                formId: 'form',\r\n                [tableId]: 'cardTable'\r\n            },'card');\r\n\r\n        }\r\n    }\r\n\r\n    //删除单据\r\n    delConfirm = () => {\r\n        // var pk = this.props.getUrlParam('id');\r\n        var pk =  props.form.getFormItemsValue(formId,pk_item).value\r\n        // var ts =  props.form.getFormItemsValue(formId,pk_item).value\r\n        ajax({\r\n            url: deleteUrl,\r\n            data: {deleteinfo:[{\r\n                    id: pk,\r\n                    ts: this.props.form.getFormItemsValue(this.formId, 'ts').value\r\n                }]},\r\n            success: (res) => {\r\n                if(res){\r\n                    // this.props.pushTo(this.props.listUrl,{\r\n\r\n                    //     appcode:this.props.appcode,\r\n                    //     pagecode:this.props.pagecode_list,\r\n                    //     status: 'browse'\r\n                    // });\r\n                    //删除后显示下一条数据\r\n                    let nextId = getNextId(pk_item, cachKey);//根据当前id,获取下个id\r\n                    //调用删除缓存数据方法\r\n                    deleteCacheById(\"pk_item\",pk,cachKey);\r\n                    this.props.setUrlParam({\r\n                        appcode:this.props.appcode,\r\n                        pagecode:this.props.pagecode_card,\r\n                        status: 'browse',\r\n                        id: nextId \r\n                    });\r\n                     //根据nextId查询下条数据\r\n                     this.getdata(nextId);\r\n                     this.toggleShow(this.props);\r\n                }\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n    modelSave = (props)=>{\r\n        props.cardTable.closeModel(this.tableId);\r\n        this.saveClick();\r\n    }\r\n\r\n    getButtonNames = (codeId) => {\r\n        if (codeId === 'edit'||codeId === 'add'||codeId === 'save'){\r\n            return 'main-button'\r\n        }else {\r\n            return 'secondary - button'\r\n        }\r\n    };\r\n\r\n    onOrgChange=(props, moduleId, key,value, changedrows, i, s, g)=>{\r\n        // let pk_org = this.props.form.getFormItemsValue('org_select','pk_org');\r\n        // this.props.form.setFormItemsValue(this.formId,{'pk_org':pk_org});\r\n        if(key == 'pk_org'){\r\n\r\n            let billcode = this.props.form.getFormItemsValue(this.formId,titleCode).value;\r\n            let ts = this.props.form.getFormItemsValue(this.formId,'ts').value;\r\n            let pk = this.props.form.getFormItemsValue(this.formId,pk_item).value;\r\n            let data={\r\n                'nodeType':this.props.nodeType,\r\n                [titleCode]:billcode==null?null:billcode,\r\n                [key]:value.value,\r\n                ts,\r\n                [pk_item]:pk\r\n            }\r\n\r\n            if(changedrows.value == null && changedrows.display == null){\r\n                \r\n                this.setDefaultValue(data)\r\n            }else{\r\n\r\n                promptBox({\r\n                    color:\"warning\",\r\n                    title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                    content: this.state.json['10140PRJB-000032'],/* 国际化处理： 是否修改组织，这样会清空您录入的信息？*/\r\n                    beSureBtnClick: this.setDefaultValue.bind(this,data)\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    //获取列表肩部信息\r\n    getTableHead = () => {\r\n        let {button} = this.props;\r\n        let { createButtonApp } = button;\r\n        let buttons  = this.props.button.getButtons();\r\n        let status = this.props.getUrlParam(\"status\");\r\n        return (\r\n            <div className=\"shoulder-definition-area\">\r\n\r\n                <div className=\"definition-icons\">\r\n                    {createButtonApp({\r\n                        area: 'definition-icons',//按钮注册中的按钮区域\r\n                        //buttonLimit: 5,\r\n                        onButtonClick: this.buttonClick.bind(this)\r\n                        //popContainer: document.querySelector('.header-button-area')\r\n                    })}\r\n                    {this.props.cardTable.createBrowseIcons(this.tableId, {\r\n                        iconArr: ['close', 'open', 'max','setCol'],\r\n                        maxDestAreaId: 'nc-bill-card'\r\n                    })}\r\n                    {/* {createButton(\"deleteline\", {\r\n\t\t\t\t\t\tname: '删行',\r\n\t\t\t\t\t\tonButtonClick: buttonClick.bind(this)\r\n\t\t\t\t\t})} */}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    render() {\r\n        let { cardTable, form, button, modal, cardPagination } = this.props;\r\n        const {createCardPagination} = cardPagination;\r\n        let buttons = this.props.button.getButtons();\r\n        // buttons = buttons.sort((a,b)=>{\r\n        // \treturn b.btnorder - a.btnorder;\r\n        // });\r\n        let { createForm } = form;\r\n        let { createCardTable } = cardTable;\r\n        let { createButtonApp } = button;\r\n        let { createModal } = modal;\r\n        let status = this.props.getUrlParam('status');\r\n        let nodeName = this.state.json['10140PRJB-000044'];/* 国际化处理： 项目-全局*/\r\n        if(this.props.appcode === '10140PRJG'){\r\n            nodeName = this.state.json['10140PRJB-000034'];\r\n        }\r\n        if(this.props.appcode === '10140PRJO'){\r\n            nodeName = this.state.json['10140PRJB-000045'];\r\n        }\r\n        return (\r\n            <div  id='nc-bill-card'>\r\n                <div className=\"nc-bill-card\">\r\n                    <NCAffix>\r\n                        <div className='nc-bill-header-area'>\r\n                            <div>\r\n                                {status=='browse'?<NCBackBtn onClick={ this.onReturnClick.bind(this) }></NCBackBtn>:''}\r\n                            </div>\r\n                            <div className='header-title-search-area'>\r\n                                <h2 className='title-search-detail'>{nodeName}{status=='browse'?`：${this.state.title_code}`:''}</h2>\r\n                            </div>\r\n                            {/*分页 */}\r\n                            {/* {status=='browse'?<div className='header-button-cardPagination'>\r\n\t\t\t\t\t\t\t\t\t{createCardPagination({\thandlePageInfoChange: pageInfoClick.bind(this)})}\r\n\t\t\t\t\t\t\t\t\t</div>:''} */}\r\n                            <div className=\"header-button-area\">\r\n                                {createButtonApp({\r\n                                    area: 'header-button-area',//按钮注册中的按钮区域\r\n                                    //buttonLimit: 5,\r\n                                    onButtonClick: this.buttonClick.bind(this)\r\n                                    //popContainer: document.querySelector('.header-button-area')\r\n                                })}\r\n                                {createCardPagination({\r\n                                    handlePageInfoChange: this.pageInfoClick.bind(this),\r\n                                    dataSource: cachKey\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </NCAffix>\r\n                    <div className=\"nc-bill-form-area\" style={{marginBottom: 8}}>\r\n                        {this.props.nodeType === 'org'?createForm('org_select', {\r\n                            onAfterEvent: this.onOrgChange.bind(this)\r\n                        }):(<span/>)}\r\n                        {createForm(this.formId, {\r\n                            onAfterEvent: this.afterEvent.bind(this)\r\n                        })}\r\n                    </div>\r\n                    <div className=\"nc-bill-table-area\">\r\n                        {createCardTable(this.tableId, {\r\n                            tableHead: this.getTableHead.bind(this),\r\n                            modelSave: this.modelSave.bind(this),\r\n                            onAfterEvent: this.afterEvent.bind(this),\r\n                            showIndex:true\r\n                        })}\r\n                    </div>\r\n                    {createModal('delete', {\r\n                        title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                        content: this.state.json['10140PRJB-000013'],/* 国际化处理： 确认删除？*/\r\n                        beSureBtnClick: this.delConfirm.bind(this)\r\n                    })}\r\n                    <AssignModal ref={(item => this.assignModal = item)} {...{getData:this.getdata,json:this.state.json}} {...this.props}/>\r\n                    <PrintOutput\r\n                        ref='printOutput'\r\n                        url={printUrl}\r\n                        data={{\r\n                            funcode:this.props.printFunCode,//功能节点编码\r\n                            nodekey:this.props.printNodeKey,//模板节点编码\r\n                            oids : this.state.ids,\r\n                            outputType : 'output'\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n\r\n        \r\n    modifierMeta=(props, meta)=> {\r\n        let status = props.getUrlParam('status');\r\n        meta[formId].status = status;\r\n        if(meta[tableId]){\r\n            meta[tableId].status = status;\r\n        }\r\n\r\n        meta['org_select'].items = meta['org_select'].items.map((item, key) => {\r\n            if(item.attrcode == 'pk_org'){\r\n                item.queryCondition = {\r\n                    \"AppCode\": props.appcode,\r\n                    TreeRefActionExt:'nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder'\r\n                };\r\n            }\r\n            return item;\r\n        })\r\n\r\n        meta[tableId].items = meta[tableId].items.map((item, key) => {\r\n            if(item.attrcode == 'pk_parti_org_v'){\r\n                item.isMultiSelectedEnabled = true;\r\n            }\r\n            return item;\r\n        })\r\n\r\n        meta[formId].items = meta[formId].items.map((item, key) => {\r\n            if(item.attrcode == 'pk_eps'){//eps参照只能选择叶子节点\r\n                item.onlyLeafCanSelect = true;\r\n            }\r\n            return item;\r\n        })\r\n        let that = this;\r\n        let porCol = {\r\n            attrcode: 'opr',\r\n            label: this.state.json['10140PRJB-000009'],/* 国际化处理： 操作*/\r\n            visible: true,\r\n            className:'table-opr',\r\n            width:'200px',\r\n            itemtype: 'customer',\r\n            fixed:'right',\r\n            render(text, record, index) {\r\n\r\n                let btnArray = tableBtnAry(props);\r\n\r\n                return props.button.createOprationButton(\r\n                    btnArray,\r\n                    {\r\n                        area: \"table-opr-area\",\r\n                        buttonLimit: 3,\r\n                        onButtonClick: (props, id) => that.tableButtonClick(props, id, text, record, index)\r\n                    }\r\n                )\r\n\r\n                // let status = props.cardTable.getStatus(tableId);\r\n                // return status === 'browse' ? (\r\n                // \t<span\r\n                // \t\tonClick={() => {\r\n                //             props.cardTable.toggleRowView(tableId, record)\r\n\r\n                //         }}\r\n                //         > 展开\r\n                //  \t</span>\r\n                // ):(<div className=\"currency-opr-col\">\r\n                // \t\t<span\r\n                // \t\t\tclassName=\"currency-opr-del\"\r\n                // \t\t\tonClick={(e) => {\r\n                // \t\t\t\tprops.cardTable.openModel(tableId, 'edit', record, index);\r\n                // \t\t\t\te.stopPropagation();\r\n                // \t\t\t}}\r\n                // \t\t>更多</span>\r\n                // \t\t&nbsp;&nbsp;\r\n                // \t\t<span\r\n                // \t\t\tclassName=\"currency-opr-del\"\r\n                // \t\t\tonClick={(e) => {\r\n                // \t\t\t\tprops.cardTable.delRowsByIndex(tableId, index);\r\n                // \t\t\t\te.stopPropagation();\r\n                // \t\t\t}}\r\n                // \t\t>删除</span>\r\n                // \t</div>\r\n                // );\r\n            }\r\n        };\r\n        meta[tableId].items.push(porCol);\r\n\r\n        return meta;\r\n    }\r\n\r\n    tableButtonClick=(props, id, text, record, index)=>{\r\n\r\n        switch(id){\r\n            case 'insertline'://插入行\r\n                props.cardTable.addRow(tableId,index,false);\r\n                break;\r\n            case \"delline\"://删除行\r\n                props.cardTable.delRowsByIndex(tableId, index);\r\n                break;\r\n            case \"detail\"://更多\r\n                props.cardTable.toggleRowView(tableId, record);\r\n                break;\r\n            case \"spread\"://展开\r\n                props.cardTable.openModel(tableId, 'edit', record, index);\r\n                break;\r\n            default:\r\n                console.log(id,index);\r\n                break;\r\n        }\r\n    }\r\n\r\n    //切换页面状态\r\n    toggleShow=(props)=>{\r\n        let status = props.getUrlParam('status');\r\n        let pk = this.props.getUrlParam('id');\r\n        if(status === 'browse'&&(!pk||pk===undefined||pk==='')){\r\n            props.button.setButtonDisabled(['edit','back','delete','refresh','detail','assig','assig1','unassig','printGrp','print','output','enable','enable1','disable'],true);\r\n            props.button.setButtonVisible(['add'],true);\r\n            props.button.setButtonVisible(['save','cancel','addline','insertline','delline','spread'],false);\r\n            props.form.setFormStatus(formId, 'browse');\r\n            props.form.setFormStatus('org_select', status);\r\n            props.cardTable.setStatus(tableId, 'browse');\r\n            props.cardPagination.setCardPaginationVisible('cardPaginationBtn', true);\r\n            //隐藏子表操作列\r\n            if(props.meta.getMeta()[tableId]){\r\n                props.cardTable.hideColByKey(tableId,'opr');\r\n            }\r\n            return;\r\n        }\r\n        let isAdd = status === 'add' ? true : false;\r\n        let enablestate = props.form.getFormItemsValue(formId,'enablestate');\r\n        //按钮的显示状态\r\n        if(status == 'edit' || status == 'add'){\r\n            //隐藏子表操作列\r\n            if(props.meta.getMeta()[tableId]){\r\n                props.cardTable.showColByKey(tableId,'opr');\r\n            }\r\n\r\n            props.button.setButtonVisible(['edit','add','back','delete','refresh','detail','assig','assig1','unassig','printGrp','print','output','enable','enable1','disable'],false);\r\n            props.button.setButtonVisible(['save','cancel','addline','insertline','delline','spread'],true);\r\n            props.cardPagination.setCardPaginationVisible('cardPaginationBtn', false);\r\n            if(enablestate){\r\n                props.form.getFormItemsValue(formId,'enablestate').value = (enablestate.value=='2' || enablestate.value == true)?true:false;\r\n            }\r\n            props.form.setFormItemsDisabled(formId,{'enablestate':true});\r\n        }else{\r\n            //隐藏子表操作列\r\n            if(props.meta.getMeta()[tableId]){\r\n                props.cardTable.hideColByKey(tableId,'opr');\r\n            }\r\n            \r\n            props.button.setButtonVisible(['save','cancel','addline','insertline','delline','spread','assig1','enable1','print','back'],false);\r\n            props.button.setButtonVisible(['add','edit','delete','refresh','detail','assig','unassig','printGrp','output','enable','disable'],true);\r\n            //全局时没有分配\r\n            props.nodeType == 'global' && props.button.setButtonVisible('assig',false);\r\n\r\n            props.cardPagination.setCardPaginationVisible('cardPaginationBtn', true);\r\n    \r\n            //卡片停启用有开关，按钮直接隐藏不用\r\n            props.button.setButtonVisible(['enable','disable'],false);\r\n            // if(enablestate && (enablestate.value == '2' || enablestate.value == true)){\r\n            //     props.button.setButtonDisabled(['enable1','enable'],true);\r\n            //     props.button.setButtonDisabled('disable',false);\r\n                \r\n            // }else{\r\n            //     props.button.setButtonDisabled(['enable1','enable'],false);\r\n            //     props.button.setButtonDisabled('disable',true);\r\n            // } \r\n            props.form.setFormItemsDisabled(formId,{'enablestate':false});\r\n        }\r\n        //只有新增是可编辑,写法累赘，回头优化\r\n        props.form.setFormItemsDisabled('org_select',{'pk_org':!isAdd})\r\n        \r\n        props.form.setFormStatus('org_select', status);\r\n\r\n        let headOrg = props.form.getFormItemsValue(formId,'pk_org');\r\n        if(props.form.nodeType == 'org' && (headOrg || headOrg.value == null)){\r\n            props.form.setFormStatus(formId, 'browse');\r\n            props.cardTable.setStatus(tableId, 'browse');\r\n        }else{\r\n            props.form.setFormStatus(formId, status);\r\n            props.cardTable.setStatus(tableId, status);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// ReactDOM.render(<Card />, document.querySelector('#app'));\r\nexport default Card;\r\n","//主子表列表\r\n\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createPage, ajax, base, toast, cacheTools, print, high, getBusinessInfo, promptBox, cardCache,getMultiLang } from 'nc-lightapp-front';\r\nconst { NCPopconfirm, NCIcon, NCTabs, NCCheckbox } = base;\r\nlet { setDefData, getDefData } = cardCache;\r\nlet cachKey = '10140PRJG_list';//缓存的标识\r\nconst NCTabPane = NCTabs.NCTabPane;\r\nconst { PrintOutput } = high;\r\nimport AssignModal from '../assign/AssignModal';\r\nimport createUIDom from '../../../public/utils/BDCreateUIDom';\r\n\r\nconst pageId = '10140PRJG_list';        //pagecode\r\nconst searchId = 'search';              //查询区id\r\nconst tableId = 'head';                 //表头id\r\nconst oId = '1001ZP1000000001RCV5';     //查询区oid\r\nconst appid = '10140PRJG';   //注册按钮id\r\nconst linkItem = 'project_code';        //列表卡片跳转字段\r\nconst pk_item = 'pk_project';           //列表主键\r\n// const titleName = this.state.json['10140PRJB-000034'];\t\t\t //节点名称/* 国际化处理： 项目-集团*/\r\nconst queryListUrl = '/nccloud/uapbd/pmbase/ProjectListQuery.do';           //通过查询区域查询url\r\nconst queryPageUrl = '/nccloud/uapbd/pmbase/ProjectQueryPageGridByPks.do';  //分页查询url\r\nconst deleteUrl = '/nccloud/uapbd/pmbase/ProjectDelete.do';                 //删除url\r\nconst enableUrl = '/nccloud/uapbd/pmbase/ProjectEnable.do';         //启用\r\nconst disableUrl = '/nccloud/uapbd/pmbase/ProjectDisable.do';       //停用\r\nconst validUrl = '/nccloud/uapbd/pmbase/ProjectValid.do';              //管控权限校验\r\nconst printUrl = '/nccloud/uapbd/pmbase/ProjectPrint.do';       //打印\r\nconst tableBtnAry = [\"editline\", \"delline\"];\t\t//表格列操作按钮\r\nconst globalId = 'GLOBLE00000000000000';            //全局常量值\r\n//\r\n// let initTemplate =(props) =>{\r\n//\r\n// \tlet _this = this;\r\n//\r\n// }\r\n\r\n\r\nclass List extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.searchId = searchId;\r\n        this.tableId = tableId;\r\n        this.state = {\r\n            checked: false,\r\n            json:{}\t\r\n        };\r\n\r\n        createUIDom(props)(\r\n            {\r\n                pagecode: props.pagecode_list//,//页面id\r\n                // appcode: props.appcode//注册按钮的id\r\n            },\r\n            {\r\n                moduleId: \"10140PRJB\",domainName: 'uapbd'\r\n            },\r\n            (data,langData) => {\r\n                if(langData){\r\n                    this.state.json = langData;\r\n                }\r\n                if (data) {\r\n                    if (data.template) {\r\n                        let meta = data.template;\r\n                        meta = this.modifierMeta(props, meta)\r\n                        props.meta.setMeta(meta, () => {\r\n                            if (data.button) {\r\n                                let button = data.button;\r\n                                props.button.setButtons(button);\r\n                                //全局时没有分配\r\n                                props.nodeType == 'global' && props.button.setButtonVisible('assig',false);\r\n                                props.button.setButtonDisabled(['delete', 'enable', 'disable', 'assig', 'unassig'], true);\r\n                                props.button.setButtonDisabled(['delete', 'printGrp', 'print','output'], true);\r\n                                props.button.setPopContent('delline', this.state.json['10140PRJB-000035']); /* '确认要删除该信息吗？' 设置操作列上删除按钮的弹窗提示 */\r\n                                props.button.setPopContent('enableLine', this.state.json['10140PRJB-000015']);/* 国际化处理： 确认启用？*/\r\n                                props.button.setPopContent('disableLine', this.state.json['10140PRJB-000016']);/* 国际化处理： 确认停用？*/\r\n                            }\r\n\r\n                            let searchVal = getDefData(\"searchParams\", cachKey);\r\n                            if(searchVal && searchVal != false){\r\n                                this.props.search.setSearchValue(searchId,searchVal.conditions);\r\n                            }\r\n                            if (searchVal && searchVal != false) {\r\n                                this.loadData();\r\n                            }\r\n                            // let hasSearched = cacheTools.get(\"hasSearched\");\r\n                            // let searchVal = cacheTools.get(\"searchParams\");\r\n                            // console.log(\"缓存查询条件\")\r\n                            // console.log(searchVal);\r\n                            // if (hasSearched && hasSearched === 1) {//hasSearched 为1表示有过查询，从缓存获取查询模板条件\r\n                            //     // searchVal.map((v)=>{\r\n                            //     // \tprops.search.setSearchValByField('searchArea',v.field,v.display);\r\n                            //     // \treturn v;\r\n                            //     // })\r\n                            //     if (searchVal && searchVal != false) {\r\n                            //         props.search.setSearchValue(searchId, searchVal.conditions);\r\n                            //     }\r\n\r\n                            //     //获取查询模板信息\r\n                            //     let queryInfo = this.props.search.getQueryInfo(this.searchId);\r\n                            //     let OID = queryInfo.oid;\r\n\r\n                            //     let data = {\r\n                            //         conditions: searchVal == null ? null : searchVal.conditions,\r\n                            //         pageInfo: cacheTools.get('pageInfo') ? cacheTools.get('pageInfo') : props.table.getTablePageInfo(tableId),\r\n                            //         // {\r\n                            //         // \tpageIndex: 0,\r\n                            //         // \tpageSize: 10,\r\n                            //         // \ttotal: 0,\r\n                            //         // \ttotalPage: 0\r\n                            //         // },\r\n                            //         pagecode: props.pagecode_list,\r\n                            //         queryAreaCode: searchId,  //查询区编码\r\n                            //         oid: OID,  //查询模板id，手工添加在界面模板json中，放在查询区，后期会修改\r\n                            //         nodeType: this.props.nodeType,\r\n                            //         appCode: this.props.appcode\r\n                            //     };\r\n\r\n                            //     ajax({\r\n                            //         url: queryListUrl,\r\n                            //         data,\r\n                            //         success: (res) => {\r\n                            //             if (res.data) {\r\n                            //                 props.table.setAllTableData(tableId, res.data[tableId]);\r\n                            //                 setTimeout(() =>{\r\n                            //                     props.button.setButtonDisabled(['printGrp','output'], false);\r\n                            //                 },0)\r\n                            //             } else {\r\n                            //                 props.button.setButtonDisabled(['printGrp','output'], true);\r\n                            //                 toast({ content: \"无数据\", color: \"warning\" });\r\n                            //             }\r\n                            //         },\r\n                            //         error: (res) => {\r\n                            //             console.log(res.message);\r\n                            //         }\r\n                            //     });\r\n                            // }else{\r\n                            //     let businessInfo = getBusinessInfo();\r\n                            //     if(businessInfo && businessInfo != null)\r\n                            //         props.search.setSearchValByField(searchId,'pk_org',{value:businessInfo.groupId,display:businessInfo.groupName})\r\n                            // }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.props.search.setDisabledByField(searchId,'pk_org',false);\r\n\r\n    }\r\n\r\n    modifierMeta = (props, meta) => {\r\n        meta[searchId].items = meta[searchId].items.map((item, key) => {\r\n            if (item.attrcode == 'pk_org') {\r\n                item.visible = 'true';\r\n                item.queryCondition = {\r\n                    // 'AppCode': props.appcode,\r\n                    // GridRefActionExt: 'nccloud.web.uapbd.rateschema.action.PrimaryOrgSQLBuilderData',\r\n                    'orgType': 'orgtype16'\r\n                };\r\n            }\r\n            if(item.attrcode == 'pk_duty_org'){\r\n                item.isMultiSelectedEnabled = true;\r\n            }\r\n            item.col = '3';\r\n            if(item.attrcode === 'pk_projectclass'||item.attrcode === 'pk_eps'){\r\n                item.isMultiSelectedEnabled = true;\r\n            }\r\n            return item;\r\n        })\r\n        meta[tableId].pagination = true;\r\n        meta[tableId].items = meta[tableId].items.map((item, key) => {\r\n            item.width = 150;\r\n            if (item.attrcode == linkItem) {\r\n                item.render = (text, record, index) => {\r\n                    return (\r\n                        <span\r\n                            // style={{ textDecoration: 'underline', cursor: 'pointer' }}\r\n                            style={{color: '#007ace', cursor: 'pointer' }}\r\n                            onClick={() => {\r\n                                let searchVal = props.search.getAllSearchData(searchId);\r\n                                cacheTools.set(\"searchParams\", searchVal);\r\n                                cacheTools.set('preid', record[pk_item].value);\r\n                                cacheTools.set('pageInfo', props.table.getTablePageInfo(tableId));\r\n                                props.pushTo(props.cardUrl, {\r\n                                    appcode: props.appcode,\r\n                                    pagecode: props.pagecode_card,\r\n                                    status: 'browse',\r\n                                    id: record[pk_item].value//列表卡片传参\r\n                                });\r\n                            }}\r\n                        >\r\n                            {record && record[linkItem] && record[linkItem].value}\r\n                        </span>\r\n                    );\r\n                };\r\n            }\r\n            return item;\r\n        });\r\n        //添加操作列\r\n        meta[tableId].items.push({\r\n            attrcode: 'opr',\r\n            label: this.state.json['10140PRJB-000009'],/* 国际化处理： 操作*/\r\n            itemtype:'customer',\r\n            width: 200,\r\n            fixed: 'right',\r\n            className: 'table-opr',\r\n            visible: true,\r\n            render: (text, record, index) => {\r\n\r\n                // let btnArray = record['enablestate'].value==2?['editline','delline','disableLine']:['editline','delline','enableLine'];\r\n                // 需求变更，卡片有停启用开关，列表行停启用先隐藏\r\n                // 只能修改本级数据\r\n                let btnArray = [];\r\n                if (record['pk_org'].value == globalId && this.props.nodeType == 'global') {\r\n                    btnArray = ['editline', 'delline'];\r\n                }\r\n                else if (record['pk_org'].value == record['pk_group'].value && this.props.nodeType == 'group') {\r\n                    btnArray = ['editline', 'delline'];\r\n                }\r\n                else if (record['pk_org'].value != record['pk_group'].value && record['pk_org'].value!=globalId  && this.props.nodeType == 'org') {\r\n                    btnArray = ['editline', 'delline'];\r\n                }\r\n                return props.button.createOprationButton(\r\n                    btnArray,\r\n                    {\r\n                        area: \"table-opr-area\",\r\n                        buttonLimit: 3,\r\n                        onButtonClick: (props, id) => this.tableButtonClick(props, id, text, record, index)\r\n                    }\r\n                )\r\n\r\n                // return (\r\n                // \t<span>\r\n                // \t\t{/* <NCIcon\r\n                // \t\t\ttype=\"uf-pencil-s\"\r\n                // \t\t\tonClick={() => {\r\n                // \t\t\t\tprops.linkTo('../card/index.html', {\r\n                // \t\t\t\t\tstatus: 'edit',\r\n                // \t\t\t\t\tid: record.crevecontid.value\r\n                // \t\t\t\t});\r\n                // \t\t\t}}\r\n                // \t\t/> */}\r\n                // \t\t<span\r\n                // \t\t\tstyle={{cursor: 'pointer' }}\r\n                // \t\t\tonClick={() => {\r\n                // \t\t\t\tprops.linkTo('../card/index.html', {\r\n                // \t\t\t\t\tstatus: 'edit',\r\n                // \t\t\t\t\tid: record[pk_item].value\r\n                // \t\t\t\t});\r\n                // \t\t\t}}\r\n                // \t\t>\r\n                // \t\t\t修改\r\n                // \t\t</span><span>&nbsp; &nbsp;</span>\r\n                // \t\t<NCPopconfirm\r\n                // \t\t\ttrigger=\"click\"\r\n                // \t\t\tplacement=\"top\"\r\n                // \t\t\tcontent='确定删除？'\r\n                // \t\t\tonClose={() => {\r\n                // \t\t\t\tajax({\r\n                // \t\t\t\t\turl: deleteUrl,\r\n                // \t\t\t\t\tdata: {deleteinfo:[{\r\n                // \t\t\t\t\t\tid: record[pk_item].value,\r\n                // \t\t\t\t\t\tts: record.ts.value\r\n                // \t\t\t\t\t}]},\r\n                // \t\t\t\t\tsuccess: (res) => {\r\n                // \t\t\t\t\t\tif (res.success) {\r\n                // \t\t\t\t\t\t\ttoast({ color: 'success', content: '删除成功' });\r\n                // \t\t\t\t\t\t\tprops.table.deleteTableRowsByIndex(tableId, index);\r\n                // \t\t\t\t\t\t}\r\n                // \t\t\t\t\t}\r\n                // \t\t\t\t});\r\n                // \t\t\t}}\r\n                // \t\t>\r\n                // \t\t\t<span style={{cursor: 'pointer' }}>删除</span>\r\n                // \t\t</NCPopconfirm>\r\n                // \t</span>\r\n                // );\r\n            }\r\n        });\r\n        return meta;\r\n    }\r\n\r\n    tableButtonClick = (props, id, text, record, index) => {\r\n        switch (id) {\r\n\r\n            case 'editline':\r\n                props.pushTo(props.cardUrl, {\r\n                    appcode: props.appcode,\r\n                    pagecode: props.pagecode_card,\r\n                    status: 'edit',\r\n                    id: record[pk_item].value\r\n                })\r\n                break;\r\n            case 'delline':\r\n                ajax({\r\n                    url: validUrl,\r\n                    data: {\r\n                        pks: [record[pk_item].value],\r\n                        nodeType: props.nodeType\r\n                    },\r\n                    success: (res) => {\r\n                        ajax({\r\n                            url: deleteUrl,\r\n                            data: {\r\n                                appCode: props.appcode,\r\n                                nodeType: props.nodeType,\r\n                                deleteinfo: [{\r\n                                    id: record[pk_item].value,\r\n                                    ts: record.ts.value\r\n                                }]\r\n                            },\r\n                            success: (res) => {\r\n                                if (res.success) {\r\n                                    toast({ color: 'success', content: this.state.json['10140PRJB-000036'] });/* 国际化处理： 删除成功*/\r\n                                    props.table.deleteTableRowsByIndex(tableId, index);\r\n                                    let tableData = props.table.getAllTableData(tableId).rows;\r\n                                    // if (tableData && tableData.length > 0) {\r\n                                    //     props.button.setButtonDisabled(['printGrp', 'output'], false);\r\n                                    // } else {\r\n                                    //     props.button.setButtonDisabled(['printGrp', 'output'], true);\r\n                                    // }\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                break;\r\n            case 'enableLine':\r\n                ajax({\r\n                    url: validUrl,\r\n                    data: {\r\n                        pks: [record[pk_item].value],\r\n                        nodeType: props.nodeType\r\n                    },\r\n                    success: (res) => {\r\n                        promptBox({\r\n                            color: \"warning\",\r\n                            title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                            content: this.state.json['10140PRJB-000015'],/* 国际化处理： 确认启用？*/\r\n                            beSureBtnClick: () => {\r\n\r\n                                let rows = [];\r\n\r\n                                if (record.enablestate.value == '3') {\r\n                                    let row = {\r\n                                        values: record\r\n                                    }\r\n                                    delete row.values.numberindex;\r\n                                    delete row.values.key;\r\n                                    rows.push(row);\r\n                                }\r\n\r\n                                let data = {\r\n                                    model: { rows: rows }\r\n                                }\r\n\r\n                                ajax({\r\n                                    url: enableUrl,\r\n                                    data: data,\r\n                                    success: (res) => {\r\n                                        toast({ content: this.state.json['10140PRJB-000019'], title: this.state.json['10140PRJB-000037'] });/* 国际化处理： 启用成功,提示*/\r\n                                        this.loadData();\r\n                                    }\r\n                                })\r\n                            },\r\n                            cancelBtnClick: () => {\r\n                                return;\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n\r\n                break;\r\n            case 'disableLine':\r\n\r\n                ajax({\r\n                    url: validUrl,\r\n                    data: {\r\n                        pks: [record[pk_item].value],\r\n                        nodeType: props.nodeType\r\n                    },\r\n                    success: (res) => {\r\n\r\n                        promptBox({\r\n                            color: \"warning\",\r\n                            title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                            content: this.state.json['10140PRJB-000016'],/* 国际化处理： 确认停用？*/\r\n                            beSureBtnClick: () => {\r\n\r\n                                let rows = [];\r\n\r\n                                if (record.enablestate.value == '2') {\r\n                                    let row = {\r\n                                        values: record\r\n                                    }\r\n                                    delete row.values.numberindex;\r\n                                    delete row.values.key;\r\n                                    rows.push(row);\r\n                                }\r\n\r\n                                let data = {\r\n                                    model: { rows: rows }\r\n                                }\r\n\r\n                                ajax({\r\n                                    url: disableUrl,\r\n                                    data: data,\r\n                                    success: (res) => {\r\n                                        toast({ content: this.state.json['10140PRJB-000020'], title: this.state.json['10140PRJB-000037'] });/* 国际化处理： 停用成功,提示*/\r\n                                        this.loadData(props);\r\n                                    }\r\n                                })\r\n                            },\r\n                            cancelBtnClick: () => {\r\n                                return;\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n\r\n                break;\r\n            default:\r\n                console.log(id, index);\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    buttonClick(props, id) {\r\n        let checkedRows = props.table.getCheckedRows(this.tableId);\r\n        switch (id) {\r\n            case 'add':\r\n                props.pushTo(props.cardUrl, {\r\n                    appcode: props.appcode,\r\n                    pagecode: props.pagecode_card,\r\n                    status: 'add'\r\n                })\r\n                cacheTools.remove('preid');\r\n\r\n                break;\r\n            case 'editline':\r\n                props.pushTo(props.cardUrl, {\r\n                    appcode: props.appcode,\r\n                    pagecode: props.pagecode_card,\r\n                    status: 'edit',\r\n                    id: props.record[pk_item].value\r\n                })\r\n                break;\r\n            case 'refresh':\r\n                // this.refreshAction(props,true);\r\n                this.loadData('refresh')\r\n                break;\r\n            case 'delete':\r\n                promptBox({\r\n                    color: \"warning\",\r\n                    title: this.state.json['10140PRJB-000010'],/* 国际化处理： 删除*/\r\n                    content: this.state.json['10140PRJB-000046'],/* 国际化处理： 确定要删除所选数据吗？*/\r\n                    beSureBtnClick: this.deleteAction.bind(this)\r\n                });\r\n                break;\r\n            case 'enable':\r\n                promptBox({\r\n                    color: \"warning\",\r\n                    title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                    content: this.state.json['10140PRJB-000015'],/* 国际化处理： 确认启用？*/\r\n                    beSureBtnClick: this.enableAction.bind(this)\r\n                });\r\n                break;\r\n            // case 'enable1':\r\n            //     this.props.modal.show('delete',{\r\n            //         title: \"注意\",\r\n            //         content: '确认启用？',\r\n            //         beSureBtnClick: this.enableAction.bind(this)\r\n            //     });\r\n            //     break;\r\n            case 'disable':\r\n                promptBox({\r\n                    color: \"warning\",\r\n                    title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                    content: this.state.json['10140PRJB-000016'],/* 国际化处理： 确认停用？*/\r\n                    beSureBtnClick: this.disableAction.bind(this)\r\n                });\r\n                break;\r\n            case 'assig':\r\n\r\n                if (checkedRows == undefined || checkedRows.length == 0) {\r\n                    toast({ 'color': 'danger', 'content': this.state.json['10140PRJB-000000'] })/* 国际化处理： 请勾选分配项目！*/\r\n                } else {\r\n                    this.assignAction('assign');\r\n                }\r\n\r\n                break;\r\n            // case 'assig1':\r\n            //     if(checkedRows == undefined || checkedRows.length == 0){\r\n            //         toast({ 'color':'danger','content':'请勾选分配项目！'})\r\n            //     }else{\r\n            //         this.assignModal.show('assign');\r\n\r\n            //     }\r\n            //     break;\r\n            case 'unassig':\r\n                if (checkedRows == undefined || checkedRows.length == 0) {\r\n                    toast({ 'color': 'danger', 'content': this.state.json['10140PRJB-000038'] })/* 国际化处理： 请勾选取消分配项目！*/\r\n                } else {\r\n                    this.assignAction('unassig');\r\n                    // this.assignModal.show('unassig');\r\n                }\r\n                break;\r\n            case 'printGrp':\r\n                this.onPrint();\r\n                break;\r\n            case 'print':\r\n                this.onPrint();\r\n                break;\r\n            case 'output':\r\n                this.onOutput();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    //打印\r\n    onPrint = () => {\r\n\r\n        let allData = this.props.table.getCheckedRows(tableId);\r\n\r\n        if (allData.length === 0) {\r\n            toast({ content: this.state.json['10140PRJB-000017'], color: 'warning' });/* 国际化处理： 无可打印数据*/\r\n            return;\r\n        }\r\n\r\n        let pks = [];\r\n\r\n        allData.forEach((item, key) => {\r\n            pks.push(item.data.values[pk_item].value);\r\n        });\r\n        print(\r\n            'pdf',\r\n            printUrl,\r\n            {\r\n                funcode: this.props.printFunCode,//功能节点编码\r\n                nodekey: this.props.printNodeKey,//模板节点编码\r\n                oids: pks\r\n            }\r\n        )\r\n    }\r\n    //输出\r\n    onOutput = () => {\r\n\r\n        let allData = this.props.table.getAllTableData(tableId);\r\n        if (allData.length === 0) {\r\n            toast({ content: this.state.json['10140PRJB-000018'], color: 'warning' });/* 国际化处理： 无可输出的数据*/\r\n            return;\r\n        }\r\n        let pks = [];\r\n\r\n        allData.rows.forEach((item, key) => {\r\n            pks.push(item.values[pk_item].value);\r\n        });\r\n        this.setState({\r\n            ids: pks\r\n        }, this.refs.printOutput.open());\r\n    }\r\n\r\n    //分配、取消分配\r\n    assignAction = (action) => {\r\n\r\n        let data = this.props.table.getCheckedRows(tableId);\r\n\r\n        if (data) {\r\n\r\n            ajax({\r\n                url: validUrl,\r\n                data: {\r\n                    pks: data.map((v) => {\r\n                        return v.data.values[pk_item].value\r\n                    }),\r\n                    nodeType: this.props.nodeType\r\n                },\r\n                success: (res) => {\r\n                    this.assignModal.show(action);\r\n                }\r\n            })\r\n        }\r\n    }\r\n    //启用\r\n    enableAction = () => {\r\n\r\n        let curSels = this.props.table.getCheckedRows(tableId);\r\n\r\n        let rows = [];\r\n\r\n        let pks = [];\r\n\r\n        curSels.map(row => {\r\n\r\n            if (row.data.values.enablestate.value == '3') {\r\n\r\n                rows.push(row.data);\r\n                pks.push(row.data.values[pk_item].value);\r\n            }\r\n        })\r\n\r\n        if (pks[0] && pks[0] != undefined) {\r\n\r\n            ajax({\r\n                url: validUrl,\r\n                data: {\r\n                    pks,\r\n                    nodeType: this.props.nodeType\r\n                },\r\n                success: (res) => {\r\n\r\n                    let data = {\r\n                        model: { rows: rows }\r\n                    }\r\n\r\n                    ajax({\r\n                        url: enableUrl,\r\n                        data: data,\r\n                        success: (res) => {\r\n                            toast({ color: \"success\", title: this.state.json['10140PRJB-000019'] });/* 国际化处理： 启用成功*/\r\n                            this.loadData();\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        } else {\r\n            toast({ color: \"warning\", content: this.state.json['10140PRJB-000039'] });/* 国际化处理： 没有可启用数据*/\r\n        }\r\n    }\r\n    //停用\r\n    disableAction = () => {\r\n        let curSels = this.props.table.getCheckedRows(tableId);\r\n\r\n        let rows = [];\r\n\r\n        let pks = [];\r\n\r\n        curSels.map(row => {\r\n\r\n            if (row.data.values.enablestate.value == '2') {\r\n\r\n                rows.push(row.data);\r\n                pks.push(row.data.values[pk_item].value);\r\n            }\r\n        })\r\n\r\n        if (pks[0] && pks[0] != undefined) {\r\n\r\n            ajax({\r\n                url: validUrl,\r\n                data: {\r\n                    pks,\r\n                    nodeType: this.props.nodeType\r\n                },\r\n                success: (res) => {\r\n\r\n                    let data = {\r\n                        model: { rows: rows }\r\n                    }\r\n\r\n                    ajax({\r\n                        url: disableUrl,\r\n                        data: data,\r\n                        success: (res) => {\r\n                            toast({ color: \"success\", title: this.state.json['10140PRJB-000020'] });/* 国际化处理： 停用成功*/\r\n                            this.loadData();\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        } else {\r\n            toast({ color: \"warning\", content: this.state.json['10140PRJB-000040'] });/* 国际化处理： 没有可停用数据*/\r\n        }\r\n    }\r\n\r\n    doubleClick = (record, index, e) => {\r\n\r\n\r\n        console.log(this.state.json['10140PRJB-000041']);/* 国际化处理： 双击*/\r\n        console.log(this)\r\n        let searchVal = this.props.search.getAllSearchData(\"search\");\r\n        cacheTools.set(\"searchParams\", searchVal);\r\n        cacheTools.get(\"searchParams\");\r\n        cacheTools.set('preid', this.props.getUrlParam('id'));\r\n        this.props.pushTo(this.props.cardUrl, {\r\n            appcode: this.props.appcode,\r\n            pagecode: this.props.pagecode_card,\r\n            status: 'browse',\r\n            id: record[pk_item].value\r\n        });\r\n    }\r\n\r\n    deleteAction = () => {\r\n        let data = this.props.table.getCheckedRows(tableId);\r\n\r\n        ajax({\r\n            url: validUrl,\r\n            data: {\r\n                pks: data.map((v) => {\r\n                    return v.data.values[pk_item].value\r\n                }),\r\n                nodeType: this.props.nodeType\r\n            },\r\n            success: (res) => {\r\n\r\n                let params = {\r\n                    deleteinfo: data.map((v) => {\r\n                        let id = v.data.values[pk_item].value;\r\n                        let ts = v.data.values.ts.value;\r\n                        return {\r\n                            id, ts\r\n                        }\r\n                    })\r\n                }\r\n                ajax({\r\n                    url: deleteUrl,\r\n                    data: params,\r\n                    success: (res) => {\r\n                        toast({ color: \"success\", content: this.state.json['10140PRJB-000036'] });/* 国际化处理： 删除成功*/\r\n                        this.refreshAction(this.props);\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    refreshAction = (props) => {\r\n\r\n        this.loadData();\r\n    }\r\n    //查询区编辑后事件\r\n    onSearchAfterEvent(field, val){\r\n        //选择完责任组织后需要将其pk值给责任部门和责任人作为过滤条件\r\n        if(field==='pk_duty_org'){\r\n            let meta = this.props.meta.getMeta();\r\n            let deptItem = meta[searchId].items.find((item)=>item.attrcode==='pk_duty_dept');\r\n            deptItem.queryCondition=()=>{\r\n                return {\r\n                    pk_org:Array.isArray(val) ? val[0].refpk : val.refpk\r\n                }\r\n            }\r\n            let psnItem = meta[searchId].items.find(item=>item.attrcode==='pk_dutier');\r\n            psnItem.queryCondition=()=>{\r\n                return {\r\n                    pk_org:Array.isArray(val) ? val[0].refpk : val.refpk\r\n                }\r\n            }\r\n            this.props.meta.setMeta(meta);\r\n        }\r\n\r\n    }\r\n    pageInfoClick = (props, config, pks) => {\r\n\r\n        let pageInfo = props.table.getTablePageInfo(this.tableId);\r\n        let searchVal = props.search.getAllSearchData(searchId);\r\n\r\n        cacheTools.set('pageInfo', props.table.getTablePageInfo(tableId));\r\n\r\n        let data = {\r\n            \"allpks\": pks,\r\n            \"pageid\": props.pagecode_list\r\n        };\r\n        //得到数据渲染到页面\r\n        let that = this;\r\n        ajax({\r\n            url: queryPageUrl,\r\n            data: data,\r\n            success: function (res) {\r\n                let { success, data } = res;\r\n                if (success) {\r\n                    if (data) {\r\n                        props.table.setAllTableData(tableId, data[tableId]);\r\n                    } else {\r\n                        props.table.setAllTableData(tableId, { rows: [] });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    clickSearchBtn = (props, searchVal) => {\r\n\r\n        // console.log(searchVal);\r\n        // cacheTools.set(\"hasSearched\", 1);\r\n        // cacheTools.set(\"searchParams\", searchVal);\r\n        // cacheTools.set('pageInfo', props.table.getTablePageInfo(tableId));\r\n\r\n        setDefData(\"searchParams\", cachKey, searchVal);\r\n\r\n        this.loadData('search');\r\n    }\r\n\r\n    onCheckShowDisable() {\r\n\r\n        // cacheTools.set('isChecked',!isChecked);\r\n        this.setState(\r\n            { checked: !this.state.checked },\r\n            () => {\r\n                this.loadData()\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    loadData(actionType) {\r\n\r\n        let enablestate = {\r\n\r\n            field: 'enablestate',\r\n            oprtype: '\\u003d',\r\n            value: {\r\n                firstvalue: '2',\r\n                secondvalue: null\r\n            }\r\n        }\r\n\r\n        let conditions = [];\r\n\r\n        let searchVal = getDefData(\"searchParams\", cachKey);\r\n\r\n        // let searchVal = this.props.search.getAllSearchData(searchId);\r\n        let isChecked = this.state.checked;\r\n        if (isChecked == false) {\r\n\r\n            // conditions = searchVal==null?[]:searchVal.conditions;\r\n            conditions.push(enablestate);\r\n        }\r\n\r\n\r\n\r\n        //获取查询模板信息\r\n        let queryInfo = this.props.search.getQueryInfo(this.searchId);\r\n        let OID = queryInfo.oid;\r\n\r\n        let data = {\r\n            // conditions: searchVal == null ? null : searchVal.conditions,\r\n            querycondition: searchVal,\r\n            // custcondition: conditions,\r\n            pageInfo: this.props.table.getTablePageInfo(tableId),\r\n            pagecode: this.props.pagecode_list,\r\n            queryAreaCode: searchId,  //查询区编码\r\n            oid: OID,  //查询模板id，手工添加在界面模板json中，放在查询区，后期会修改\r\n            querytype: 'tree',\r\n            nodeType: this.props.nodeType,\r\n            appCode: this.props.appcode,\r\n            enablestate:isChecked\r\n        };\r\n\r\n        ajax({\r\n            url: queryListUrl,\r\n            data,\r\n            success: (res) => {\r\n                console.log(res);\r\n                if (res.data) {\r\n\r\n                    this.props.table.setAllTableData(this.tableId, res.data[tableId]);\r\n                    // this.props.button.setButtonDisabled(['printGrp', 'output'], false);\r\n                    if(actionType === 'refresh'){\r\n                        toast({ title: this.state.json['10140PRJB-000025'], color: \"success\" });/* 国际化处理： 刷新成功*/\r\n                    }\r\n                    if(actionType === 'search'){\r\n                        var msg = this.state.json['10140PRJB-000047'] + res.data[tableId].rows.length + this.state.json['10140PRJB-000048']/* 国际化处理： 查询成功,共 , 条。*/\r\n                        toast({content:msg,color:\"success\"});\r\n                    }\r\n                } else {\r\n                    this.props.table.setAllTableData(this.tableId, { rows: [] });\r\n                    // this.props.button.setButtonDisabled(['printGrp', 'output'], true);//勾选数据后才可用\r\n                    toast({ content: this.state.json['10140PRJB-000042'], color: \"warning\" });/* 国际化处理： 无数据*/\r\n                }\r\n                this.props.button.setButtonDisabled(['delete', 'enable', 'disable', 'assig', 'unassig'], true);\r\n                this.setState(this.state);\r\n            }\r\n        });\r\n    }\r\n\r\n    onRowClick = () => {\r\n        this.props.button.setButtonDisabled(['delete', 'enable', 'disable', 'assig', 'unassig'], false);\r\n        this.setState(this.state);\r\n    }\r\n\r\n    // selectedChange=()=>{\r\n    //     let rows = this.props.table.getCheckedRows(tableId);\r\n    //     if(rows && rows.length >0){\r\n    //         this.props.button.setButtonDisabled(['delete'],false);\r\n    //     }else{\r\n    //         this.props.button.setButtonDisabled(['delete'],true);\r\n    //     }\r\n    // }\r\n\r\n    onSelected = () => {\r\n        let rows = this.props.table.getCheckedRows(tableId);\r\n        if (rows && rows.length > 0) {\r\n            // this.props.button.setButtonDisabled(['delete', 'enable', 'disable', 'assig', 'unassig'], false);\r\n\r\n            let isEnable = rows.some((item, index, arr) => {\r\n                return item.data.values['enablestate'].value == '2';\r\n            });\r\n\r\n            let isDisable = rows.some((item, index, arr) => {\r\n                return item.data.values['enablestate'].value == '3';\r\n            });\r\n\r\n            this.props.button.setButtonDisabled({\r\n                delete: false,\r\n                assig: false,\r\n                unassig: false,\r\n                enable: isEnable,\r\n                disable: isDisable\r\n            });\r\n            this.props.button.setButtonDisabled(['printGrp','output'],false);\r\n        } else {\r\n            this.props.button.setButtonDisabled(['delete', 'enable', 'disable', 'assig', 'unassig'], true);\r\n            this.props.button.setButtonDisabled(['printGrp','output'],true);\r\n        }\r\n        this.setState(this.state);\r\n    }\r\n    // onSelectedAll=()=>{\r\n    //     let rows = this.props.table.getCheckedRows(tableId);\r\n    //     if(rows && rows.length >0){\r\n    //         this.props.button.setButtonDisabled(['delete'],false);\r\n    //     }else{\r\n    //         this.props.button.setButtonDisabled(['delete'],true);\r\n    //     }\r\n    //     this.setState(this.state);\r\n    // }\r\n    render() {\r\n        let { table, button, search, modal } = this.props;\r\n        let { createModal } = modal;\r\n        let buttons = this.props.button.getButtons();\r\n        // buttons = buttons.sort((a,b)=>{\r\n        // \treturn b.btnorder - a.btnorder;\r\n        // });\r\n        let { createSimpleTable } = table;\r\n        let { NCCreateSearch } = search;\r\n        let { createButtonApp, getButtons } = button;\r\n        let nodeName = this.state.json['10140PRJB-000044'];/* 国际化处理： 项目-全局*/\r\n        debugger\r\n        if(this.props.appcode === '10140PRJG'){\r\n            nodeName = this.state.json['10140PRJB-000034'];\r\n        }\r\n        if(this.props.appcode === '10140PRJO'){\r\n            nodeName = this.state.json['10140PRJB-000045'];\r\n        }\r\n        return (<div className=\"nc-bill-list\">\r\n            <div className='nc-bill-header-area'>\r\n                <div className='header-title-search-area'>\r\n                    <h2 className='title-search-detail'>{nodeName}</h2></div>\r\n                <NCCheckbox onChange={this.onCheckShowDisable.bind(this)} checked={this.state.checked}>{this.state.json['10140PRJB-000043']}</NCCheckbox>{/* 国际化处理： 显示停用*/}\r\n                <div className=\"header-button-area\">\r\n                    {createButtonApp({\r\n                        area: 'header-button-area',\r\n                        buttonLimit: 3,\r\n                        onButtonClick: this.buttonClick.bind(this),\r\n                        popContainer: document.querySelector('.header-button-area')\r\n\r\n                    })}\r\n                    {/* {buttons.map( (v) =>{\r\n\t\t\t\t\t\t\treturn (createButton(v.btncode, {\r\n\t\t\t\t\t\t\t\tname: v.btnname,\r\n\t\t\t\t\t\t\t\tonButtonClick: this.buttonClick.bind(this),\r\n\t\t\t\t\t\t\t\tbuttonColor: this.getButtonNames(v.btncode)\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t})}  */}\r\n                </div>\r\n            </div>\r\n            <div className=\"nc-bill-search-area\">\r\n                {NCCreateSearch(this.searchId, {\r\n                    onAfterEvent:this.onSearchAfterEvent.bind(this),\r\n                    clickSearchBtn: this.clickSearchBtn.bind(this)\r\n                })}\r\n            </div>\r\n            {/* <div style={{ height: '10px' }}></div> */}\r\n            <div className=\"nc-bill-table-area\">\r\n                {createSimpleTable(this.tableId, {\r\n                    handlePageInfoChange: this.pageInfoClick.bind(this),\r\n                    // tableModelConfirm: this.tableModelConfirm.bind(this),\r\n                    showIndex: true,\r\n                    showCheck: true,\r\n                    onRowDoubleClick: this.doubleClick.bind(this),\r\n                    onRowClick: this.onRowClick.bind(this),\r\n                    // selectedChange:this.selectedChange.bind(this),\r\n                    onSelected: this.onSelected.bind(this),\r\n                    onSelectedAll: this.onSelected.bind(this),\r\n                    dataSource: cachKey,//缓存的标识\r\n                    pkname: 'pk_project',\r\n                    componentInitFinished:()=>{\r\n                        //缓存数据赋值成功的钩子函数\r\n                        //若初始化数据后需要对数据做修改，可以在这里处理\r\n                    }\r\n                })}\r\n            </div>\r\n            {createModal('delete', {\r\n                title: this.state.json['10140PRJB-000012'],/* 国际化处理： 注意*/\r\n                content: this.state.json['10140PRJB-000013'],/* 国际化处理： 确认删除？*/\r\n                beSureBtnClick: this.deleteAction.bind(this)\r\n            })}\r\n            <AssignModal ref={(item => this.assignModal = item)} {...{ 'gridId': this.tableId,json:this.state.json }} {...this.props} />\r\n            <PrintOutput\r\n                ref='printOutput'\r\n                url={printUrl}\r\n                data={{\r\n                    funcode: this.props.printFunCode,//功能节点编码\r\n                    nodekey: this.props.printNodeKey,//模板节点编码\r\n                    oids: this.state.ids,\r\n                    outputType: 'output'\r\n                }}\r\n            />\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nList = createPage({\r\n    initTemplate: []\r\n})(List);\r\n\r\n// ReactDOM.render(<List />, document.querySelector('#app'));\r\nexport default List;\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Card from '../../project_base/card';\r\nimport { createPage} from 'nc-lightapp-front';\r\n\r\nlet config = {\r\n    // nodeName: this.state.json['10140PRJB-000045'],/* 国际化处理： 项目-项目组织*/\r\n    nodeType: 'org',\r\n    pagecode_list:'10140PRJG_list',\r\n    pagecode_card:'10140PRJG_card',\r\n    appcode: '10140PRJO',\r\n    appid:'0001Z010000000004OEE',\r\n    printFunCode:'10140PRJO',      //有打印模板的小应用编码\r\n    printNodeKey:null,      //模板节点标识\r\n    // cardUrl:'/uapbd/pmbase/project_org/card/index.html',\r\n    // listUrl:'/uapbd/pmbase/project_org/list/index.html'\r\n    listUrl:'/list',\r\n    cardUrl:'/card'\r\n}\r\n\r\nlet CardModi = createPage({\r\n    initTemplate:function(){},\r\n    billinfo:{\r\n        billtype: 'card', \r\n        pagecode: config.pagecode_card, \r\n        headcode: 'head',\r\n        bodycode: 'bodyvos'\r\n    }\r\n})(Card);\r\n\r\nclass Cardgrp extends Component{\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    render(){\r\n        return(\r\n            <div>\r\n                <CardModi {...config}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Cardgrp;\r\n// ReactDOM.render(<Card {...config}/>, document.querySelector('#app'));\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport List from '../../project_base/list';\r\n\r\nlet config = {\r\n    // nodeName: this.state.json['10140PRJB-000045'],/* 国际化处理： 项目-项目组织*/\r\n    nodeType: 'org',\r\n    pagecode_list:'10140PRJG_list',\r\n    pagecode_card:'10140PRJG_card',\r\n    appcode: '10140PRJO',\r\n    appid:'0001Z010000000004OEE',\r\n    printFunCode:'10140PRJO',      //有打印模板的小应用编码\r\n    printNodeKey:'listPrint',      //模板节点标识\r\n    // cardUrl:'/uapbd/pmbase/project_org/card/index.html',\r\n    // listUrl:'/uapbd/pmbase/project_org/list/index.html'\r\n    listUrl:'/list',\r\n    cardUrl:'/card'\r\n}\r\n\r\nclass Listgrp extends Component{\r\n\r\n    constructor(props){\r\n        super(props)\r\n\r\n        debugger\r\n    }\r\n    render(){\r\n        return(\r\n            <div>\r\n                <List {...config}/>    \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Listgrp;\r\n// ReactDOM.render(<List {...config}/>, document.querySelector('#app'));\r\n","import {RenderRouter} from 'nc-lightapp-front';\r\nimport routes from './router';\r\n    (function main(routers,id){\r\n    RenderRouter(routers,id);\r\n    })(routes,\"app\")\r\n","import {asyncComponent} from 'nc-lightapp-front';\r\nimport Listgrp from '../list';\r\nconst  Cardgrp = asyncComponent(()=>import(/* webpackChunkName: \"uapbd/pmbase/project_org/card/Cardgrp\" *//*webpackMode:\"eager\"*/'../card'));\r\nconst routes = [\r\n    {\r\n        path:'/',\r\n        component:Listgrp,\r\n        exact:true\r\n    },\r\n    {\r\n        path:'/list',\r\n        component:Listgrp\r\n    },\r\n    {\r\n        path:'/card',\r\n        component:Cardgrp\r\n    }\r\n    ]\r\nexport default routes;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","import React, { Component } from 'react';\r\nimport { createPage, base,ajax,toast,cacheTools} from 'nc-lightapp-front';\r\nlet { NCButton, NCModal} = base;\r\nimport OrgSelect  from './OrgSelect';\r\nvar EMPTY_FN = function(){};\r\nclass AssignModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            modal:{\r\n                show: false,\r\n                modalDropup: true,\r\n                size: 'xlg',\r\n                // backdrop:false/\"static\"//是否弹出遮罩层/点击遮罩层是否触发关闭事件\r\n                backdrop:true\r\n            },\r\n        }\r\n        this.config = {isAssign:true,};\r\n        this.pk_project = this.props.getUrlParam('id');\r\n    }\r\n\r\n    show(flag){\r\n        this.state.modal.show = true;\r\n        this.setState(this.state, ()=>{\r\n            this.orgSelect.reset();\r\n        });\r\n        this.config.isAssign = flag ==='assign'?true:false;\r\n    }\r\n\r\n    onsubmit(){\r\n        debugger\r\n        let targetOrgIds = [];\r\n        this.orgSelect.state.selectData.datas\r\n        &&this.orgSelect.state.selectData.datas.map((item)=>{\r\n            targetOrgIds.push(item['id']);\r\n        });\r\n\r\n        let pk = this.props.getUrlParam('id');\r\n\r\n        if(!(pk || this.props.table.getCheckedRows(this.props.gridId))){\r\n            toast({ 'color':'danger','content':this.props.json['10140PRJB-000000']})/* 国际化处理： 请勾选分配项目！*/\r\n        }\r\n        let projectpks = pk||this.props.table.getCheckedRows(this.props.gridId)[0].data.values.pk_project.value\r\n\r\n        targetOrgIds.length===0?toast({\r\n            'color':'danger',\r\n            'content':this.props.json['10140PRJB-000001']/* 国际化处理： 请选择目标组织！*/\r\n        }): ajax({\r\n            url:'/nccloud/uapbd/pmbase/ProjectAssignOrgs.do',\r\n            data:{\r\n                pkcustList:[projectpks],\r\n                targetOrgIds:targetOrgIds,\r\n                isAssign:this.config.isAssign\r\n            },\r\n            success:(res)=>{\r\n                let{success,data} = res;\r\n                if(success){\r\n                    if(data&&data.hasOwnProperty('message')){\r\n                        toast({'color':'success','content':data.message});\r\n                        this.loadData();\r\n                        this.cancel();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    cancel(){\r\n        this.state.modal.show = false;\r\n        this.setState(this.state);\r\n    }\r\n\r\n    loadData=()=>{\r\n\r\n        this.props.getData&&this.props.getData(this.props.getUrlParam('id'));\r\n    }\r\n\r\n\r\n    loadSaleInfoGridData = ()=>{\r\n        let editStatusBtns = ['subG5ModalSave','subG5ModalCancel'];\r\n        let browseStatusBtns=['subGrid5Edit','subGrid5Del','subGrid5Addr','subGrid5Ref','subGrid5Print']\r\n        this.props.loadSubGridData&&this.props.loadSubGridData(\r\n            'shoulder',\r\n            this.props.config.subGrid5,\r\n            this.props.config.custsaleForm,\r\n            this.props.config.pagecode,\r\n            'querySubFormOrGrid',\r\n            editStatusBtns,\r\n            browseStatusBtns\r\n        );\r\n    }\r\n    loadFinaceInfoGridData = ()=>{\r\n        let editStatusBtns = ['subG4ModalSave','subG4ModalCancel'];\r\n        let browseStatusBtns=['subGrid4Edit','subGrid4Del','subGrid4Ref','subGrid4Pri'];\r\n        this.props.loadSubGridData&&this.props.loadSubGridData(\r\n            'shoulder',\r\n            this.props.config.subGrid4,\r\n            this.props.config.custfinanceForm,\r\n            this.props.config.pagecode,\r\n            'querySubFormOrGrid',\r\n            editStatusBtns,\r\n            browseStatusBtns\r\n        )\r\n    }\r\n    loadCreDitCtlInfoGridData =()=>{\r\n        let editStatusBtns = ['subG6ModalSave','subG6ModalCancel'];\r\n        let browseStatusBtns=['subG6Edit','subG6Del','subG6Ref','subG6Pri']\r\n        this.props.loadSubGridData&&this.props.loadSubGridData(\r\n            'shoulder',\r\n            this.props.config.subGrid6,\r\n            this.props.config.creditctlForm,\r\n            this.props.config.pagecode,\r\n            'querySubFormOrGrid',\r\n            editStatusBtns,\r\n            browseStatusBtns\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        let json = this.props.json;\r\n        var modalCfg = {...this.state.modal}\r\n        return (\r\n            <NCModal {...modalCfg} onHide = {this.cancel.bind(this)}>\r\n                <NCModal.Header closeButton={true}>\r\n                    <NCModal.Title>{this.config.isAssign?json['10140PRJB-000002']:json['10140PRJB-000003']}</NCModal.Title>{/* 国际化处理： 快速分配,快速取消分配*/}\r\n                </NCModal.Header>\r\n                <NCModal.Body>\r\n                    <div><OrgSelect ref={( item )=> this.orgSelect = item} {...{json:json}}/></div>\r\n                </NCModal.Body>\r\n                <NCModal.Footer>\r\n\r\n                    <NCButton onClick={ this.onsubmit.bind(this) }>{json['10140PRJB-000004']}</NCButton>{/* 国际化处理： 确定*/}\r\n                    <NCButton onClick={ this.cancel.bind(this) }>{json['10140PRJB-000005']}</NCButton>{/* 国际化处理： 取消*/}\r\n                </NCModal.Footer>\r\n            </NCModal>\r\n        );\r\n    }\r\n}\r\nexport default AssignModal;\r\n","//   pagecode:props.config.pageCode?props.config.pageCode:pagecode\r\n//  getMultiLang({moduleId: \"10140ADRB\",domainName: 'uapbd',callback})\r\n\r\n\r\nimport { toast} from 'nc-lightapp-front';\r\nexport default function(props){\r\n     return ( pageCfg = {} , langCfg = {}, callback ) => {\r\n\r\n         var count = 0;\r\n         var result = {};\r\n\r\n         var hander = () => {\r\n             if(count == 2){\r\n                 callback && callback(result.templateData || {} , result.langData || {},result.inlt||{});\r\n             }\r\n         }\r\n         if(langCfg.callback){\r\n             console.log('咱们自己createUIDom会同时获取多语和单据模板,并通过一个回调函数返回, langCfg中的回调函数将被忽略');\r\n         }\r\n\r\n         var newLangCfg = { ...langCfg, callback: (data, success,inlt) => {\r\n                    count = count + 1;\r\n                 if(!success){\r\n                     toast({content:'load muti lang error',color:'warning'});\r\n                 }\r\n                 result.langData = data || {};\r\n                 result.inlt = inlt || {};\r\n                 hander();\r\n         }};\r\n         props.MultiInit.getMultiLang(newLangCfg);\r\n\r\n         props.createUIDom(pageCfg, (data) => {\r\n             count = count + 1;\r\n             result.templateData = data || {};\r\n             hander();\r\n         });\r\n    };\r\n};","import React, { Component } from 'react';\r\nimport {base,ajax } from 'nc-lightapp-front';\r\nlet { NCTable,NCButton,NCCol,NCRow,NCTree  } = base;\r\n\r\nimport '../../../public/uapbdstyle/uapbd_style_common'\r\n\r\nvar EMPTY_FN = function(){};\r\n\r\nclass OrgSelect extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tree: {\r\n                main: this,\r\n                defNodeCfg: {\r\n\r\n                },\r\n                root: {\r\n                    root: true,\r\n                    key: 'root',\r\n                    title: this.props.json['10140PRJB-000006']/* 国际化处理： 组织*/\r\n                },\r\n                expandedKeys:[],\r\n                datas: [],\r\n                renderNode: function(datas = [],  parent){\r\n                    let renderFileTreeTitle = (item)=>{\r\n                        console.log(this,'renderFileTreeTitle');\r\n                        let className,\r\n                        isExpand = this.expandedKeys.includes(item.refpk);\r\n                        if(item && item.hasOwnProperty('children') && item.children.length > 0){\r\n                            className = isExpand ? \"icon iconfont  icon-wenjianjiadakai tree-wenjian\":\"icon iconfont  icon-wenjianjia tree-wenjian\";\r\n                        }else{\r\n                            className = \"tree-dian\";\r\n                        }\r\n                        return(\r\n                            <div className={\"title-con\"}>\r\n                                <i className={className}/><span className=\"title-middle\">{item.refname}</span>\r\n                            </div>\r\n                        )\r\n                    };\r\n                    var defNodeCfg = this.main.state.tree.defNodeCfg || {},\r\n                        renderfn = function(data){\r\n                            data.disableCheckbox = data.root == true || data.nodeData.orgclazz == 'orgtype';\r\n                            return data;\r\n                        },\r\n                        loopRender = function(datas){\r\n                            return datas.map(function(item){\r\n                                var nodecfg = {...defNodeCfg, ...item},\r\n                                children = item.children || [];\r\n                                return <NCTree.NCTreeNode\r\n                                            className='node-item'\r\n                                            { ...(renderfn ? renderfn(nodecfg) : nodecfg)} \r\n                                            title={renderFileTreeTitle(item)}\r\n                                            isLeaf={children.length ==0}>\r\n                                            {children.length ==0 ? '' : loopRender(children, item, renderfn)}\r\n                                        </NCTree.NCTreeNode>;  //根节点和一级节点不可勾选\r\n                            });\r\n                        };\r\n                    return loopRender( [{...this.root, children: this.datas}]);\r\n                },\r\n                config: function(){\r\n                    return {\r\n                        checkable: true,\r\n                        defaultExpandAll: true,\r\n                        checkStrictly: true,\r\n                        onCheck: function(selectedKeys, e){\r\n                            var node = e.node.props,\r\n                                checked = e.checked,\r\n                                selectedData = this.main.state.selectData.datas,\r\n                                data = {\r\n                                    id: node.id,\r\n                                    name: node.name,\r\n                                    code: node.nodeData.code\r\n                                };\r\n                            selectedData =  checked ? selectedData.concat(data) : selectedData.filter( (n) => n.id != data.id );\r\n                            this.main.state.selectData.datas = selectedData;\r\n                            this.main.setState(this.main.state);\r\n                        }.bind(this)\r\n                    }\r\n                }\r\n            },\r\n            table: {\r\n                main: this,\r\n                rowKey: 'id',\r\n                bodyStyle:{'overflow-y':'hidden',height:'390px'},\r\n                columns:[{\r\n                    title: this.props.json['10140PRJB-000007'],/* 国际化处理： 组织编码*/\r\n                    dataIndex: 'code',\r\n                    width: '40%'\r\n                },{\r\n                    title: this.props.json['10140PRJB-000008'],/* 国际化处理： 组织名称*/\r\n                    dataIndex: 'name',\r\n                    width: '40%'\r\n                },{\r\n                    title: this.props.json['10140PRJB-000009'],/* 国际化处理： 操作*/\r\n                    dataIndex: 'doit',\r\n                    width: '20%',\r\n                    render: function(text, record, index) {\r\n                        var delFn = function(){\r\n                            var datas = this.state.selectData.datas;\r\n                            this.state.selectData.datas = datas.filter((data) => data.id != record.id);\r\n                            this.setState(this.state);\r\n                        };\r\n                        return (<NCButton onClick={delFn.bind(this)}>{this.props.json['10140PRJB-000010']}</NCButton>);{/* 国际化处理： 删除*/}\r\n                    }.bind(this)\r\n                }]\r\n            },\r\n            selectData: {\r\n                datas: []\r\n            }\r\n\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.reset();\r\n    }\r\n    reset(){\r\n        ajax({\r\n            url: '/nccloud/uapbd/customer/assignTree.do',\r\n            data: {\r\n                orgtypeIDs:['BUSINESSUNIT00000000'],\r\n                isCludeGlobalAndGroupVO: false,\r\n                isProject_grp:true\r\n            },\r\n            success:(res) => {\r\n\r\n                var treedata =res.data;\r\n                this.state.selectData.datas = [];\r\n                this.state.tree.datas = treedata;\r\n                this.setState(this.state);\r\n            }\r\n        });\r\n    }\r\n\r\n    getData(){\r\n        return this.state.selectData.datas.map ( n => n.id);\r\n    }\r\n    // 树展开的回调函数\r\n    onExpandFn=(keys)=>{\r\n        this.state.tree.expandedKeys = keys;\r\n        this.setState(this.state);\r\n    }\r\n    render() {\r\n        var tree  = this.state.tree,\r\n            table = this.state.table,\r\n            selectDatas = this.state.selectData.datas,\r\n            checkedKeys = selectDatas.map( (d) => d.id );\r\n        return (\r\n            <div className = 'transfer_tree_container' style={{marginTop: 10}}>\r\n                <div className = 'left-area' style={{height:'450px',padding:'10px',background:'rgba(249,249,249,1)',width:'calc(50% - 25px)'}}>\r\n                    <div className = 'left-area-nei'>\r\n                        <div field=\"tree-area\" className=\"syncTreeCom\" style={{marginLeft: 20,height:'calc(100% - 40px)'}}>\r\n                            <div className='synctree-area'  fieldname=\"树控件\">\r\n                                <NCTree \r\n                                    closeIcon={<i field=\"tree-switcher\" fieldname=\"树开关\" class=\"icon iconfont icon-shushouqi tree-swich\"></i>}\r\n                                    openIcon={<i field=\"tree-switcher\" fieldname=\"树开关\" class=\"icon iconfont icon-shu_zk tree-swich\"></i>}\r\n                                    onExpand={this.onExpandFn}\r\n                                    expandedKeys={this.state.tree.expandedKeys}\r\n                                    {...tree.config()}\r\n                                    { ...{checkedKeys:checkedKeys}}>\r\n                                    {tree.renderNode()}\r\n                                </NCTree>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className = 'right-area' style={{marginLeft:30,height:'450px',padding:'10px',background:'rgba(249,249,249,1)',width:'calc(50% - 25px)',overflow:'hidden'}}>\r\n                    <NCTable  {...table} data={selectDatas} {...{scroll:{y: 390 }} }></NCTable>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default OrgSelect;\r\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./uapbd_style_common.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_style-loader@0.18.2@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./uapbd_style_common.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./uapbd_style_common.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  padding: 0;\\n  margin: 0;\\n}\\n/*定位容器*/\\n.uapbd_style_center_container {\\n  position: relative;\\n  /*容器 子元素 未定义距离*/\\n  /*容器 子元素 距离右边 20px*/\\n  /*容器 子元素 距离右边 20px*/\\n}\\n.uapbd_style_center_container .uapbd_style_center_undefined {\\n  position: absolute;\\n}\\n.uapbd_style_center_container .uapbd_style_center_right20 {\\n  position: absolute;\\n  top: 0;\\n  right: 20px;\\n  bottom: 0;\\n}\\n.uapbd_style_center_container .uapbd_style_center_left20 {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 20px;\\n}\\n/*出现 滚动条 的容器*/\\n.uapbd_style_scroll_container {\\n  overflow: auto;\\n}\\n/*定义滚动条轨道*/\\n.uapbd_style_scroll_container::-webkit-scrollbar-track {\\n  border-radius: 8px;\\n  background-color: white;\\n}\\n/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\\n.uapbd_style_scroll_container::-webkit-scrollbar {\\n  width: 8px;\\n}\\n/*定义滑块 内阴影+圆角*/\\n.uapbd_style_scroll_container::-webkit-scrollbar-thumb {\\n  border-radius: 8px;\\n  width: 8px;\\n  background-color: #d8d8d8;\\n}\\n.transfer_tree_container {\\n  clear: both;\\n  height: 90%;\\n  width: 100%;\\n  margin-top: 10px;\\n}\\n.transfer_tree_container .left-area {\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  width: calc(50% - 91px);\\n  overflow: auto;\\n}\\n.transfer_tree_container .button-area {\\n  height: 100%;\\n  width: 50px;\\n  display: inline-block;\\n  vertical-align: middle;\\n  padding-top: 30px;\\n  text-align: center;\\n}\\n.transfer_tree_container .button-area .opr-botton {\\n  padding-top: 25px;\\n  display: block;\\n  margin: 0 auto;\\n}\\n.transfer_tree_container .right-area {\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  width: calc(50% - 91px);\\n  overflow: auto;\\n}\\n.transfer_tree_container .transferSwitcherClassSelfNameHidden i {\\n  visibility: hidden;\\n}\\n.transfer_tree_container .left-area-tree .u-tree,\\n.transfer_tree_container .right-area-tree .u-tree {\\n  height: 360px;\\n  overflow: auto;\\n}\\n.transfer_tree_container .left-area-nei,\\n.transfer_tree_container .right-area-nei {\\n  height: 100%;\\n  border-radius: 3px;\\n  border: 1px solid #d0d0d0;\\n  background: #ffffff;\\n}\\n.transfer_tree_container .opr-botton-trans button {\\n  min-width: auto;\\n  width: 32px;\\n  height: 32px;\\n  padding: 0;\\n}\\n/*\\n * 这个是左树的 控制搜索框 宽度的。\\n */\\n.NC_syncTreeSearch_self_width {\\n  width: 240px!important;\\n}\\n.NC_syncTreeSearch_self_width .u-form-control-wrapper {\\n  width: 240px!important;\\n}\\n/*\\n * 这个是左树中加虚线样式。\\n */\\n.syncTreeComLineStyle .synctree-area .u-tree > li:only-child > ul:before {\\n  border-left: none;\\n}\\n.syncTreeComLineStyle .synctree-area .u-tree > li > ul:last-child::before {\\n  border-left: none;\\n}\\n.syncTreeComLineStyle .synctree-area .u-tree-child-tree-open > li::after {\\n  position: absolute;\\n  left: 8px;\\n  top: -15px;\\n  content: \\\"\\\";\\n  display: inline-block;\\n  width: 1px;\\n  height: 28px;\\n  border-left: 1px dashed #d0d0d0;\\n}\\n.syncTreeComLineStyle .synctree-area .node-item .u-tree-switcher {\\n  position: relative;\\n  z-index: 2;\\n}\\n.syncTreeComLineStyle .synctree-area li::after {\\n  border: none;\\n}\\n.syncTreeComLineStyle .synctree-area li {\\n  position: relative;\\n}\\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher {\\n  position: relative;\\n}\\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher::before {\\n  position: absolute;\\n  left: 11px;\\n  top: 8px;\\n  content: \\\"\\\";\\n  display: inline-block;\\n  width: 10px;\\n  border-top: 1px dashed #d0d0d0;\\n}\\n.syncTreeComLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\\n  visibility: hidden;\\n}\\n/*\\n * 穿梭树 线样式修改\\n */\\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li:only-child > ul:before {\\n  border-left: none;\\n}\\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li > ul:last-child::before {\\n  border-left: none;\\n}\\n.syncTreeComTransferLineStyle .synctree-area .u-tree-child-tree-open > li::after {\\n  position: absolute;\\n  left: 8px;\\n  top: -15px;\\n  content: \\\"\\\";\\n  display: inline-block;\\n  width: 1px;\\n  height: 28px;\\n  border-left: 1px dashed #d0d0d0;\\n}\\n.syncTreeComTransferLineStyle .synctree-area .node-item .u-tree-switcher {\\n  position: relative;\\n  z-index: 2;\\n}\\n.syncTreeComTransferLineStyle .synctree-area li::after {\\n  border: none;\\n}\\n.syncTreeComTransferLineStyle .synctree-area li {\\n  position: relative;\\n}\\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_show_point_line::before {\\n  position: absolute;\\n  left: 11px;\\n  top: 8px;\\n  content: \\\"\\\";\\n  display: inline-block;\\n  width: 10px;\\n  border-top: 1px dashed #d0d0d0;\\n}\\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line::before {\\n  position: absolute;\\n  left: 11px;\\n  top: 8px;\\n  content: \\\"\\\";\\n  display: inline-block;\\n  width: 10px;\\n  border-top: 1px dashed #d0d0d0;\\n}\\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\\n  visibility: hidden;\\n}\\n.node-item-edit-point-style-self > a {\\n  background-color: #ebedf2;\\n}\\n.node-item-edit-point-style-self > a span {\\n  color: #e14c46!important;\\n}\\n.table-slef-set-long span {\\n  margin-right: 0px!important;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n"],"sourceRoot":""}