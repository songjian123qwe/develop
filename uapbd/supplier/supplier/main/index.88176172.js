!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uapbd/supplier/supplier/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uapbd/supplier/supplier/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=418)}({1:function(t,a){t.exports=e},133:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(s)?e:(n=0===s.indexOf("//")?s:0===s.indexOf("/")?a+s:r+s.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},2:function(e,a){e.exports=t},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDialogConfig=t.approveSupplier=t.showAddressBookDialog=t.showBankAccDialog=t.resetTableRows=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.convertForm2GridData=function(e,t){var a=new Object;return this.props.meta.getMeta()[t].items.forEach(function(t){var r=function(e){return e.indexOf(".")>-1?e.substr(e.indexOf(".")+1):e}(t.attrcode),s=!0,o=!1,i=void 0;try{for(var c,l=Object.entries(e)[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=c.value,d=n(u,2),p=d[0],f=d[1];if(r==p){f.scale=0,a[t.attrcode]=f;break}}}catch(e){o=!0,i=e}finally{try{!s&&l.return&&l.return()}finally{if(o)throw i}}}),a};var s=l(a(425)),o=l(a(426)),i=l(a(429)),c=a(1);function l(e){return e&&e.__esModule?e:{default:e}}t.resetTableRows=function(e,t){var a=this;this.props.cardTable.getAllRows(e).filter(function(r){r.values.pk_linkman.value==t.pk_linkman.value&&(delete r.values,r.values=t,a.props.cardTable.setTableData(e,u({rows:a.props.cardTable.getAllRows(e)},[r])))})};var u=function(e,t){if(t){var a=new Map;return t.forEach(function(e){a.set(e.rowid,e)}),e.rows&&e.rows.forEach(function(t,r){a.get(t.rowid)&&(e.rows[r]=a.get(t.rowid))}),e}},d=(t.showBankAccDialog=function(e){d&&d.call(this),this.BankAccDialog.showDialog({},this.SupBankAcc.setPk_supplier.bind(this,e))},function(e){this.SupBankAcc.setSupBankAccTableColumn(this.props.meta.getMeta().custsupbankacc.items.filter(function(e){return!!e.visible})),e&&e()}),p=(t.showAddressBookDialog=function(e){this.AddressBookDialog.showDialog({},this.AddressBook.setPk_supplier.bind(this,e))},t.approveSupplier=function(e){(0,c.ajax)({url:this.state.urls.approveSupplierUrl,data:Object.assign(p.call(this),e),success:function(e){}})},function(){var e=new Array,t=new Map;return this.state.batchParam.forEach(function(a){e.push(a.data.values.pk_supplier.value),t.set(a.data.values.pk_supplier.value,a.data.values.ts.value)}),{pk_suppliers:e,pk_tsMap:t}});t.getDialogConfig=function(e){var t=this;switch(e){case"DeleteDialog":return{showFooter:!0,style:{dialogWidth:"400px",dialogHeight:"200px"},header:{dialogTitle:"确认删除?"},body:{renderDialogContent:function(){return React.createElement("p",{style:{margin:"20px 20px 20px 20px"}},"删除可能等待很长的时间，可以点击'后台删除'按钮，调用后台任务执行。")}},footer:{renderSelfDefBtns:!0,selfDefBtn:{renderCancel:!0,buttonItem:[{name:"删除",action:function(){t.onMainTableOperateDelClick(!1)},style:{backgroundColor:"#E14C46",color:"#fff"}},{name:"后台删除",action:function(){t.onMainTableOperateDelClick(!0)},style:{backgroundColor:"#E14C46",color:"#fff"}}]}}};case"BankAccDialog":return{showFooter:!1,listener:{onAfterSureClick:this.onSupBankaccDialogClose,onAfterHeaderCloseClick:this.onSupBankClickClose},style:{dialogWidth:"60%",dialogHeight:"70%"},header:{dialogTitle:"银行账户"},body:{renderDialogContent:function(){var e=this,t=r({},this.state.card.dialog.supbankacc,this.props);return React.createElement(o.default,r({},t,{ref:function(t){e.SupBankAcc=t}}))}.bind(this)}};case"LinkmanDialog":return{showFooter:!0,listener:{onAfterSureClick:this.onLinkmanDialogClose},style:{dialogWidth:"60%",dialogHeight:"50%"},header:{dialogTitle:"联系人"},body:{renderDialogContent:function(){var e=this,t=r({},this.state.card.dialog.linkman,{form:this.props.form,meta:this.props.meta});return React.createElement(s.default,r({},t,{ref:function(t){e.Linkman=t}}))}.bind(this)}};case"AddressBook":return{showFooter:!1,style:{dialogWidth:"80%",dialogHeight:"60%"},header:{dialogTitle:"供应商发货地址"},body:{renderDialogContent:function(){var e=this,t=r({},this.state.card.dialog.supaddress,this.props);return React.createElement(i.default,r({},t,{ref:function(t){e.AddressBook=t}}))}.bind(this)}}}}},3:function(e,t){e.exports=a},398:function(e,t,a){var r=a(421);"string"==typeof r&&(r=[[e.i,r,""]]);var n={transform:void 0};a(5)(r,n);r.locals&&(e.exports=r.locals)},4:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var n=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),s=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[a].concat(s).concat([n]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a}).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var s=this[n][0];"number"==typeof s&&(r[s]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&r[o[0]]||(a&&!o[2]?o[2]=a:a&&(o[2]="("+o[2]+") and ("+a+")"),t.push(o))}},t}},418:function(e,t,a){e.exports=a(419)},419:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(2),c=h(i),l=h(a(3)),u=a(1),d=h(a(420));a(422);var p=a(424),f=a(430),b=a(292);function h(e){return e&&e.__esModule?e:{default:e}}var m=u.base.NCCheckbox,k=(u.base.NCIcon,u.base.NCPopconfirm,u.base.NCTable,u.base.NCRow,u.base.NCCol,u.base.NCButton,u.base.NCScrollLink),v=u.base.NCScrollElement,C=(u.base.NCAffix,u.base.NCAnchor),_=function(){},B=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.call(a);return a.state={envParam:{},showoff:{checked:void 0,disabled:!1,onChange:function(e){a.state.showoff.checked=e,a.setState(a.state,function(){a.onSearch(a.setTableData)})},name:"显示停用"},buttonApps:{area:"supplier_baseInfo",buttonLimit:3,onButtonClick:f.onMainTableButtonClick.bind(a)},search:{id:"supplierquery",clickSearchBtn:function(){a.onSearch(a.setTableData)},url:"/nccloud/uapbd/supplier/querySupplierBaseInfo.do",oid:a.props.oid||"0001Z81000000000CWIB"},table:{id:"supplier_baseInfo",showCheck:!0,showIndex:!0,onSelected:a.onSupplierMainTableChecked.bind(a,a.disabledApproveButtons),operator:{attrcode:"opr",itemtype:"customer",label:"操作",width:200,className:"table-opr",fixed:"right",visible:!0,render:function(e,t,r){var n=new Array;return a.props.button.getButtons().forEach(function(e){"supplier_baseInfo_opr"==e.area&&n.push(e.key)}),a.props.button.createOprationButton(n,{area:"supplier_baseInfo_opr",buttonLimit:3,onButtonClick:f.onSupMainTableOprBtnClick.bind(a,t,r)})}}},batchParm:[],param:{status:"add"},oldParam:{},delParam:{},openCard:!1,urls:{addUrl:"/nccloud/uapbd/supplier/addSupplier.do",editUrl:"/nccloud/uapbd/supplier/editSupplier.do",saveUrl:"/nccloud/uapbd/supplier/saveSupplier.do",saveAddUrl:"/nccloud/uapbd/supplier/saveAddSupplier.do",cancelUrl:"/nccloud/uapbd/supplier/cancelSupplier.do",delLineUrl:"/nccloud/uapbd/supplier/delLineUrl.do",saveLinkmanUrl:"/nccloud/uapbd/supplier/saveLinkman.do",queryLinkmanUrl:"/nccloud/uapbd/supplier/queryLinkman.do",queryCardUrl:"/nccloud/uapbd/supplier/querycard.do",delSupplier:"/nccloud/uapbd/supplier/deleteSupplier.do",copySupplierUrl:"/nccloud/uapbd/supplier/copySupplier.do",approveSupplierUrl:"nccloud/uapbd/supplier/approveSupplier.do"},card:{form:{formName:"基本信息",formId:"supplier_baseInfo_card",primaryKey:"pk_supplier",action:{onAfterEvent:a.onAfterCardFormEditEvent.bind(a)}},table:{tableIds:["suplinkman","supcountrytaxes","supbankacc","finance","purchase"],suplinkman:{tableName:"联系人",tableId:"suplinkman",relate:"agg",btnApp:{area:"card_table",buttonLimit:3,onButtonClick:a.onCardTableButtonClick.bind(a,"suplinkman"),popContainer:document.querySelector(".card_table")},field:{attrcode:"opr",label:"操作",visible:!0,className:"table-opr",width:200,itemtype:"customer",fixed:"right",render:function(e,t,r){return c.default.createElement("span",{field:"card_table_operator",fieldname:"按钮区域"},c.default.createElement("span",{field:"EditLine",fieldname:"修改",className:"row-edit-option",onClick:function(){("add"==a.state.param.status||"edit"==a.state.param.status)&&a.onCardTableOperatEditEvent("suplinkman",e,t,r)}},"修改",c.default.createElement("span",{className:"split-line"},"|")),c.default.createElement("span",{field:"DeleteLine",fieldname:"删行",className:"row-edit-option",onClick:function(){("add"==a.state.param.status||"edit"==a.state.param.status)&&a.onCardTableOperatDeleteEvent("suplinkman",e,t,r)}},"删行"))}}},supcountrytaxes:{tableName:"国家税类",tableId:"supcountrytaxes",relate:"agg",btnApp:{area:"card_table",buttonLimit:3,onButtonClick:a.onCardTableButtonClick.bind(a,"supcountrytaxes"),popContainer:document.querySelector(".card_table")},field:{attrcode:"opr",label:"操作",visible:!0,className:"table-opr",width:200,itemtype:"customer",fixed:"right",render:function(e,t,r){return c.default.createElement("span",{field:"card_table_operator",fieldname:"按钮区域"},c.default.createElement("span",{field:"DeleteLine",fieldname:"删行",className:"row-edit-option",onClick:function(){("add"==a.state.param.status||"edit"==a.state.param.status)&&a.onCardTableOperatDeleteEvent("supcountrytaxes",e,t,r)}},"删行"))}}},supbankacc:{tableName:"银行账户",tableId:"supbankacc",relate:"inci"},finance:{tableName:"财务信息",tableId:"finance",relate:"inci"},purchase:{tableName:"采购信息",tableId:"purchase",relate:"inci"}},buttonApps:{area:"supplier_baseInfo_card",buttonLimit:3,onButtonClick:p.onCardButtonClick.bind(a),popContainer:document.querySelector(".supplier_baseInfo_card")},pagination:{handlePageInfoChange:a.onPageInfoClick.bind(a)},dialog:{linkman:{formName:"联系人",formId:"linkman",targetId:"suplinkman"},supbankacc:{tableId:"custsupbankacc",tableName:"供应商银行账户",targetId:"supbankacc",pk_supplier:null},supaddress:{tableId:"supaddress",tableName:"供应商发货地址",pk_supplier:null}}}},a.props.createUIDom({pagecode:a.props.pagecode||"10140SUB_base",appcode:a.props.appcode||"10140SUB",appid:a.props.appid||"0001Z010000000002G42"},function(e){!function(e){(0,u.ajax)({url:"/nccloud/uapbd/supplier/envParamUrl.do",data:{nodeType:a.props.nodeType||"GLOBE_NODE",pk_curOrg:""},success:function(t){e&&e(t.data||{})}})}(function(t){a.state.envParam=t,function(e){e.formrelation=new Object,e.formrelation.accbasinfo=["netbankinfo"],function(e){(e&&e.supplierquery&&e.supplierquery.items?e.supplierquery.items:[]).forEach(function(e){if("refer"==e.itemtype)switch(e.attrcode){case"csupplierid.pk_org":case"csupplierid.pk_org_assign":e.refcode="uapbd/refer/org/BusinessUnitWithGlobleAndCurrGropTreeRef/index.js";break;case"csupplierid.pk_supplierclass":e.refcode="uapbd/refer/supplier/SupplierClassTreeRef/index.js",e.isMultiSelectedEnabled=!0;break;case"csupplierid.pk_areacl":e.refcode="uapbd/refer/address/AreaclTreeRef/index.js";break;case"csupgradesysid":e.refcode="uapbd/refer/supplier/SupplierGradeSysGridRef/index.js";break;case"csupgrade":e.refcode="uapbd/refer/supplier/SupplierGradeTreeGridRef/index.js";break;case"pk_supplierext_p.cmarbasclassid":e.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js";break;case"pk_suptaxes":e.refcode="uapbd/refer/pub/SuptaxesGridRef/index.js"}})}(e),function(e){e.supplier_baseInfo.items.forEach(function(e){e.width=150,"code"==e.attrcode&&(e.render=function(e,t,r){return c.default.createElement("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){a.setState({batchParam:[{data:{values:t}}],param:{pk_supplier:t.pk_supplier.value,status:"browse",index:r},oldParam:{pk_supplier:t.pk_supplier.value,status:"browse",index:r},openCard:!a.state.openCard},function(){a.initPageData(a.setCardValue,a.setCardStatus)})}},t?t.code&&t.code.value:null)})})}(e),function(e){e.supplier_baseInfo.items.push(a.state.table.operator)}(e)}(e.template),a.props.meta.setMeta(e.template,function(){a.setSearchAreaOrgDefaultValue(),a.meta2TableFieldAdapter("custsupbankacc")}),a.props.button.setButtons(e.button||[],function(){f.setMainTableButtonStatus.call(a)})})}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"onSearch",value:function(e){var t=this,a={pageInfo:this.props.table.getTablePageInfo(this.state.table.id),querycondition:this.props.search.getAllSearchData(this.state.search.id),oid:this.state.search.oid,queryAreaCode:this.state.search.id,querytype:"tree"};(0,u.ajax)({url:this.state.search.url,data:a,success:function(a){a.success&&e&&e(a.data,f.setMainTableButtonStatus.bind(t)),t.disabledApproveButtons(!0)}})}},{key:"renderSubTables",value:function(e,t,a){var r=this;a&&a();var n=this.props.cardTable.createCardTable;return Object.keys(this.state.card.table).map(function(a){return c.default.createElement("div",{className:"nc-bill-table-area"},c.default.createElement(v,{name:r.state.card.table[a].tableId},n(a,{tableHead:e.bind(r,a)||_,modelSave:t.bind(r,a)||_,showIndex:!0})))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,r=t.button,n=t.search,o=t.cardPagination,i=t.form,u=n.NCCreateSearch,p=a.createSimpleTable,f=(o.createCardPagination,i.createForm),h=r.createButtonApp;r.createButton;return c.default.createElement("div",{style:{width:"100%",height:"100%"}},c.default.createElement("div",{className:"ncc-hr-multi-child-container",style:{display:this.state.openCard?"block":"none"}},c.default.createElement(C,null,this.renderAnchor()),c.default.createElement("div",{className:"ncc-hr-multi-child-header"},c.default.createElement("div",{className:"nc-bill-header-area"},c.default.createElement("div",{className:"header-title-search-area"},c.default.createElement("h2",{className:"title-search-detail"},"供应商")),c.default.createElement("div",{className:"header-button-area",style:{zIndex:"1"}},h(this.state.card.buttonApps)))),c.default.createElement("div",{className:"ncc-hr-multi-child-body"},c.default.createElement("div",{className:"nc-bill-form-area"},c.default.createElement(v,{name:this.state.card.form.formId},f(this.state.card.form.formId,this.state.card.form.action))),this.renderSubTables(this.addCardTableButton,this.modelSave,this.addCardTableOperateField))),c.default.createElement("div",{className:"nc-single-table",style:{display:this.state.openCard?"none":"block"}},c.default.createElement("div",{className:"nc-singleTable-header-area"},c.default.createElement("div",{className:"header-title-search-area"},c.default.createElement("h2",{className:"title-search-detail"},"供应商"),c.default.createElement("div",{className:"title-search-detail"},!this.state.openCard&&c.default.createElement("span",{className:"showOff"},c.default.createElement(m,this.state.showoff,this.state.showoff.name)))),c.default.createElement("div",{className:"header-button-area"},h(this.state.buttonApps))),c.default.createElement("div",{className:"nc-singleTable-search-area"},u(this.state.search.id,this.state.search)),c.default.createElement("div",{className:"nc-singleTable-table-area"},p(this.state.table.id,this.state.table))),l.default.createPortal(c.default.createElement(d.default,s({},b.getDialogConfig.call(this,"DeleteDialog"),{ref:function(t){e.DeleteDialog=t}})),document.body),l.default.createPortal(c.default.createElement(d.default,s({},b.getDialogConfig.call(this,"LinkmanDialog"),{ref:function(t){e.LinkmanDialog=t}})),document.body),l.default.createPortal(c.default.createElement(d.default,s({},b.getDialogConfig.call(this,"BankAccDialog"),{ref:function(t){e.BankAccDialog=t}})),document.body),l.default.createPortal(c.default.createElement(d.default,s({},b.getDialogConfig.call(this,"AddressBook"),{ref:function(t){e.AddressBookDialog=t}})),document.body))}}]),t}(),n=function(){var e=this;this.onSupMainTableOprBtnClick=function(e,t){},this.setSearchAreaOrgDefaultValue=function(){var t=e.state.envParam;e.props.meta.getMeta().supplierquery.items.filter(function(a){if(a.attrcode.endsWith("pk_org_assign")||a.attrcode.endsWith("pk_org")){var r={value:t.pk_org,display:t.name};e.props.search.setSearchValByField("supplierquery",a.attrcode,r)}})},this.meta2TableFieldAdapter=function(t){e.props.meta.getMeta()[t].items.forEach(function(e){e.title=e.label,e.dataIndex=e.attrcode,e.key=e.attrcode,e.width=100})},this.onDeleteMainTableSupplier=function(t){for(var a=new Object,r=0;r<t.length;r++){var n=t[0];a[n.data.values.pk_supplier.value]=n.data.values.ts.value}e.setState({delParam:{delPks:t.map(function(e){return e.data.values.pk_supplier.value}),ts:a,indexs:t.map(function(e){return e.index})}},function(){e.DeleteDialog.showDialog()})},this.setTableData=function(t,a){e.props.table.setAllTableData(e.state.table.id,t?t[e.state.table.id]:{rows:[]});var r=a?"查询成功，已查到"+a()+"张单据。":null;t?(0,u.toast)({title:"提示",content:r,color:"success"}):(0,u.toast)({title:"提示",content:"未查到符合条件的数据，请确认查询条件后再查询。",color:"info"})},this.onSupplierMainTableChecked=function(t,a,r,n){var s=a.table.getCheckedRows(r);e.setState({batchParam:s},function(){t&&t(!!s.find(function(e){return e.data&&e.data.values&&"1"==e.data.values.supstate.value}))})},this.disabledApproveButtons=function(t){e.props.button.setButtonDisabled(["Approve","Menu_Approve"],!!t),e.props.button.setButtonDisabled(["UnApprove"],!t)},this.setCardValue=function(t,a){var r=t&&t.hasOwnProperty("card")?t.card:t,n=!(!t||!t.hasOwnProperty("disabledItems"))&&t.disabledItems;r&&e.props.form.setAllFormValue(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},e.state.card.form.formId,r.head.supplier_baseInfo)),r.bodys&&e.state.card.table.tableIds.forEach(function(t){r.bodys[t]&&e.props.cardTable.setTableData(e.state.card.table[t].tableId,{rows:r.bodys[t].rows})}),n&&a&&a(t.disabledItems)},this.setCardStatus=function(t,a){var r=(0,p.getCurCardStatus)(t);e.props.form.setFormStatus(e.state.card.form.formId,r),e.state.card.table.tableIds.forEach(function(t){"agg"==e.state.card.table[t].relate&&e.props.cardTable.setStatus(e.state.card.table[t].tableId,r)}),a&&a()},this.initPageData=function(t,a,r){var n=e.state.param?e.state.param.pk_supplier:null,s=e.state.param?e.state.param.status:"edit";r||(r=n?e.state.urls.queryCardUrl:e.state.urls.addUrl),(0,u.ajax)({url:r,data:{pk_supplier:n,pageCode:e.props.pagecode},success:function(r){r.success&&t&&t(r.data,p.disabledFormItems.bind(e)),r.success&&a&&a(s,p.setCardButtonStatus.bind(e))}})},this.onPageInfoClick=function(){},this.onAfterCardFormEditEvent=function(){},this.onCardTableOperatEditEvent=function(t,a,r,n){(0,u.ajax)({url:e.state.urls.queryLinkmanUrl,data:{pk_linkman:r.values.pk_linkman.value},success:function(t){t.success&&(e.props.form.setAllFormValue({linkman:t.data.linkman}),e.props.form.setFormStatus("linkman","edit"),e.LinkmanDialog.showDialog())}})},this.onCardTableOperatDeleteEvent=function(t,a,r,n){e.props.cardTable.delRowsByIndex(t,n)},this.onCardTableButtonClick=function(t,a,r){switch(t){case"suplinkman":e.props.form.setFormStatus("linkman","edit"),e.LinkmanDialog.showDialog();break;case"supcountrytaxes":e.props.cardTable.addRow(t),e.props.cardTable.setStatus(t,"edit")}},this.renderAnchor=function(){return function(e){return e.map(function(e){return c.default.createElement(k,{to:e.formId||e.tableId,spy:!0,smooth:!0,duration:300,offset:-100},c.default.createElement("p",null,e.formName||e.tableName))})}(function(){var t=new Array;t.push(e.state.card.form);var a=!0,r=!1,n=void 0;try{for(var s,o=e.state.card.table.tableIds[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var i=s.value;t.push(e.state.card.table[i])}}catch(e){r=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw n}}return t}())},this.modelSave=function(){},this.addCardTableButton=function(t){var a=e.props.button.createButtonApp;return c.default.createElement("div",{className:"shoulder-definition-area"},c.default.createElement("div",{className:"definition-icons"},e.state.card.table[t].btnApp&&a(e.state.card.table[t].btnApp)))},this.addCardTableOperateField=function(){var t=e.props.meta.getMeta();Object.keys(e.state.card.table).forEach(function(a){e.state.card.table[a].field&&t[a]&&t[a].hasOwnProperty("items")&&!t[a].items.find(function(e){return"opr"==e.attrcode})&&t[a].items.push(e.state.card.table[a].field)})},this.onMainTableOperateDelClick=function(t){(0,u.ajax)({url:e.state.urls.delSupplier,data:Object.assign(e.state.delParam,{isAsyncDel:t}),success:function(t){t.success&&e.state.param.indexs.forEach(function(t){e.props.table.deleteTableRowsByIndex(e.state.table.id,t)}),e.setState({delParam:{}},function(){t.success&&(0,u.toast)({color:"success",content:"删除成功！"})})}})},this.onLinkmanDialogClose=function(){var t=e.state.card.dialog.linkman,a=t.formId,r=t.targetId,n=e.props.form.getAllFormValue(a);n.areacode=a,n.rows.status="2",(0,u.ajax)({url:e.state.urls.saveLinkmanUrl,data:{model:n,pageid:e.props.pagecode},success:function(t){var n=e.props.cardTable.getNumberOfRows(r);1==t.data[a].rows[0].values.status.value?b.resetTableRows.call(e,r,b.convertForm2GridData.call(e,t.data[a].rows[0].values,r)):e.props.cardTable.addRow(r,n,b.convertForm2GridData.call(e,t.data[a].rows[0].values,r)),e.props.cardTable.setStatus(r,"browse")}})},this.onSupBankaccDialogClose=function(){},this.onSupBankClickClose=function(t){e.SupBankAcc.setCardStatus(!1),t&&t()}},r);t.default=B,t.default=B=(0,u.createPage)({initTemplate:{}})(B)},420:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(2),o=function(e){return e&&e.__esModule?e:{default:e}}(s),i=a(1);a(398);var c=i.base.NCRow,l=i.base.NCCol,u=i.base.NCButton,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.listener=a.props.listener||{},a.state={showDialog:a.props.showDialog||!1,style:Object.assign({dialogWidth:"60%",dialogHeight:null,dialogZIndex:"300"},a.props.style),header:Object.assign({dialogTitle:"",onDialogClose:function(e,t){e&&"function"==typeof e&&e(),!e&&a.listener.onBeforeHeaderCloseClick&&a.listener.onBeforeHeaderCloseClick(),a.setState({showDialog:!a.state.showDialog},function(){document.body.style.overflow="auto",t&&"function"==typeof t&&t(),!t&&a.listener.onAfterHeaderCloseClick&&a.listener.onAfterHeaderCloseClick()})}},a.props.header),shoulder:Object.assign({showShoulderArea:!1,renderShoulder:function(){}},a.props.shoulder),body:Object.assign({renderDialogContent:function(){}},a.props.body),footer:Object.assign({renderInRight:!0,defaultButton:{sure:{name:"确认",key:"sure",style:{backgroundColor:"#E14C46",color:"#fff"},action:function(){a.state.header.onDialogClose(a.listener.onBeforeSureClick,a.listener.onAfterSureClick)}},cancel:{name:"取消",key:"cancel",style:{backgroundColor:"#eee",color:"#666",marginLeft:"9px"},action:function(){a.state.header.onDialogClose(a.listener.onBeforeCancelClick,a.listener.onAfterCancelClick)}}},renderSelfDefBtns:!1,selfDefBtn:{renderCancel:!1,buttonItem:[{name:"你好",action:function(){},style:{}}]}},a.props.footer),showFooter:!!a.props.showFooter},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),n(t,[{key:"componentWillReceiveProps",value:function(e){var t={show:e.show,compName:e.compName};this.setState(r({},t))}}]),n(t,[{key:"showDialog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=arguments[2];t&&t(),this.setState(Object.assign(e,this.state,{showDialog:!0}),function(){document.body.style.overflow="hidden",a&&a()})}},{key:"renderFooterButtons",value:function(){var e=this;return o.default.createElement(c,{style:{"margin-left":"auto","margin-right":"auto"}},o.default.createElement(l,{xs:12,md:12,sm:12},function(){if(e.state.footer.renderSelfDefBtns)return e.state.footer.selfDefBtn.buttonItem.map(function(e){return o.default.createElement(u,{style:e.style,onClick:e.action},e.name)})}.call(this),function(){if(e.state.footer.renderSelfDefBtns&&e.state.footer.selfDefBtn.renderCancel)return o.default.createElement(u,{style:e.state.footer.defaultButton.cancel.style,onClick:e.state.footer.defaultButton.cancel.action},e.state.footer.defaultButton.cancel.name)}.call(this),function(){if(!e.state.footer.renderSelfDefBtns)return Object.values(e.state.footer.defaultButton).map(function(e){return o.default.createElement(u,{style:e.style,onClick:e.action},e.name)})}.call(this)))}},{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"refer-pop-window",style:{display:this.state.showDialog?"flex":"none","z-index":this.state.style.dialogZIndex},onMouseOver:function(e){e.stopPropagation()}},o.default.createElement("div",{className:"refer-popover clearfix",ref:function(t){e.popover=t},onClick:function(e){e.stopPropagation()},style:{width:this.state.style.dialogWidth,height:this.state.style.dialogHeight}},o.default.createElement("div",{className:"refer-header"},o.default.createElement("div",{className:"refer-title",key:"1"},this.state.header.dialogTitle||""),o.default.createElement("div",{className:"refer-header-extend",key:"2"}),o.default.createElement("div",{className:"refer-close iconfont icon-guanbi",onClick:this.state.header.onDialogClose,key:"5"})),this.state.shoulder.showShoulderArea&&o.default.createElement("div",{className:"refer-search"},this.state.shoulder.renderShoulder()),o.default.createElement("div",{className:"refer-content-area "+(this.state.showFooter?"ncc-hr-dialog-content-area0":"ncc-hr-dialog-content-area1"),style:{width:"100%",overflow:"auto"}},this.state.body.renderDialogContent()),this.state.showFooter&&o.default.createElement("div",{className:"loading-container"},o.default.createElement("div",{className:"refer-buttom",style:{textAlign:"right"}},o.default.createElement("div",{className:"buttons",style:{width:"100%"},key:"3"},this.renderFooterButtons.call(this))))))}}]),t}();t.default=d},421:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,".ncc-hr-dialog-content-area0 {\n  height: calc(100% - 90px) !important;\n}\n.ncc-hr-dialog-content-area1 {\n  height: calc(100% - 60px) !important;\n}\n",""])},422:function(e,t,a){var r=a(423);"string"==typeof r&&(r=[[e.i,r,""]]);var n={transform:void 0};a(5)(r,n);r.locals&&(e.exports=r.locals)},423:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,".ncc_hr_table_opr_split {\n  color: #d9d9d9;\n  display: inline-block;\n  height: 13px;\n  overflow: hidden;\n}\nncc_hr_table_opr_split_margin {\n  margin-left: 6px;\n}\n.ncc-hr-multi-child-container {\n  width: 100%;\n  height: 100%;\n  background-color: #FFFFFF;\n}\n.ncc-hr-multi-child-header {\n  width: 100%;\n  height: 60px;\n  border-bottom: 2px solid #EDECEC;\n  background-color: #FFFFFF;\n  z-index: 1;\n}\n.ncc-hr-multi-child-body {\n  position: absolute;\n  top: 68px;\n  bottom: 5px;\n  left: 38px;\n  right: 38px;\n  overflow: auto;\n  background-color: #FFFFFF;\n  z-index: 0;\n}\n/**树卡中 左树  滚动条的样式**/\n.ncc-hr-multi-child-body::-webkit-scrollbar {\n  /*整个滚动条区域的宽度*/\n  width: 8px;\n  height: 8px;\n}\n.ncc-hr-multi-child-body::-webkit-scrollbar-button {\n  /*滚动条上下两边的按钮*/\n  display: none;\n}\n.ncc-hr-multi-child-body::-webkit-scrollbar-thumb {\n  /*真滚动条样式*/\n  background: rgba(0, 0, 0, 0.54);\n  border-radius: 100px ;\n}\n.ncc-hr-multi-child-body::-webkit-scrollbar-track {\n  /*滚动条滚动的轨道*/\n  display: none;\n}\n",""])},424:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurCardStatus=t.disabledFormItems=t.setCardButtonStatus=t.onCardButtonClick=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=a(1),s=a(292);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.onCardButtonClick=function(e,t){var a=this;switch(t){case"Card_Add":i.call(this);break;case"Card_Edit":c.call(this,b.bind(this));break;case"Card_Save":this.props.form.isCheckNow(this.state.card.form.formId),l.call(this);break;case"Card_SaveAdd":l.call(this,i.bind(this));break;case"Card_Delete":var r=d.call(this);this.setState({delParam:{delPks:[r.pk_supplier],ts:o({},r.pk_supplier,r.ts),indexs:[this.state.param.index]}},function(){a.DeleteDialog.showDialog()}),b.call(this);break;case"Card_Copy":var n=d.call(this);this.setState({param:{status:"add",pk_supplier:n.pk_supplier},oldParam:{status:"add",pk_supplier:n.pk_supplier}},function(){a.initPageData(a.setCardValue,a.setCardStatus,a.state.urls.copySupplierUrl),a.setState({param:{status:"add",pk_supplier:null}})});case"Card_Cancel":"edit"!=this.state.oldParam.status&&f.call(this);var u=this.state.param.pk_supplier?this.state.param.pk_supplier:this.state.oldParam.pk_supplier;this.setState({param:{status:u?"edit_cancel":"add_cancel",pk_supplier:u}},function(){a.initPageData(a.setCardValue,a.setCardStatus)});break;case"Card_Return":f.call(this),e.button.setButtonDisabled("Card_Return",!0),this.setState({openCard:!this.state.openCard,param:{},oldParam:{}},function(){a.props.search.getAllSearchData(a.state.search.id)&&a.onSearch(a.setTableData),e.button.setButtonDisabled("Card_Return",!1)});break;case"Card_BankAccount":s.showBankAccDialog.call(this,this.state.param.pk_supplier?this.state.param.pk_supplier:this.state.oldParam.pk_supplier);break;case"Card_AddressBook":s.showAddressBookDialog.call(this,this.state.param.pk_supplier?this.state.param.pk_supplier:this.state.oldParam.pk_supplier);break;case"Card_Approve":case"Card_Menu_Approve":s.approveSupplier.call(this,{approve:!0});break;case"Card_UnApprove":s.approveSupplier.call(this,{approve:!1})}};var i=function(e,t){var a=this;f.call(this),this.setState({param:{status:"add",pk_supplier:null}},function(){a.initPageData(a.setCardValue,a.setCardStatus),e&&t&&t(e)})},c=function(e){var t=this;this.setState({param:{status:"edit"}},function(){t.props.form.setFormStatus(t.state.card.form.formId,"edit"),t.state.card.table.tableIds.forEach(function(e){t.props.cardTable.setStatus(e,"edit")}),e&&e()})},l=function(e){var t=this,a=this.state.card.table.tableIds.filter(function(e){return"agg"==t.state.card.table[e].relate}),r=this.props.createExtCardData("10140SUB_base_card",this.state.card.form.formId,a);(0,n.ajax)({url:this.state.urls.saveUrl,data:r,success:function(a){a.success&&t.setState({param:{status:"browse"}},function(){p.call(t,t.state.param.status,a.data,b.bind(t)),!e&&(0,n.toast)({color:"success",content:"保存成功"});var r={pk_supplier:a.data.head.supplier_baseInfo_card.rows[0].values.pk_supplier.value,status:"add"};e&&e(r,u.bind(t))})}})},u=function(e){this.setState({param:e,oldParam:e})},d=function(){var e=this.props.form.getAllFormValue(this.state.card.form.formId),t=void 0,a=void 0;return Object.keys(e.rows[0].values).forEach(function(r){"pk_supplier"==r&&(t=e.rows[0].values[r].value),"ts"==r&&(a=e.rows[0].values[r].value)}),{pk_supplier:t,ts:a}},p=function(e,t,a){var r=this;this.props.form.setAllFormValue(o({},this.state.card.form.formId,t.head[this.state.card.form.formId])),t.table&&Object.keys(this.state.card.table.tableIds).forEach(function(a){r.props.cardTable.setTableData(r.state.card.table[a].tableId,t.body[r.state.card.table[a].tableId]),r.props.cardTable.setStatus(r.state.card.table[a].tableId,e)}),this.props.form.setFormStatus(this.state.card.form.formId,e),a&&a()},f=function(){var e=this;this.props.form.EmptyAllFormValue(this.state.card.form.formId),this.state.card.table.tableIds.forEach(function(t){e.props.cardTable.setTableData(e.state.card.table[t].tableId,{rows:[]})})},b=t.setCardButtonStatus=function(){switch(this.state.param.status){case"add":this.props.button.setButtonVisible(["Card_Add","Card_Edit","Card_Refresh","Card_Delete","Card_Copy","Card_BatchUpdate",",Card_Refresh","Card_Assign","Card_BankAccount","Card_AddressBook","Card_Approve","Card_Freeze","Card_AssistFun","Card_Associate","Card_OrgBrowse","Card_BrowseOrgDoc","Card_Print"],!1),this.props.button.setButtonVisible(["Card_Save","Card_SaveAdd","Card_Cancel"],!0),this.props.button.setButtonDisabled({AddLine:!1,EditLine:!1,DeleteLine:!1});break;case"edit":this.props.button.setButtonVisible(["Card_Add","Card_Edit","Card_Refresh","Card_Delete","Card_Copy","Card_BatchUpdate",",Card_Refresh","Card_Assign","Card_BankAccount","Card_AddressBook","Card_Approve","Card_Freeze","Card_AssistFun","Card_Associate","Card_OrgBrowse","Card_BrowseOrgDoc","Card_Print","Card_SaveAdd"],!1),this.props.button.setButtonVisible(["Card_Save","Card_Cancel"],!0),this.props.button.setButtonDisabled({AddLine:!1,EditLine:!1,DeleteLine:!1});break;case"add_cancel":this.props.button.setButtonVisible(["Card_Save","Card_Cancel","Card_Refresh","Card_Edit","Card_Delete","Card_Copy","Card_BatchUpdate",",Card_Refresh","Card_Assign","Card_BankAccount","Card_AddressBook","Card_Approve","Card_Freeze","Card_AssistFun","Card_Associate","Card_OrgBrowse","Card_BrowseOrgDoc","Card_Print","Card_SaveAdd"],!1),this.props.button.setButtonVisible(["Card_Add"],!0),this.props.button.setButtonDisabled({AddLine:!0,EditLine:!0,DeleteLine:!0});break;case"edit_cancel":this.props.button.setButtonVisible(["Card_Add","Card_Edit","Card_Refresh","Card_Delete","Card_Copy","Card_BatchUpdate",",Card_Refresh","Card_Assign","Card_BankAccount","Card_AddressBook","Card_Approve","Card_Freeze","Card_AssistFun","Card_Associate","Card_OrgBrowse","Card_BrowseOrgDoc","Card_Print"],!0),this.props.button.setButtonVisible(["Card_Save","Card_Cancel","Card_SaveAdd"],!1),this.props.button.setButtonDisabled({AddLine:!0,EditLine:!0,DeleteLine:!0});break;default:this.props.button.setButtonVisible(["Card_Add","Card_Edit","Card_Delete","Card_Copy","Card_BatchUpdate",",Card_Refresh","Card_Assign","Card_BankAccount","Card_AddressBook","Card_Approve","Card_Freeze","Card_AssistFun","Card_Associate","Card_OrgBrowse","Card_BrowseOrgDoc","Card_Print"],!0),this.props.button.setButtonVisible(["Card_Save","Card_SaveAdd","Card_Cancel"],!1),this.props.button.setButtonDisabled({AddLine:!0,EditLine:!0,DeleteLine:!0})}};t.disabledFormItems=function(e){var t=new Map;this.props.meta.getMeta().supplier_baseInfo_card.items.forEach(function(e){t.set(e.attrcode,e)});var a=!0,n=!1,s=void 0;try{for(var o,i=Object.entries(e)[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var c=o.value,l=r(c,2),u=l[0],d=l[1];t.get(u).disabled=d}}catch(e){n=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw s}}},t.getCurCardStatus=function(e){switch(e){case"add":case"edit":return e;case"browse":case"add_cancel":case"edit_cancel":default:return"browse"}}},425:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(2),o=c(s),i=(c(a(3)),a(1));c(a(398));function c(e){return e&&e.__esModule?e:{default:e}}i.base.NCCheckbox,i.base.NCIcon,i.base.NCPopconfirm,i.base.NCTable,i.base.NCRow,i.base.NCCol,i.base.NCButton,i.base.NCAffix,i.base.NCAnchor,i.base.NCScrollElement,i.base.NCScrollLink;var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=r({},a.props),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),n(t,[{key:"componentDidMount",value:function(){this.props.form.setFormStatus(this.state.formId,"edit")}},{key:"componentWillReceiveProps",value:function(e){this.state=r({},e)}},{key:"onAfterFormEvent",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.form,a=e.formId,r=t.createForm;return o.default.createElement("div",null,r(a,{onAfterEvent:this.onAfterFormEvent.bind(this)}))}}]),t}();t.default=l},426:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(2),o=function(e){return e&&e.__esModule?e:{default:e}}(s),i=a(1);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(427);var l=i.base.NCTable,u=i.base.NCScrollElement,d=i.base.NCCheckbox,p=function(){},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLoadSupBankAccTableData=function(){(0,i.ajax)({url:a.state.urls.querySupBankaccUrl,data:{pk_supplier:a.state.pk_supplier,showOff:a.state.showoff.checked},success:function(e){a.state.custsupbankacc.data=[],e.success&&e.data&&(a.state.custsupbankacc.data=e.data),a.setState(a.state,function(){a.setSupBankAccTableButtonStatus(!!e.data)})}})},a.onSupBankAccSubOperatDeleteEvent=function(){},a.onSupBankAccSubButtonClick=function(e,t){a.props.cardTable.addRow(a.state.card.table.tableId),a.props.cardTable.setStatus(a.state.card.table.tableId,"edit")},a.setSupBankAccTableColumn=function(e,t){a.state.custsupbankacc.columns=e,a.setState(a.state,function(){t&&t()})},a.setCardStatus=function(e){a.state.custsupbankacc.data=[],a.setState({showCard:e,pk_supplier:null,selectedRecord:{}})},a.onSupBankAccTableBtnClick=function(e,t){switch(t){case"SupBankAcc_Add":var r={pk_supplier:a.state.pk_supplier};a.onEditSupBankAcc("add",a.setSupBankAccCardStatus,a.setSupBankAccCardButtonStatus,a.onSupBankAccTableAddClickCallBack,r);break;case"SupBankAcc_Edit":a.onEditSupBankAcc("edit",a.setSupBankAccCardStatus,a.setSupBankAccCardButtonStatus,a.onSupBankAccTableEditClickCallBack);break;case"SupBankAcc_Delete":(0,i.ajax)({url:a.state.urls.delSupBankAccUrl,data:{pk_custbank:a.state.selectedRecord.pk_custbank,pk_bankaccbas:a.state.selectedRecord.pk_bankaccbas},success:function(e){e.success&&a.onLoadSupBankAccTableData()}});break;case"SupBankAcc_Refresh":a.setState({selectedRecord:{}},function(){a.onLoadSupBankAccTableData()});break;case"SupBankAcc_Enable":a.enableSupBankAcc(!0);break;case"SupBankAcc_Disable":a.enableSupBankAcc(!1)}},a.onSupBankAccCardBtnClick=function(e,t){switch(t){case"Card_SupBankAcc_Add":var r={pk_supplier:a.state.pk_supplier};a.onQuerySupBankAcc("add",a.setSupBankAccCardStatus,a.setSupBankAccCardButtonStatus,a.onSupBankAccTableAddClickCallBack,r);break;case"Card_SupBankAcc_Edit":a.setSupBankAccCardStatus("edit"),a.setSupBankAccCardButtonStatus("edit");break;case"Card_SupBankAcc_Return":a.setState({showCard:!a.state.showCard},function(){a.onLoadSupBankAccTableData()});break;case"Card_SupBankAcc_Save":a.onSupBankAccSaveClick();break;case"Card_SupBankAcc_SaveAdd":var n={status:"add",setSupBankAccCardStatus:a.setSupBankAccCardStatus,setSupBankAccCardButtonStatus:a.setSupBankAccCardButtonStatus,onSupBankAccTableAddClickCallBack:a.onSupBankAccTableAddClickCallBack,param:{pk_supplier:a.state.pk_supplier}};a.onSupBankAccSaveClick(n);break;case"Card_SupBankAcc_Cancel":a.onQuerySupBankAcc("browse",a.setSupBankAccCardStatus,a.setSupBankAccCardButtonStatus,a.onSupBankAccTableAddClickCallBack)}},a.onSupBankAccTableAddClickCallBack=function(e){a.props.form.setAllFormValue({cardsupbankacc:e.cardsupbankacc.cardsupbankacc}),a.props.form.setAllFormValue({accbasinfo:e.accbasinfo.accbasinfo}),a.props.cardTable.setTableData("bankaccsub",{rows:e.bankaccsub.bankaccsub.rows})},a.onSupBankAccTableEditClickCallBack=function(e){Object.keys(a.state.card.form).forEach(function(t){"netbankinfo"!=t&&a.props.form.setAllFormValue(c({},t,e[t][t]))});var t=a.state.card.table.tableId;a.props.cardTable.setTableData(t,e[t][t])},a.onEditSupBankAcc=function(e,t,r,n,s){"edit"!=e||a.state.selectedRecord.pk_custbank?a.setState({showCard:!a.state.showCard},function(){a.onQuerySupBankAcc(e,t,r,n,s)}):(0,i.toast)({title:"提示",content:"请选中一张单据"})},a.onQuerySupBankAcc=function(e,t,r,n,s){(0,i.ajax)({url:a.state.urls.querySupBankInfoUrl,data:s||{pk_supplier:a.state.pk_supplier,pk_custbank:a.state.selectedRecord.pk_custbank,pk_bankaccbas:a.state.selectedRecord.pk_bankaccbas},success:function(a){a.success&&(t&&t("add"==e||"edit"==e?"edit":"browse"),r&&r(e),n&&n(a.data))}})},a.setSupBankAccCardStatus=function(e){Object.values(a.state.card.form).forEach(function(t){"netbankinfo"!=t.formId&&a.props.form.setFormStatus(t.formId,e)}),a.props.cardTable.setStatus(a.state.card.table.tableId,e)},a.onSupBankAccSaveClick=function(e){var t=Object.keys(a.state.card.form).map(function(e){var t=a.props.form.getAllFormValue(e);return t.areacode=e,t}),r=a.props.cardTable.getAllData(a.state.card.table.tableId),n={custBankInfo:{pageid:a.state.pagecode,model:t[0]},accBasInfo:{pageid:a.state.pagecode,model:t[1]},accBasSub:{pageid:a.state.pagecode,model:{pageinfo:{},areacode:a.state.card.table.tableId,rows:r?r.rows:[]}}};(0,i.ajax)({url:a.state.urls.saveSupBankAccUrl,data:n,success:function(t){t.success&&a.setState({selectedRecord:{pk_cust:t.data.pk_supplier,pk_custbank:t.data.pk_custbank,pk_bankaccbas:t.data.pk_bankaccbas}},function(){e?a.onQuerySupBankAcc(e.status,a.setSupBankAccCardStatus,a.setSupBankAccCardButtonStatus,a.onSupBankAccTableEditClickCallBack,e.param):a.onQuerySupBankAcc("browse",a.setSupBankAccCardStatus,a.setSupBankAccCardButtonStatus,a.onSupBankAccTableEditClickCallBack)})}})},a.enableSupBankAcc=function(e){(0,i.ajax)({url:"",data:{pk_supplier:a.state.pk_supplier,pk_custbank:a.state.selectedRecord.pk_custbank,pk_bankaccbas:a.state.selectedRecord.pk_bankaccbas,enable:e},success:function(t){t.success&&(0,i.toast)({title:"提示",content:e?"启用成功":"停用成功"})}})},a.setSupBankAccTableButtonStatus=function(e){switch(e){case!0:a.props.button.setButtonsVisible(["SupBankAcc_Add","SupBankAcc_Edit","SupBankAcc_Delete","SupBankAcc_Refresh"],!0);break;case!1:a.props.button.setButtonsVisible(["SupBankAcc_Add","SupBankAcc_Refresh"],!0),a.props.button.setButtonsVisible(["SupBankAcc_Edit","SupBankAcc_Delete"],!1)}},a.setSupBankAccCardButtonStatus=function(e){switch(e){case"add":a.props.button.setButtonsVisible(["Card_SupBankAcc_Add","Card_SupBankAcc_Edit","Card_SupBankAcc_Delete","Card_SupBankAcc_Refresh","Card_SupBankAcc_Return"],!1),a.props.button.setButtonsVisible(["Card_SupBankAcc_Save","Card_SupBankAcc_SaveAdd","Card_SupBankAcc_Cancel"],!0);break;case"edit":a.props.button.setButtonsVisible(["Card_SupBankAcc_Add","Card_SupBankAcc_Edit","Card_SupBankAcc_Delete","Card_SupBankAcc_Refresh","Card_SupBankAcc_SaveAdd","Card_SupBankAcc_Return"],!1),a.props.button.setButtonsVisible(["Card_SupBankAcc_Save","Card_SupBankAcc_Cancel"],!0);break;default:a.props.button.setButtonsVisible(["Card_SupBankAcc_Add","Card_SupBankAcc_Edit","Card_SupBankAcc_Delete","Card_SupBankAcc_Return"],!0),a.props.button.setButtonsVisible(["Card_SupBankAcc_Save","Card_SupBankAcc_SaveAdd","Card_SupBankAcc_Cancel","Card_SupBankAcc_Refresh"],!1)}},a.setPk_supplier=function(e){a.setState({pk_supplier:e},function(){a.onLoadSupBankAccTableData()})},a.onRowClick=function(e,t,r){a.setState({selectedRecord:e})},a.rowClassName=function(e,t,r){return e.pk_custbank==a.state.selectedRecord.pk_custbank?"selected":""},a.onRowDoubleClick=function(e,t,r){a.setState({showCard:!0},function(){(0,i.ajax)({url:a.state.urls.querySupBankInfoUrl,data:{pk_supplier:e.pk_cust,pk_bankaccbas:e.pk_bankaccbas,pk_custbank:e.pk_custbank},success:function(e){Object.values(a.state.card.form).forEach(function(t){"netbankinfo"!=t.formId&&a.props.form.setAllFormValue(c({},t.formId,e.data[t.formId][t.formId]))}),a.props.cardTable.setTableData(a.state.card.table.tableId,{rows:e.data[a.state.card.table.tableId][a.state.card.table.tableId].rows}),a.setSupBankAccCardButtonStatus("browse")}})})},a.renderForm=function(){return[o.default.createElement(u,{name:a.state.card.form.cardsupbankacc.formName},a.props.form.createForm(a.state.card.form.cardsupbankacc.formId,a.state.card.form.cardsupbankacc.action)),o.default.createElement(u,{name:a.state.card.form.accbasinfo.formName},a.props.form.createForm(a.state.card.form.accbasinfo.formId,a.state.card.form.accbasinfo.action))]};return a.state=r({pk_supplier:null},a.props,{showCard:!1,showoff:{checked:void 0,disabled:!1,onChange:function(e){a.state.showoff.checked=e,a.setState(a.state,function(){a.onLoadSupBankAccTableData()})},name:"显示停用"},buttonApps:{area:"custsupbankacc_table",buttonLimit:3,onButtonClick:a.onSupBankAccTableBtnClick.bind(a)},custbankunions:{},custsupbankacc:{data:[],columns:a.props.meta.getMeta().custsupbankacc||void 0,onRowDoubleClick:a.onRowDoubleClick,onRowClick:a.onRowClick,rowClassName:a.rowClassName},selectedRecord:{},card:{buttonApps:{area:"custsupbankacc_card",buttonLimit:3,onButtonClick:a.onSupBankAccCardBtnClick.bind(a)},form:{cardsupbankacc:{formId:"cardsupbankacc",formName:"供应商",action:{onAfterEvent:a.onAfterEditFormEvent.bind(a,"cardsupbankacc")}},accbasinfo:{formId:"accbasinfo",formName:"账户基本信息",action:{onAfterEvent:a.onAfterEditFormEvent.bind(a,"accbasinfo")}},netbankinfo:{formId:"netbankinfo",formName:"网银信息",action:{onAfterEvent:a.onAfterEditFormEvent.bind(a,"netbankinfo")}}},table:{tableId:"bankaccsub",tableName:"供应商银行账户子户",action:{tableHead:function(){var e=a.props.button.createButtonApp;return o.default.createElement("div",{className:"shoulder-definition-area"},o.default.createElement("div",{className:"definition-icons"},e({area:"custsupbankaccsub",buttonLimit:3,onButtonClick:a.onSupBankAccSubButtonClick.bind(a)})))}.bind(a)||p,modelSave:p,showIndex:!0},field:{attrcode:"opr",label:"操作",visible:!0,className:"table-opr",width:200,itemtype:"customer",fixed:"right",render:function(e,t,r){return o.default.createElement("span",{field:"card_table_operator",fieldname:"按钮区域"},o.default.createElement("span",{field:"DeleteLine",fieldname:"删行",className:"row-edit-option",onClick:function(){a.onSupBankAccSubOperatDeleteEvent(e,t,r)}},"删行"))}}}},urls:{querySupBankaccUrl:"/nccloud/uapbd/supplier/querySupBankacc.do",querySupBankInfoUrl:"/nccloud/uapbd/supplier/querySupBankInfo.do",delSupBankAccUrl:"/nccloud/uapbd/supplier/delSupBankAcc.do",saveSupBankAccUrl:"/nccloud/uapbd/supplier/saveSupBankAcc.do"}}),function(e){a.state.card.table.field&&e&&e.hasOwnProperty("items")&&!e.items.find(function(e){return"opr"==e.attrcode})&&e.items.push(a.state.card.table.field)}(a.props.meta.getMeta().bankaccsub),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),n(t,[{key:"onAfterEditFormEvent",value:function(e,t,a,r,n){}},{key:"render",value:function(){var e=this.props,t=e.cardTable,a=e.button,r=t.createCardTable,n=a.createButtonApp;return o.default.createElement("div",null,o.default.createElement("div",{className:"nc-single-table",style:{display:this.state.showCard?"none":""}},o.default.createElement("div",{className:"nc-singleTable-header-area"},o.default.createElement("div",{className:"title-search-detail",style:{"margin-left":"20px"}},o.default.createElement("span",{className:"showOff"},o.default.createElement(d,this.state.showoff,this.state.showoff.name))),o.default.createElement("div",{className:"header-button-area"},n(this.state.buttonApps))),o.default.createElement("div",{className:"nc-singleTable-table-area"},this.state.custsupbankacc.columns&&o.default.createElement(l,this.state.custsupbankacc))),o.default.createElement("div",{className:"ncc-hr-multi-child-card-container",style:{display:this.state.showCard?"":"none"}},o.default.createElement("div",{className:"ncc-hr-multi-child-card-header"},o.default.createElement("div",{className:"nc-bill-header-area"},o.default.createElement("div",{className:"header-button-area"},n(this.state.card.buttonApps)))),o.default.createElement("div",{className:"ncc-hr-multi-child-card-body"},o.default.createElement("div",{className:"nc-bill-form-area"},this.renderForm()),o.default.createElement("div",{className:"nc-bill-table-area"},r(this.state.card.table.tableId,this.state.card.table.action)))))}}]),t}();t.default=f},427:function(e,t,a){var r=a(428);"string"==typeof r&&(r=[[e.i,r,""]]);var n={transform:void 0};a(5)(r,n);r.locals&&(e.exports=r.locals)},428:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,".body {\n  height: cal(100%-60px);\n  overflow: auto;\n}\n.header {\n  height: 60px;\n  width: 100%;\n}\n.ncc-hr-multi-child-card-container {\n  width: 100%;\n  height: 100%;\n  background-color: #FFFFFF;\n}\n.ncc-hr-multi-child-card-header {\n  width: 100%;\n  height: 60px;\n  border-bottom: 2px solid #EDECEC;\n  background-color: #FFFFFF;\n  z-index: 1;\n}\n.ncc-hr-multi-child-card-body {\n  position: absolute;\n  top: 100px;\n  bottom: 5px;\n  left: 0px;\n  right: 0px;\n  overflow: auto;\n  background-color: #FFFFFF;\n  z-index: 0;\n}\n/**树卡中 左树  滚动条的样式**/\n.ncc-hr-multi-child-card-body::-webkit-scrollbar {\n  /*整个滚动条区域的宽度*/\n  width: 8px;\n  height: 8px;\n}\n.ncc-hr-multi-child-card-body::-webkit-scrollbar-button {\n  /*滚动条上下两边的按钮*/\n  display: none;\n}\n.ncc-hr-multi-child-card-body::-webkit-scrollbar-thumb {\n  /*真滚动条样式*/\n  background: rgba(0, 0, 0, 0.54);\n  border-radius: 100px ;\n}\n.ncc-hr-multi-child-card-body::-webkit-scrollbar-track {\n  /*滚动条滚动的轨道*/\n  display: none;\n}\n",""])},429:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(2),c=function(e){return e&&e.__esModule?e:{default:e}}(i),l=a(1);l.base.NCCheckbox,l.base.NCIcon,l.base.NCPopconfirm,l.base.NCTable,l.base.NCRow,l.base.NCCol,l.base.NCButton,l.base.NCAffix,l.base.NCAnchor,l.base.NCScrollElement,l.base.NCScrollLink;var u=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.call(a),a.state=s({},a.props,{buttonApps:{area:"supaddress",buttonLimit:3,onButtonClick:a.onAddressBookButtonClick.bind(a)},table:{tableId:"supaddress",tableName:"供应商发货地址",action:{onRowClick:a.onRowClick,onBeforeEvent:a.onBeforeEvent,showIndex:!0,showCheck:!0}},linkmanRefer:{linkmanReferId:"linkmanRefer",form:e.form,onAfterEdit:a.onLinkmanReferEditAfter.bind(a)},selectedRecord:null}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.editTable,a=e.button,r=t.createEditTable,n=a.createButtonApp;return c.default.createElement("div",null,c.default.createElement("div",{className:"nc-single-table",style:{display:this.state.showCard?"none":""}},c.default.createElement("div",{className:"nc-singleTable-header-area"},c.default.createElement("div",{className:"header-button-area"},n(this.state.buttonApps))),c.default.createElement("div",{className:"nc-singleTable-table-area"},r(this.state.tableId,this.state.table.action))))}}]),t}(),n=function(){var e=this;this.setLinkmanReferParam=function(t){t.meta.addMeta(t.meta.getMeta().linkmanRefer),t.meta.getMeta().supaddress.items.find(function(t){"pk_linkman"==t.attrcode&&Object.assign(t,e.state.linkmanRefer)})},this.setPk_supplier=function(t){e.props.editTable.setTableData(e.state.table.tableId,{rows:[]}),e.setState({pk_supplier:t},function(){e.onLoadAddressBookTableData(e.setAddressBookButtonStatus)})},this.onLoadAddressBookTableData=function(t){(0,l.ajax)({url:"/nccloud/uapbd/supaddress/querySupAddress.do",data:{pk_supplier:e.state.pk_supplier},success:function(a){var r=a.success,n=a.data;r&&(n?e.props.editTable.setTableData(e.state.table.tableId,n[e.state.table.tableId]):(0,l.toast)({color:"success",content:"没有查询到记录！"}),t&&t(n?"browse":"nodata"))}})},this.setAddressBookButtonStatus=function(t){switch(t){case"edit":e.props.button.setButtonsVisible(["AddressBook_Edit","AddressBook_Delete","AddressBook_Refresh"],!1),e.props.button.setButtonsVisible(["AddressBook_Add","AddressBook_Save","AddressBook_Cancel"],!0);break;case"nodata":e.props.button.setButtonsVisible(["AddressBook_Save","AddressBook_Edit","AddressBook_Delete","AddressBook_Cancel"],!1),e.props.button.setButtonsVisible(["AddressBook_Add","AddressBook_Refresh"],!0);break;default:e.props.button.setButtonsVisible(["AddressBook_Save","AddressBook_Cancel"],!1),e.props.button.setButtonsVisible(["AddressBook_Add","AddressBook_Edit","AddressBook_Delete","AddressBook_Refresh"],!0)}},this.onAddressBookButtonClick=function(t,a){switch(e.setLinkmanReferParam(t),a){case"AddressBook_Add":e.onAddressBookAdd(e.setAddressBookButtonStatus);break;case"AddressBook_Edit":e.props.table.getAllTableData(e.state.table.tableId)?e.props.editTable.setStatus("supaddress","edit",e.setAddressBookButtonStatus.bind(e,"edit")):(0,l.toast)({title:"提示",color:"warning",content:"没有记录"});break;case"AddressBook_Delete":e.props.table.getAllTableData(e.state.table.tableId)?e.onAddressBookDelete():(0,l.toast)({title:"提示",color:"warning",content:"没有记录"});break;case"AddressBook_Save":e.onAddressBookSave();break;case"AddressBook_Cancel":e.props.editTable.setStatus("supaddress","browse",e.setAddressBookButtonStatus.bind(e,"browse"));break;case"AddressBook_Refresh":e.onLoadAddressBookTableData(e.setAddressBookButtonStatus)}},this.onAddressBookAdd=function(t){e.props.editTable.addRow(e.state.tableId),t&&t("edit")},this.onAddressBookSave=function(){var t=e.props.table.getAllTableData(e.state.table.tableId);t&&(t.rows.forEach(function(t){t.values.pk_supplier.value||(t.values.pk_supplier.value=e.state.pk_supplier),t.status=t.values.pk_supaddress&&t.values.pk_supaddress.value?"1":"2"}),(0,l.ajax)({url:"/nccloud/uapbd/supaddress/saveSupAddress.do",data:{pageid:e.props.pagecode,model:{rows:t.rows}},success:function(t){var a=t.success,r=t.data;a&&r&&(e.onLoadAddressBookTableData(e.setAddressBookButtonStatus),(0,l.toast)({color:"success",content:"保存成功！"}))}}))},this.onAddressBookDelete=function(){var t=e.props.editTable.getCheckedRows(e.state.table.tableId);if(t&&0!==t.length){var a=new Array,r=t.map(function(e){return a.push(e.index),e.data.status=3,e.data});(0,l.ajax)({url:"/nccloud/uapbd/supaddress/saveSupAddress.do",data:{pageid:e.props.pagecode,gridmodel:{rows:r}},success:function(t){var r=t.success,n=t.data;r&&n&&(e.props.editTable.deleteTableRowsByIndex(e.state.table.tableId,a,!0),e.onLoadAddressBookTableData(e.setAddressBookButtonStatus),(0,l.toast)({color:"success",content:"删除成功！"}))}})}else(0,l.toast)({color:"danger",content:"请选择数据操作！"})},this.onLinkmanReferEditAfter=function(t){var a=function(e){return e.startsWith("pk_linkman")&&e.indexOf(".")>-1?e.substr(e.indexOf(".")+1):e};Object.keys(e.state.selectedRecord.values).forEach(function(r){r.startsWith("pk_linkman")&&("pk_linkman"==r?function(t,r){e.state.selectedRecord.values[r]={display:t.linkmanRefer.rows[0].values.name.display||t.linkmanRefer.rows[0].values.name.value,value:t.linkmanRefer.rows[0].values[a(r)].display||t.linkmanRefer.rows[0].values[a(r)].value,scale:0}}(t,r):function(t,r){e.state.selectedRecord.values[r]=t.linkmanRefer.rows[0].values[a(r)]}(t,r))})},this.onRowClick=function(t,a,r,n){e.setState({selectedRecord:r},function(){e.props.meta.getMeta()[e.state.tableId].items.find(function(e){"pk_linkman"==e.attrcode&&r.pk_linkman&&(e.queryCondition={pk_linkman:r.pk_linkman.value})})})},this.onBeforeEvent=function(t,a,r,n,s,o){return e.setState({selectedRecord:o},function(){e.props.meta.getMeta()[e.state.tableId].items.find(function(e){"pk_linkman"==e.attrcode&&o.pk_linkman&&(e.queryCondition={pk_linkman:o.pk_linkman.value})})}),!0}},r);t.default=u},430:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMainTableButtonStatus=t.onSupMainTableOprBtnClick=t.onMainTableButtonClick=void 0;var r=a(1),n=a(292);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.onMainTableButtonClick=function(e,t){var a=this,o=null;switch(t){case"Add":this.setState({openCard:!this.state.openCard,param:{status:"add"}},function(){a.initPageData(a.setCardValue,a.setCardStatus)});break;case"Edit":(o=this.props.cardTable.getCheckedRows(this.state.table.id))&&1==o.length?this.setState({batchParam:[o],param:{pk_supplier:o[0].data.values.pk_supplier.value,status:"edit"},oldParam:{pk_supplier:o[0].data.values.pk_supplier.value,status:"edit"},openCard:!this.state.openCard},function(){a.initPageData(a.setCardValue,a.setCardStatus)}):(0,r.toast)({title:"提示",content:"请选择一张单据进行修改！",color:"warning"});break;case"Delete":(o=this.props.cardTable.getCheckedRows(this.state.table.id))&&o.length>=1?this.onDeleteMainTableSupplier(o):(0,r.toast)({content:"请选择要删除的单据！",color:"warning"});break;case"Save":this.props.form.isCheckNow(this.state.card.form.formId);var i=this.props.createExtCardData(this.state.pageId,this.state.card.form.formId,Object.keys(this.state.card.table.tabldIds).filter(function(e){return"agg"==a.state.card.table[e].relate}));(0,r.ajax)({url:this.state.urls.saveUrl,data:i,success:function(e){e.success&&(a.props.form.setAllFormValue(s({},a.state.card.form.formId,e.data.head[a.state.card.form.formId])),a.props.form.setFormStatus(a.state.form.formId,"browse"),e.data.table&&Object.keys(a.state.card.table.tableId).forEach(function(t){a.props.cardTable.setTableData(a.state.card.table[t].tableId,e.data.body[a.state.card.table[t].tableId]),a.props.cardTable.setStatus(a.state.card.table[t].tableId,"browse")}),(0,r.toast)({color:"success",content:"保存成功"}))}});break;case"Copy":(o=this.props.cardTable.getCheckedRows(this.state.table.id))&&1==o.length?this.setState({param:{pk_supplier:o[0].data.values.pk_supplier.value,status:"add"},oldParam:{pk_supplier:o[0].data.values.pk_supplier.value,status:"add"},openCard:!this.state.openCard},function(){a.initPageData(a.setCardValue,a.setCardStatus,a.state.urls.copySupplierUrl),a.setState({param:{status:"add",pk_supplier:null}})}):(0,r.toast)({title:"提示",content:"请选择一张单据进行复制！",color:"warning"});break;case"Refresh":this.onSearch(this.setTableData);break;case"BankAccount":(o=this.props.cardTable.getCheckedRows(this.state.table.id))&&1==o.length?n.showBankAccDialog.call(this,o[0].data.values.pk_supplier.value):(0,r.toast)({title:"提示",content:"请选中一张单据！",color:"warning"});break;case"Approve":case"Menu_Approve":n.approveSupplier.call(this,{approve:!0});break;case"UnApprove":n.approveSupplier.call(this,{approve:!1})}},t.onSupMainTableOprBtnClick=function(e,t,a,r){var o=this;switch(r){case"Copy":this.setState({param:{pk_supplier:e.pk_supplier.value,status:"add"},oldParam:{pk_supplier:e.pk_supplier.value,status:"add"},openCard:!this.state.openCard},function(){o.initPageData(o.setCardValue,o.setCardStatus,o.state.urls.copySupplierUrl),o.setState({param:{status:"add",pk_supplier:null}})});break;case"Edit":this.setState({param:{pk_supplier:e.pk_supplier.value,status:"edit"},oldParam:{pk_supplier:e.pk_supplier.value,status:"edit"},openCard:!this.state.openCard},function(){o.initPageData(o.setCardValue,o.setCardStatus)});break;case"DeleteLine":this.setState({delParam:{delPks:[e.pk_supplier.value],ts:s({},e.pk_supplier.value,e.ts.value),indexs:[t]}},function(){o.DeleteDialog.showDialog()});break;case"BankAccount":n.showBankAccDialog.call(this,e.pk_supplier.value);break;case"AddressBook":n.showAddressBookDialog.call(this,e.pk_supplier.value)}},t.setMainTableButtonStatus=function(){var e=this.props.cardTable.getNumberOfRows(this.state.table.id);return e>0?this.props.button.setButtonsVisible(["Add","Edit","Delete","Copy","BatchUpdate","Refresh","Assign","BankAccount","AddressBook","Approve","Freeze","AssistFun","Associate","OrgBrowse","BrowseOrgDoc","Print"],!0):(this.props.button.setButtonsVisible(["Add","Refresh","OrgBrowse","BrowseOrgDoc"],!0),this.props.button.setButtonsVisible(["Edit","Delete","Copy","BatchUpdate","Assign","BankAccount","AddressBook","Approve","Freeze","AssistFun","Associate","Print"],!1)),e}},5:function(e,t,a){var r={},n=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),s=function(e){var t={};return function(e){return void 0===t[e]&&(t[e]=function(e){return document.querySelector(e)}.call(this,e)),t[e]}}(),o=null,i=0,c=[],l=a(133);function u(e,t){for(var a=0;a<e.length;a++){var n=e[a],s=r[n.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](n.parts[o]);for(;o<n.parts.length;o++)s.parts.push(m(n.parts[o],t))}else{var i=[];for(o=0;o<n.parts.length;o++)i.push(m(n.parts[o],t));r[n.id]={id:n.id,refs:1,parts:i}}}}function d(e,t){for(var a=[],r={},n=0;n<e.length;n++){var s=e[n],o=t.base?s[0]+t.base:s[0],i={css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(i):a.push(r[o]={id:o,parts:[i]})}return a}function p(e,t){var a=s(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),p(e,t),t}function h(e,t){Object.keys(t).forEach(function(a){e.setAttribute(a,t[a])})}function m(e,t){var a,r,n,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var c=i++;a=o||(o=b(t)),r=v.bind(null,a,c,!1),n=v.bind(null,a,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),p(e,t),t}(t),r=function(e,t,a){var r=a.css,n=a.sourceMap,s=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||s)&&(r=l(r));n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}.bind(null,a,t),n=function(){f(a),a.href&&URL.revokeObjectURL(a.href)}):(a=b(t),r=function(e,t){var a=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}.bind(null,a),n=function(){f(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=n()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=d(e,t);return u(a,t),function(e){for(var n=[],s=0;s<a.length;s++){var o=a[s];(i=r[o.id]).refs--,n.push(i)}e&&u(d(e,t),t);for(s=0;s<n.length;s++){var i;if(0===(i=n[s]).refs){for(var c=0;c<i.parts.length;c++)i.parts[c]();delete r[i.id]}}}};var k=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}();function v(e,t,a,r){var n=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,n);else{var s=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}}})});
//# sourceMappingURL=index.88176172.js.map