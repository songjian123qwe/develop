!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["uapbd/other/assigntemplate/card/index"]=t(require("nc-lightapp-front"),require("react")):e["uapbd/other/assigntemplate/card/index"]=t(e["nc-lightapp-front"],e.React)}(window,function(e,t){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(s,r,function(t){return e[t]}.bind(null,r));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=155)}({1:function(t,a){t.exports=e},131:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),n=a(2),l=p(n),i=a(1),c=p(a(132)),d=p(a(4));function p(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=i.base.NCAffix,b=i.base.NCForm,m=(i.base.NCFormControl,i.base.NCRadio),g=i.base.NCCol,h=i.base.NCRow,k=i.base.NCBackBtn,C=b.NCFormItem,_=i.cardCache.getCacheById,j=i.cardCache.updateCache,v=i.cardCache.addCache,D=i.cardCache.getCurrentLastId,w=i.cardCache.getNextId,y=i.cardCache.deleteCacheById,V="assignrules",A="10180ADVCG_assigntemp_card",S="uapbd.other.assigntemplate.dataSource",G="pk_assign_temp",P="/nccloud/uapbd/assigntemp/AssigntemLoadCardData.do",E="/nccloud/uapbd/assigntemp/AssigntemSaveCardData.do",T="/nccloud/uapbd/assigntemp/AssigntemUpdateCardData.do",U="/nccloud/uapbd/assigntemp/AssigntemDelCardData.do",x="/nccloud/uapbd/assigntemp/AssigntemSaveRulesData.do",I=(s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.call(a),a.formId="assigntemp",a.tableId="assignrules",a.state={pagetype:null,bill_code:"",selectedValue:"org",pk_docclass0:null,pk_org0:null,isMultiSelectedEnabled:!0,stated:"browse",json:{}},a.initTemplate(a.props,function(){var e=a.props.getUrlParam("status");if(a.toggleShow(),"add"!=e){var t=a.props.getUrlParam("id");t&&"undefined"!=t&&null!=t&&a.getdata(t,a.props.getUrlParam("pk_assign_tab"),a.props.getUrlParam("pagetype"))}else a.setDefaultValue()}),a.renderRef=a.renderRef.bind(a),a.buttonClick=a.buttonClick.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),o(t,[{key:"componentWillMount",value:function(){var e=this.props.getUrlParam("pagetype");this.state.pagetype=e,this.setState(this.state)}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.props.form.getFormStatus(this.formId),t=this.props.cardTable.getStatus(this.tableId);window.onbeforeunload="browse"===e&&"browse"===t?null:function(){return""}}},{key:"buttonClick",value:function(e,t){var a=this;switch(t){case"add":e.form.EmptyAllFormValue(this.formId),e.form.EmptyAllFormValue(this.state.pagetype),e.cardTable.setTableData(this.tableId,{rows:[]}),e.setUrlParam({status:"add"}),this.setDefaultValue();break;case"edit":e.setUrlParam({status:"edit"}),this.toggleShow();break;case"delete":(0,i.promptBox)({color:"info",title:this.state.json["10180ADVCG-000031"],content:this.state.json["10180ADVCG-000032"],beSureBtnClick:this.delConfirm.bind(this),cancelBtnClick:function(){},closeBtnClick:function(){}});break;case"back":e.pushTo("/list");break;case"save":this.saveClick();break;case"cancel":(0,i.promptBox)({color:"warning",title:this.state.json["10180ADVCG-000026"],content:this.state.json["10180ADVCG-000027"],beSureBtnClick:function(){if("add"===e.getUrlParam("status")){var t=e.getUrlParam("id")||D(S);if(!t)return e.setUrlParam({status:"browse"}),a.props.form.cancel(a.formId),a.props.form.cancel(a.state.pagetype),e.form.setFormStatus(a.formId,"browse"),e.form.setFormStatus(a.state.pagetype,"browse"),e.cardTable.setStatus(V,"browse"),a.props.button.setButtonVisible(["save","cancel"],!1),a.props.button.setButtonVisible(["add","edit","delete","back","refresh"],!0),a.props.button.setDisabled({tabadd:!0,tabsave:!0,tabedit:!0,tabcancel:!0,tabset:!0,edit:!0,delete:!0,refresh:!0}),void a.setState({stated:"browse"});a.props.setUrlParam({status:"browse",id:t}),a.getdata(t,a.props.getUrlParam("pk_assign_tab"),a.props.getUrlParam("pagetype"))}"edit"===e.getUrlParam("status")&&(e.form.cancel(a.formId),e.form.cancel(a.state.pagetype),e.setUrlParam({status:"browse"}),a.toggleShow())},cancelBtnClick:function(){},closeBtnClick:function(){}});break;case"refresh":this.allrefresh(function(){(0,i.toast)({title:a.state.json["10180ADVCG-000028"]})});break;case"tabadd":this.props.cardTable.setStatus(V,"edit"),e.cardTable.addRow(this.tableId),this.tabletoggleShow("edit");break;case"tabsave":this.props.cardTable.filterEmptyRows(V,["pk_docclass"]);var s=this.props.cardTable.getChangedRows(V);if(!s||0===s.length)return this.props.cardTable.setStatus(V,"browse"),(0,i.toast)({title:this.state.json["10180ADVCG-000029"]}),void this.tabrefresh();(0,i.ajax)({url:x,data:{pageid:A,model:{pageinfo:{},areacode:V,rows:s},userjson:"{id:"+this.props.getUrlParam("id")+",pagetype:"+this.props.getUrlParam("pagetype")+",pk_assign_tab:"+this.props.getUrlParam("pk_assign_tab")+"}"},success:function(e){e.success&&e.data&&(a.props.cardTable.setStatus(V,"browse"),(0,i.toast)({title:a.state.json["10180ADVCG-000029"]}),a.tabrefresh())}});break;case"tabedit":this.props.cardTable.setStatus(V,"edit"),this.tabletoggleShow("edit");break;case"tabcancel":this.props.cardTable.resetTableData(V),this.props.cardTable.setStatus(V,"browse"),this.tabletoggleShow("browse");break;case"tabrefresh":this.tabrefresh(function(){(0,i.toast)({title:a.state.json["10180ADVCG-000028"]})});break;case"tabset":var r=void 0,o=void 0;this.props.meta.getMeta()[V].items.forEach(function(e){"pk_docclass"==e.attrcode&&(r=e),"pk_org"==e.attrcode&&(o=e)}),this.setState({pk_docclass0:r,pk_org0:o}),e.modal.show("modal",{beSureBtnClick:function(){e.cardTable.setStatus("edit"),a.state.isMultiSelectedEnabled?a.state.pk_docclassvalue.forEach(function(t){var s=e.cardTable.getNumberOfRows(V);e.cardTable.addRow(a.tableId,s,{pk_docclass:{value:t.refpk,display:t.refname},pk_org:{value:a.state.pk_orgvalue.refpk,display:a.state.pk_orgvalue.refname}})}):a.state.pk_orgvalue.forEach(function(t){var s=e.cardTable.getNumberOfRows(V);e.cardTable.addRow(a.tableId,s,{pk_docclass:{value:a.state.pk_docclassvalue.refpk,display:a.state.pk_docclassvalue.refname},pk_org:{value:t.refpk,display:t.refname}})}),a.tabletoggleShow()}})}}},{key:"tabrefresh",value:function(e){var t=this;if("browse"!=this.props.getUrlParam("status")){var a=this.props.getUrlParam("id"),s=this.props.getUrlParam("pk_assign_tab"),r=this.props.getUrlParam("pagetype");if(a&&"undefined"!=a){var o={pk:a,pk_assign_tab:s,pagetype:r};(0,i.ajax)({url:P,data:o,success:function(a){a.data.table&&t.props.cardTable.setTableData(t.tableId,a.data.table[t.tableId]),t.tabletoggleShow(),e&&e()}})}else e&&e()}else e&&e()}},{key:"renderRef",value:function(e,t){var a=this;if(t){var s=void 0;return this.state[e]?s=l.default.createElement(h,null,l.default.createElement(g,{xs:12,md:12},this.state[e]?this.state[e]({isMultiSelectedEnabled:"pk_docclass"==e?this.state.isMultiSelectedEnabled:!this.state.isMultiSelectedEnabled,value:this.state[e+"value"],onChange:function(t){a.setState(u({},e+"value",t))}}):l.default.createElement("div",null))):setTimeout(function(){c.default.call(a,t.refcode,e)}),s}}},{key:"render",value:function(){var e=this.props,t=e.cardTable,a=e.form,s=e.button,r=e.modal,o=e.cardPagination.createCardPagination,n=a.createForm,i=t.createCardTable,c=s.createButtonApp,d=r.createModal;return l.default.createElement("div",{className:"nc-bill-card"},l.default.createElement("div",{className:"nc-bill-top-area"},l.default.createElement(f,null,l.default.createElement("div",{className:"nc-bill-header-area"},"browse"===this.state.stated&&l.default.createElement(k,{className:"title-search-detail",onClick:this.buttonClick.bind(this,this.props,"back")}),l.default.createElement("h2",{className:"title-search-detail"},this.state.json["10180ADVCG-000034"]),l.default.createElement("div",{className:"header-button-area"},c({area:"header-button-area",buttonLimit:3,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}),l.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},o({handlePageInfoChange:this.pageInfoClick.bind(this),dataSource:S}))))),l.default.createElement("div",{className:"nc-bill-form-area"},n(this.formId,{onAfterEvent:this.afterEvent.bind(this)}),l.default.createElement("div",{style:{paddingLeft:20}},this.state.json["10180ADVCG-000035"]),n(this.state.pagetype,{onAfterEvent:this.afterEvent.bind(this)}))),l.default.createElement("div",{className:"nc-bill-bottom-area"},i(this.tableId,{tableHead:this.getTableHead.bind(this),modelSave:this.modelSave.bind(this),showIndex:!0})),d("delete",{title:this.state.json["10180ADVCG-000031"],content:this.state.json["10180ADVCG-000032"],beSureBtnClick:this.delConfirm.bind(this)}),d("modal",{color:"warning",title:this.state.json["10180ADVCG-000033"],content:l.default.createElement(b,{showSubmit:!1},l.default.createElement(C,{isRequire:!0},l.default.createElement(m.NCRadioGroup,{selectedValue:this.state.selectedValue,onChange:this.handleChange.bind(this)},l.default.createElement(m,{value:"org"},this.state.json["10180ADVCG-000036"]),l.default.createElement(m,{value:"class"},this.state.json["10180ADVCG-000037"]))),l.default.createElement(g,{md:12}," ",l.default.createElement(g,{md:3},this.state.pk_docclass0&&this.state.pk_docclass0.label),l.default.createElement(g,{md:4},this.renderRef("pk_docclass",this.state.pk_docclass0&&this.state.pk_docclass0))),l.default.createElement(g,{md:12}," ",l.default.createElement(g,{md:3},this.state.pk_org0&&this.state.pk_org0.label),l.default.createElement(g,{md:4},this.renderRef("pk_org",this.state.pk_org0&&this.state.pk_org0)))),noFooter:!1}))}}]),t}(),r=function(){var e=this;this.initTemplate=function(t,a){(0,d.default)(t)({pagecode:A},{moduleId:"10180ADVCG",domainName:"uapbd"},function(s,r){if(r&&(e.state.json=r),s){if(s.template){var o=s.template;o=e.modifierMeta(t,o),t.meta.setMeta(o)}if(s.button){var n=s.button;t.button.setButtons(n),t.button.setPopContent({tabdelete:e.state.json["10180ADVCG-000047"]})}}a&&a()})},this.modifierMeta=function(t,a){var s=t.getUrlParam("status")?t.getUrlParam("status"):"browse",r=t.getUrlParam("pagetype");if(a.assigntemp.status=s,a[V].status="browse",a[V].items.push({attrcode:"opr",label:e.state.json["10180ADVCG-000023"],visible:!0,className:"table-opr",itemtype:"customer",width:200,fixed:"right",render:function(a,s,r){var o=function(e){return"browse"===e.getUrlParam("status")?["tabdelete"]:[""]}(t);return t.button.createOprationButton(o,{area:"table-opr-button",buttonLimit:3,onButtonClick:function(t,o){return e.tableButtonClick(t,o,a,s,r)}})}}),r)switch(a[r].status=s,r){case"custcreditctl":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000000"],t.refcode="uapbd/refer/customer/CustClassDefaultTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000000"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000001"],t.refcode="uapbd/refer/org/CreditCtlRegionGridRef/index.js",t.refName=e.state.json["10180ADVCG-000002"])});break;case"custfinance":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000000"],t.refcode="uapbd/refer/customer/CustClassDefaultTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000000"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000003"],t.refcode="uapbd/refer/org/FinanceOrgTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000004"])}),a[r].items.forEach(function(e){"pk_respdept1"==e.attrcode&&(e.isShowUnit=!0,e.refcode="uapbd/refer/org/DeptTreeRef/index.js"),"pk_resppsn1"==e.attrcode&&(e.isShowUnit=!0),"pk_payterm"==e.attrcode&&(e.isShowUnit=!0)});break;case"custsale":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000000"],t.refcode="uapbd/refer/customer/CustClassDefaultTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000000"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000005"],t.refcode="uapbd/refer/org/SaleOrgTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000006"])}),a[r].items.forEach(function(e){switch(e.attrcode){case"pk_financeorg":case"pk_receiveorg":case"pk_liabilitycenter":case"respdept":case"respperson":case"pk_custsaleclass":case"billingcust":case"issuecust":case"pk_paycust":case"paytermdefault":e.isShowUnit=!0}});break;case"materialcost":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000008"],t.refcode="uapbd/refer/org/CostRegionDefaultGridRef/index.js",t.refName=e.state.json["10180ADVCG-000009"])});break;case"materialfi":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000003"],t.refcode="uapbd/refer/org/FinanceOrgTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000004"])});break;case"materialplan":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000010"],t.refcode="uapbd/refer/org/OrgWithGlobalAllDataTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000011"])}),a[r].items.forEach(function(e){"pk_prodfactory"==e.attrcode&&(e.isShowUnit=!0)});break;case"materialprod":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000012"],t.refcode="uapbd/refer/org/FactoryGridRef/index.js",t.refName=e.state.json["10180ADVCG-000013"])}),a[r].items.forEach(function(e){"pk_prodeptdoc"==e.attrcode&&(e.isShowUnit=!0),"pk_propsndoc"==e.attrcode&&(e.isShowUnit=!0),"pk_marcostclass"==e.attrcode&&(e.isShowUnit=!0),"disbrcostctr"==e.attrcode&&(e.isShowUnit=!0),"disbearfactory"==e.attrcode&&(e.isShowUnit=!0)});break;case"materialpu":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000014"],t.refcode="uapbd/refer/org/PurchaseOrgGridRef/index.js",t.refName=e.state.json["10180ADVCG-000015"])}),a[r].items.forEach(function(e){"pk_cumandoc"==e.attrcode&&(e.isShowUnit=!0)});break;case"materialsale":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000005"],t.refcode="uapbd/refer/org/SaleOrgTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000006"])}),a[r].items.forEach(function(e){"pk_marsaleclass"==e.attrcode&&(e.isShowUnit=!0)});break;case"materialstock":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000016"],t.refcode="uapbd/refer/org/StockOrgGridRef/index.js",t.refName=e.state.json["10180ADVCG-000017"])}),a[r].items.forEach(function(e){"pk_purchaseorg"==e.attrcode&&(e.isShowUnit=!0),"pk_suplystockorg"==e.attrcode&&(e.isShowUnit=!0),"pk_marpuclass"==e.attrcode&&(e.isShowUnit=!0),"pk_stordoc"==e.attrcode&&(e.isShowUnit=!0)});break;case"materialpfc":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000018"],t.refcode="uapbd/refer/org/LiabilityCenterOrgTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000019"])}),a[r].items.forEach(function(e){"pk_marcostcls"==e.attrcode&&(e.isShowUnit=!0)});break;case"materialpfcc":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000007"],t.refcode="uapbd/refer/material/MaterialBasClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000007"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000020"],t.refcode="uapbd/refer/riaorgbd/LiactCostrgDefaultGridRef/index.js",t.refName=e.state.json["10180ADVCG-000021"])});break;case"supfinance":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000022"],t.refcode="uapbd/refer/supplier/SupplierClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000022"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000003"],t.refcode="uapbd/refer/org/FinanceOrgTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000004"])}),a[r].items.forEach(function(e){"pk_respdept"==e.attrcode&&(e.isShowUnit=!0),"pk_resppsn"==e.attrcode&&(e.isShowUnit=!0),"pk_payterm"==e.attrcode&&(e.isShowUnit=!0)});break;case"supstock":a[V].items.forEach(function(t){"pk_docclass"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000022"],t.refcode="uapbd/refer/supplier/SupplierClassTreeRef/index.js",t.refName=e.state.json["10180ADVCG-000022"]),"pk_org"==t.attrcode&&(t.label=e.state.json["10180ADVCG-000014"],t.refcode="uapbd/refer/org/PurchaseOrgGridRef/index.js",t.refName=e.state.json["10180ADVCG-000015"])}),a[r].items.forEach(function(e){switch(e.attrcode){case"respdept":case"respperson":case"paytermdefault":case"billingsup":case"issuesup":case"pk_gathering":e.isShowUnit=!0}})}return a},this.tableButtonClick=function(t,a,s,r,o){switch(a){case"tabdelete":if(t.cardTable.delRowsByIndex(V,o),"browse"==t.cardTable.getStatus(V)){var n=t.cardTable.getChangedRows(V);(0,i.ajax)({url:x,data:{pageid:A,model:{pageinfo:{},areacode:V,rows:n},userjson:"{id:"+t.getUrlParam("id")+",pagetype:"+t.getUrlParam("pagetype")+",pk_assign_tab:"+t.getUrlParam("pk_assign_tab")+"}"},success:function(t){t.success&&t.data&&(0,i.toast)({content:e.state.json["10180ADVCG-000024"],color:"success"})}})}}},this.setDefaultValue=function(){e.props.form.setFormItemsValue(e.formId,{bill_status:{value:"0",display:e.state.json["10180ADVCG-000025"]}}),e.toggleShow()},this.toggleShow=function(){var t=e.props.getUrlParam("status"),a=e.props.cardTable.getNumberOfRows(V);e.props.button.setButtonVisible(["tabsave","tabcancel"],!1),"edit"==t||"add"==t?(e.props.button.setButtonVisible(["edit","add","back","delete","refresh"],!1),e.props.button.setButtonVisible(["save","cancel"],!0),e.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),e.props.button.setDisabled({tabadd:!0,tabsave:!0,tabedit:!0,tabcancel:!0,tabset:!0})):(e.props.button.setButtonVisible(["save","cancel"],!1),e.props.button.setButtonVisible(["add","edit","delete","back","refresh"],!0),e.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0),e.props.button.setDisabled({tabadd:!1,tabsave:!0,tabedit:!(a>0),tabcancel:!0,tabset:!1})),e.props.form.setFormStatus(e.formId,t),e.props.form.setFormStatus(e.state.pagetype,t),e.setState({stated:t})},this.tabletoggleShow=function(t){var a=t||e.props.cardTable.getStatus(V);e.props.button.setPopContent("browse"===a?{tabdelete:e.state.json["10180ADVCG-000047"]}:{tabdelete:null});var s=e.props.cardTable.getNumberOfRows(V),r="browse"!==a;e.props.button.setDisabled({add:r,edit:r,delete:r,refresh:r}),e.props.button.setButtonVisible({tabsave:r,tabcancel:r,tabedit:!r}),e.props.button.setDisabled({tabsave:!r,tabedit:!(s>0&&!r),tabcancel:!r,tabset:!1,tabrefresh:r}),e.setState({stated:a})},this.getdata=function(t,a,s){var r=e,o=_(t,S);if(o)o.form1&&e.props.form.setAllFormValue(u({},r.formId,o.form1[r.formId])),o.form2&&e.props.form.setAllFormValue(u({},r.state.pagetype,o.form2[r.state.pagetype])),o.table&&e.props.cardTable.setTableData(r.tableId,o.table[r.tableId]),e.toggleShow(),e.tabletoggleShow();else{var n={pk:t,pk_assign_tab:a,pagetype:s};(0,i.ajax)({url:P,data:n,success:function(a){a.data.form1&&e.props.form.setAllFormValue(u({},r.formId,a.data.form1[r.formId])),a.data.form2&&e.props.form.setAllFormValue(u({},r.state.pagetype,a.data.form2[r.state.pagetype])),a.data.table&&e.props.cardTable.setTableData(r.tableId,a.data.table[r.tableId]),a.data.head=a.data.form1,j(G,t,a.data,e.formId1,S),e.toggleShow(),e.tabletoggleShow()}})}},this.refreshgetdata=function(t,a,s){var r=e,o={pk:t,pk_assign_tab:a,pagetype:s};(0,i.ajax)({url:P,data:o,success:function(a){a.data.form1&&e.props.form.setAllFormValue(u({},r.formId,a.data.form1[r.formId])),a.data.form2&&e.props.form.setAllFormValue(u({},r.state.pagetype,a.data.form2[r.state.pagetype])),a.data.table&&e.props.cardTable.setTableData(r.tableId,a.data.table[r.tableId]),a.data.head=a.data.form1,j(G,t,a.data,e.formId1,S)}})},this.allrefresh=function(t){var a=e.props.getUrlParam("id");e.refreshgetdata(a,e.props.getUrlParam("pk_assign_tab"),e.props.getUrlParam("pagetype")),e.props.cardTable.setStatus(V,"browse"),e.tabrefresh(),e.tabletoggleShow(),t&&t()},this.saveClick=function(){if(e.props.cardTable.filterEmptyRows(V),e.props.form.isCheckNow([e.formId,e.state.pagetype])){var t=e.props.form.getAllFormValue(e.formId);t.areacode=e.formId;var a=e.props.form.getAllFormValue(e.state.pagetype);a.areacode=e.state.pagetype;var s=E;"edit"===e.props.getUrlParam("status")&&(s=T),(0,i.ajax)({url:s,data:{pageid:A,pagetype:e.props.getUrlParam("pagetype"),pk_assign_tab:e.props.getUrlParam("pk_assign_tab"),model:t,model1:a},success:function(t){if(t.success&&t.data){t.data.form1&&e.props.form.setAllFormValue(u({},e.formId,t.data.form1[e.formId])),t.data.form2&&e.props.form.setAllFormValue(u({},e.state.pagetype,t.data.form2[e.state.pagetype])),t.data.table&&e.props.cardTable.setTableData(e.tableId,t.data.table[e.tableId]),t.data.head=t.data.form1;var a=t.data.form1[e.formId].rows[0].values.pk_assign_temp.value;"add"===e.props.getUrlParam("status")&&v(a,t.data,e.formId1,S),j(G,a,t.data,e.formId1,S),(0,i.toast)({title:e.state.json["10180ADVCG-000029"],color:"success"}),e.props.setUrlParam({status:"browse",id:t.data.form1[e.formId].rows[0].values.pk_assign_temp.value}),e.toggleShow()}}})}},this.delConfirm=function(){(0,i.ajax)({url:U,data:{pagetype:e.props.getUrlParam("pagetype"),id:e.props.getUrlParam("id"),pk_assign_tab:e.props.getUrlParam("pk_assign_tab")},success:function(t){var a=e.props.getUrlParam("id"),s=w(a,S);y(G,a,S),(0,i.toast)({color:"success",title:e.state.json["10180ADVCG-000030"]}),s?(e.props.setUrlParam({status:"browse",id:s}),e.getdata(s,e.props.getUrlParam("pk_assign_tab"),e.props.getUrlParam("pagetype"))):e.props.pushTo("/list",{})}})},this.modelSave=function(t){t.cardTable.closeModel(e.tableId),e.saveClick()},this.afterEvent=function(){},this.handleChange=function(t){"org"==t?e.setState({isMultiSelectedEnabled:!0,selectedValue:t}):e.setState({isMultiSelectedEnabled:!1,selectedValue:t})},this.pageInfoClick=function(t,a){a&&null!=a&&(t.setUrlParam({id:a}),e.getdata(a,e.props.getUrlParam("pk_assign_tab"),e.props.getUrlParam("pagetype")))},this.getTableHead=function(){var t=e.props.button.createButtonApp;e.props.getUrlParam("status");return l.default.createElement("div",{className:"shoulder-definition-area"},l.default.createElement("div",{className:""},t({area:"table-button-area",buttonLimit:3,onButtonClick:e.buttonClick.bind(e),popContainer:document.querySelector(".table-button-area")})),l.default.createElement("div",{className:"definition-icons"},e.props.cardTable.createBrowseIcons(e.tableId,{iconArr:["close","open","max","setCol"],maxDestAreaId:"nc-bill-card"})))}},s);I=(0,i.createPage)({})(I),t.default=I},132:function(e,t,a){"use strict";function s(e,t){var a=window[e].default;this.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,a))}Object.defineProperty(t,"__esModule",{value:!0}),t.handleLoad=s,t.default=function(e,t){var a,r,o=Array.from(document.getElementsByTagName("script")),n=e.split("/");if(r=(r=n.slice(n.length-5).join("/")).substring(0,r.length-3),a=o.find(function(e){return e.src.includes(r)}),window[r])s.call(this,r,t);else{var l=void 0;a?l=a:((l=document.createElement("script")).src="../../../../"+e,l.type="text/javascript",document.body.appendChild(l)),l.onload=l.onload||s.bind(this,r)}}},155:function(e,t,a){e.exports=a(131)},2:function(e,a){e.exports=t},4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2],n=0,l={},i=function(){2==n&&o&&o(l.templateData||{},l.langData||{},l.inlt||{})};a.callback&&console.log("咱们自己createUIDom会同时获取多语和单据模板,并通过一个回调函数返回, langCfg中的回调函数将被忽略");var c=s({},a,{callback:function(e,t,a){n+=1,t||(0,r.toast)({content:"load muti lang error",color:"warning"}),l.langData=e||{},l.inlt=a||{},i()}});e.MultiInit.getMultiLang(c),e.createUIDom(t,function(e){n+=1,l.templateData=e||{},i()})}};var r=a(1)}})});
//# sourceMappingURL=index.8b63c4b1.js.map