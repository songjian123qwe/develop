!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["uapbd/refer/org/AccountBookAllTreeRef/index"]=t(require("nc-lightapp-front"),require("react")):e["uapbd/refer/org/AccountBookAllTreeRef/index"]=t(e["nc-lightapp-front"],e.React)}(window,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=349)}({0:function(t,n){t.exports=e},349:function(e,t,n){e.exports=n(350)},350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={refName:"财务核算账簿(所有)",placeholder:"财务核算账簿(所有)",rootNode:{refname:"财务核算账簿",refpk:"root"},refCode:"uapbd.ref.AccountBookTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/AccountBookTreeRef.do",isMultiSelectedEnabled:!1,refType:"tree",isTreelazyLoad:!1,treeConfig:{name:["编码","名称"],code:["refcode","refname"]}};return t.rootNode=a({},t.rootNode,{treeid:"root"}),l.default.createElement(w,a({},t,e))};var c=n(4),l=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(0);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=d.high.Refer.PopRefer,b=d.base.NCRadio,m=d.base.NCTree,v=d.base.NCMenu,g=d.base.NCDropdown,x=d.base.NCButton,k=d.base.NCFormControl,S=b.NCRadioGroup,T=(m.NCTreeNode,o=r=function(e){function t(e){s(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={datas:[]},n}return y(t,c.Component),i(t,[{key:"componentWillMount",value:function(){this.state.datas=this.props.data,this.setState(this.state)}},{key:"componentWillReceiveProps",value:function(e){this.state.datas=e.data,this.setState(this.state)}},{key:"render",value:function(){var e=this.props,t=(e.data,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["data"]));return l.default.createElement(m,t,function e(t){return t.map(function(t){var n=t.children||[];return l.default.createElement(m.NCTreeNode,{title:function(e){return"root"==e.refpk?e.refname:e.nodeData.nodecode+" "+e.nodeData.nodetitle}(t),key:t.refpk,isLeaf:0==n.length,treeNodeData:t.nodeData||{},nodeData:t.nodeData||{}},e(n))})}(this.state.datas))}}]),t}(),r.defaultProps={defaultExpandAll:!1},o),w=function(e){function t(e){var n=this;s(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onTreeTypeChange=function(e){r.state.treetype=e,r.setState(r.state,function(){r.loadTreeData(r.getParam()).then(function(t){var n={refname:"type"===e?"账簿类型":"主账簿",refpk:"root"};r.setTreeData("treeData",n,t)})})},r.getParam=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=(e=r.props.queryCondition)?"function"==typeof e?e():"object"===(void 0===e?"undefined":u(e))?e:{}:{};return{disabledDataShow:!1,queryCondition:a({},e,{treetype:r.state.treetype,textValue:r.state.textValue,disabledDataShow:!1}),pageInfo:{pageSize:10,pageIndex:1}}},r.loadTreeData=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var u=t[o](a),i=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){r.setState({loading:!0},function(){var n=r.state,o=(n.currentLevel,n.referVal,r.props),a=o.queryTreeUrl;o.queryCondition,o.isCacheable;(0,d.ajax)({url:a,data:t,loading:!1,success:function(t){r.setState({loading:!1},function(){if(!t.success)throw new Error(t.error.message);t.data.datarows.forEach(function(e){e.nodeData.refpk=e.nodeData.nodeid,e.nodeData.refname=e.nodeData.nodetitle});var n={rows:t.data.datarows};e(n)})},error:function(e){throw(0,d.toast)({color:"danger",content:e.message}),r.setState({loading:!1}),new Error(e)}})})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.setTreeData=function(e,t,n,o){var a;r.state.expandedKeys;n.rows.forEach(function(e){e._display=e.title,e.pid=e.pid||rootNode.refpk}),r.setState((f(a={},e,n.rows||[]),f(a,"expandedKeys",[]),a),function(){"function"==typeof o&&o()})},r.renderPopoverLeft=function(){var e=r.state,t=(e.isSearch,e.selectedKeys),n=e.expandedKeys,o=e.selectedValues,a=e.treeData,u=r.props,i=u.refType,c=u.isMultiSelectedEnabled,d=u.isTreelazyLoad,f=u.rootNode,s=u.onlyLeafCanSelect,p=function e(t,n){t.forEach(function(t){n&&n(t,t.children||[]),e(t.children||[],n)})},y=[];!function(e){var t,n=1;for(p(e,function(e,t){var r=parseInt(e.nodeData?e.nodeData.laynumber:0);n=r<=n?n:r}),t=0;t<=n;t++)y.push(l.default.createElement(v.Item,{key:t,expandLay:!0},t,"层"))}(a||[]);var h=function(e,t,n){if("expandAll"==e.key){n=[];p(a,function(e,t){n.push(e.key)}),r.state.expandedKeys=n,r.setState(r.state)}if("unexpandAll"==e.key&&(r.state.expandedKeys=[],r.setState(r.state)),e.item.props.expandLay){n=[];var o=e.key;p(a,function(e,t){parseInt(e.nodeData?e.nodeData.laynumber:0)<=o&&n.push(e.key)}),r.state.expandedKeys=n,r.setState(r.state)}};return l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement(k,{type:"search",value:r.state.textValue,onChange:function(e){r.state.textValue=e,r.setState(r.state)},onSearch:function(){r.onTreeTypeChange(r.state.treetype)}}),l.default.createElement(g,{trigger:["click"],overlay:l.default.createElement(v,{onSelect:h},l.default.createElement(v.Item,{key:"expandAll"},"展开所有"),l.default.createElement(v.Item,{key:"unexpandAll"},"闭合所有"),l.default.createElement(v.NCSubMenu,{key:"expandLay",title:"展开层级"},y)),animation:"slide-up"},l.default.createElement(x,{colors:"primary",style:{width:50}},"更多"))),l.default.createElement("div",null,l.default.createElement(S,{name:"booktype",selectedValue:r.state.treetype,onChange:r.onTreeTypeChange.bind(r)},l.default.createElement(b,{value:"type"},"账簿类型"),l.default.createElement(b,{value:"main"},"主账簿"))),l.default.createElement(T,{checkStrictly:!0,checkable:"tree"===i&&c,data:a,onSelect:r.onTreeNodeSelectWapper.bind(r),onExpand:r.onTreeNodeExpand,onCheck:r.onTreeNodeCheckWapper.bind(r),checkedKeys:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o.keys())),selectedKeys:t,expandedKeys:n,autoExpandParent:!1,isTreelazyLoad:d,root:f,onlyLeafCanSelect:s,onDoubleClick:function(){}}))},r.state=a({},r.state,{treetype:"type"}),r}return y(t,h),i(t,[{key:"onTreeNodeSelectWapper",value:function(e,t){var n=t.selected,r=t.selectedNodes,o=t.node,a=t.event;if("table"!=this.state.treetype||"root"!=o.props.treeNodeData.pid){for(var u=arguments.length,i=Array(u>2?u-2:0),c=2;c<u;c++)i[c-2]=arguments[c];this.onTreeNodeSelect.apply(this,[e,{selected:n,selectedNodes:r,node:o,event:a}].concat(i))}}},{key:"onTreeNodeCheckWapper",value:function(e,t){var n=t.checked,r=t.checkedNodes,o=t.node,a=t.event;"table"==this.state.treetype&&"root"==o.props.treeNodeData.pid||this.onTreeNodeCheckWapper(e,{checked:n,checkedNodes:r,node:o,event:a})}}]),t}()},4:function(e,n){e.exports=t}})});
//# sourceMappingURL=index.js.map