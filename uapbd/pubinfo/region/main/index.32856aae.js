!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["uapbd/pubinfo/region/main/index"]=t(require("nc-lightapp-front"),require("react")):e["uapbd/pubinfo/region/main/index"]=t(e["nc-lightapp-front"],e.React)}(window,function(e,t){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="../../../../",o(o.s=195)}({1:function(t,o){t.exports=e},146:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments[2],a=0,i={},c=function(){2==a&&s&&s(i.templateData||{},i.langData||{},i.inlt||{})};o.callback&&console.log("咱们自己createUIDom会同时获取多语和单据模板,并通过一个回调函数返回, langCfg中的回调函数将被忽略");var l=r({},o,{callback:function(e,t,o){a+=1,t||(0,n.toast)({content:"load muti lang error",color:"warning"}),i.langData=e||{},i.inlt=o||{},c()}});e.MultiInit.getMultiLang(l),e.createUIDom(t,function(e){a+=1,i.templateData=e||{},c()})}};var n=o(1)},195:function(e,t,o){e.exports=o(196)},196:function(e,t,o){"use strict";var r,n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=o(2),c=f(i),l=o(1),u=f(o(197)),d=f(o(146));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var h=l.base.NCMenu,g=(l.base.NCDropdown,l.base.NCCheckbox),m=(l.base.NCPopconfirm,l.base.NCMessage),b=(l.base.NCCol,l.base.NCRow,l.base.NCButton,l.base.NCTooltip,h.NCMenuGroup,h.Item),v=l.high.PrintOutput,y="head",k={loadTreeDataUrl:"/nccloud/uapbd/region/loadtreedata.do",queryTemplet:"/nccloud/platform/templet/querypage.do",addCardUrl:"/nccloud/uapbd/region/addcard.do",queryCardUrl:"/nccloud/uapbd/region/querycard.do",enablestateUrl:"/nccloud/uapbd/region/enablestate.do",deleteUrl:"/nccloud/uapbd/region/deltreenode.do",printUrl:"/nccloud/uapbd/region/print.do",checkUrl:"/nccloud/uapbd/region/regioncheck.do",saveUrl:"/nccloud/uapbd/region/savenode.do"},I=void 0,S=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.call(o),o.config=Object.assign({title:"10140REG-000000",treeId:"regionTree",formId:y,pageCode:"10140REG_region",nodeType:"GROUP_NODE",isGlbGrp:"0",urls:k},e.config),o.root={isleaf:!1,key:"~",title:o.config.title,id:"~",innercode:"~",pid:"",refname:o.config.title,refpk:"~"},o.initButtonStatus=o.initButtonStatus.bind(o),o.changeButtonStatus=o.changeButtonStatus.bind(o),o.onStartRegion=o.onStartRegion.bind(o),o.onStopRegion=o.onStopRegion.bind(o),o.dealTreeData=o.dealTreeData.bind(o),o.state={disabledSearch:!1,checked:!1,ids:[],json:{},disabledShowOff:!1,curCountry:"",curSelectedNode:null},o.initTemplate(e,function(){o.getTreeData()}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"dealTreeData",value:function(e){return e.forEach(function(e){e.iconBox={delIcon:!0,editIcon:!0,addIcon:!0},function e(t){t.iconBox={delIcon:!0,editIcon:!0,addIcon:!0},t.children&&0!=t.children.length?(t.isLeaf=!1,t.children.forEach(function(t){e(t)})):delete t.children}(e)}),e}},{key:"componentWillMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.props.form.getFormStatus(this.config.formId);window.onbeforeunload="add"!=e&&"edit"!=e?null:function(){return""}}},{key:"initButtonStatus",value:function(){this.props.button.setButtonVisible("save",!1),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("cancel",!1),this.props.button.setButtonVisible("print",!0),this.props.button.setButtonVisible("output",!0),this.props.button.setButtonVisible("refresh",!0)}},{key:"onSelectTree",value:function(e){var t=this;if("edit"!=this.props.form.getFormStatus(this.config.formId))return e==this.root.refpk?(this.props.form.EmptyAllFormValue(this.config.formId),void this.props.form.setFormItemsDisabled(this.config.formId,{enablestate:!0})):void(0,l.ajax)({url:this.config.urls.queryCardUrl,data:{pk_region:e,isGlbGrp:this.config.isGlbGrp},success:function(e){if(e.success){e.formulamsg&&e.formulamsg instanceof Array&&e.formulamsg.length>0&&props.dealFormulamsg(e.formulamsg,p({},t.config.formId,"form"));var o=e.data.head.rows[0].values;if(o.hasOwnProperty("enablestate")){var r=o.enablestate.value;e.data.head.rows[0].values.enablestate.value="2"==r}o.pk_father.display==t.root.refpk&&(e.data.head.rows[0].values.pk_father.display="",e.data.head.rows[0].values.pk_father.value=""),t.props.form.EmptyAllFormValue(t.config.formId),t.props.form.setAllFormValue({head:e.data.head}),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!1})}}})}},{key:"onBeforerFormEvent",value:function(e,t,o,r,n){switch(o){case"pk_father":var s=e.meta.getMeta();return s.head.items.map(function(e){"pk_father"==e.attrcode&&(e.queryCondition=function(){return{pk_country:n.pk_country.value}})}),e.meta.setMeta(s),!0;default:return!0}}},{key:"onAfterFormEvent",value:function(e,t,o,r,n){var s=this;switch(o){case"enablestate":var a=this.props.syncTree.getSelectNode(this.config.treeId);if(!a){var i=r.value?this.state.json["10140REG-000001"]:this.state.json["10140REG-000002"];return void m.create({content:i,color:"warning"})}var c={pk_region:a.refpk,enablestate:r.value?"2":"1"};(0,l.ajax)({data:c,url:"/nccloud/uapbd/region/regionenablecheck.do",success:function(t){(0,l.promptBox)({color:"warning",title:r.value?s.state.json["10140REG-000027"]:s.state.json["10140REG-000028"],content:r.value?s.state.json["10140REG-000004"]:s.state.json["10140REG-000005"],beSureBtnClick:function(){(0,l.ajax)({url:s.config.urls.enablestateUrl,data:c,success:function(e){(0,l.toast)({title:r.value?s.state.json["10140REG-000006"]:s.state.json["10140REG-000007"],color:"success"})}})},cancelBtnClick:function(){e.form.setFormItemsValue(s.config.formId,{enablestate:{value:!r.value,display:!r.value}})}})}})}}},{key:"onAddRegion",value:function(e){var t=this;if(this.state.curCountry.refpk){this.setState({curSelectedNode:e});var o={pk_country:this.state.curCountry.refpk,pk_father:e?e.refpk:this.root.refpk};(0,l.ajax)({url:this.config.urls.addCardUrl,data:o,success:function(o){o.success&&(t.props.form.EmptyAllFormValue(t.config.formId),o.formulamsg&&o.formulamsg instanceof Array&&o.formulamsg.length>0&&props.dealFormulamsg(o.formulamsg,p({},t.config.formId,"form")),t.props.form.setFormStatus(t.config.formId,"edit"),t.props.form.setAllFormValue({head:o.data.head}),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!0}),t.props.syncTree.setNodeDisable(t.config.treeId,!0),t.setState({disabledSearch:!0,disabledShowOff:!0}),t.changeButtonStatus(e,"add"))}})}else(0,l.toast)({content:this.state.json["10140REG-000008"],color:"warning"})}},{key:"onEditRegion",value:function(e){var t=this;this.setState({curSelectedNode:e}),e?(0,l.ajax)({url:this.config.urls.checkUrl,data:{pk_region:e.refpk,isGlbGrp:this.config.isGlbGrp},success:function(o){o.success&&(o.formulamsg&&o.formulamsg instanceof Array&&o.formulamsg.length>0&&props.dealFormulamsg(o.formulamsg,p({},t.config.formId,"form")),t.props.syncTree.setNodeDisable(t.config.treeId,!0),t.props.form.setAllFormValue({head:o.data.head}),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!0}),t.props.form.setFormStatus(t.config.formId,"edit"),t.changeButtonStatus(e,"edit"),t.setState({disabledSearch:!0,disabledShowOff:!0}))}}):m.create({content:this.state.json["10140REG-000009"],color:"warning"})}},{key:"onSaveRegion",value:function(){var e=this,t=this.props.syncTree.getSelectNode(this.config.treeId);t||(t=this.state.curSelectedNode);var o,r=this.props.form.getAllFormValue(this.config.formId);r.areacode=this.config.formId,r.rows.status="2",o={model:r,pageid:this.config.pageCode};var n=null;r.rows[0].values.hasOwnProperty("pk_region")&&(n=r.rows[0].values.pk_region.value);var s=!1;null!=n&&""!=n||(s=!0),this.props.validateToSave(o,function(){(0,l.ajax)({url:e.config.urls.saveUrl,data:o,success:function(o){o.success&&(e.props.form.setFormStatus(e.config.formId,"browse"),e.props.syncTree.setNodeDisable(e.config.treeId,!1),o.data[0].children&&0!=o.data[0].children.length||delete o.data[0].children,s?e.props.syncTree.addNodeSuccess(e.config.treeId,o.data):e.props.syncTree.editNodeSuccess(e.config.treeId,o.data[0]),e.props.syncTree.openNodeByPk(e.config.treeId,o.data[0].pid),e.props.syncTree.setNodeSelected(e.config.treeId,o.data[0].refpk),e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:!1}),e.setState({curSelectedNode:null,disabledSearch:!1,disabledShowOff:!1}),(0,l.toast)({title:e.state.json["10140REG-000010"],color:"success"}),e.changeButtonStatus(t,"save"))}})},p({},this.config.formId,"form"),"form")}},{key:"onSaveAddRegion",value:function(){var e=this,t=this.props.syncTree.getSelectNode(this.config.treeId),o={},r=this.props.form.getAllFormValue(this.config.formId);r.areacode=this.config.formId,r.rows.status="2",o={model:r,pageid:"10140REG_region"};var n=null;r.rows[0].values.hasOwnProperty("pk_region")&&(n=r.rows[0].values.pk_region.value);this.props.validateToSave(o,function(){(0,l.ajax)({url:e.config.urls.saveUrl,data:o,success:function(r){r.success&&(e.props.form.setFormStatus(e.config.formId,"browse"),r.data[0].children&&0!=r.data[0].children.length||delete r.data[0].children,e.props.syncTree.addNodeSuccess(e.config.treeId,r.data),e.props.syncTree.openNodeByPk(e.config.treeId,r.data[0].pid),t||(e.props.syncTree.setNodeSelected(e.config.treeId,r.data[0].pid),t=e.props.syncTree.getSelectNode(e.config.treeId)),e.props.syncTree.setNodeDisable(e.config.treeId,!0),o=t?{pk_father:t.refpk}:{pk_father:e.root.refpk},(0,l.ajax)({url:e.config.urls.addCardUrl,data:o,success:function(o){o.success&&(e.props.form.EmptyAllFormValue(e.config.formId),e.props.form.setAllFormValue({head:o.data.head}),e.props.form.setFormStatus(e.config.formId,"edit"),(0,l.toast)({title:e.state.json["10140REG-000010"],color:"success"}),e.changeButtonStatus(t,"saveAdd"))}})),e.setState({disabledSearch:!0,disabledShowOff:!0})}})},p({},this.config.formId,"form"),"form")}},{key:"onDeleteRegion",value:function(e){var t=this,o={};if(e)if(e.refpk!=this.root.refpk){var r=this.state.json["10140REG-000013"];e.hasOwnProperty("children")&&null!=e.children&&e.children.length>0?m.create({content:this.state.json["10140REG-000014"],color:"warning"}):(0,l.promptBox)({color:"warning",title:this.state.json["10140REG-000015"],content:r,beSureBtnClick:function(){o={pk_region:e.refpk};e.pid;(0,l.ajax)({url:t.config.urls.deleteUrl,data:o,success:function(o){o.success&&(t.props.form.EmptyAllFormValue(t.config.formId),t.props.syncTree.delNodeSuceess(t.config.treeId,e.refpk),(0,l.toast)({title:t.state.json["10140REG-000016"],color:"success"}),t.changeButtonStatus(e,"del"))}})}})}else m.create({content:this.state.json["10140REG-000012"],color:"warning"});else m.create({content:this.state.json["10140REG-000011"],color:"warning"})}},{key:"onCancelRegion",value:function(){var e=this,t=this.props.syncTree.getSelectNode(this.config.treeId);this.props.form.EmptyAllFormValue(this.config.formId),this.props.form.setFormItemsDisabled(this.config.formId,{enablestate:!0}),t&&"~"!=t.refpk?(0,l.ajax)({url:this.config.urls.queryCardUrl,data:{pk_region:t.refpk,isGlbGrp:this.config.isGlbGrp},success:function(t){t.success&&e.props.form.setAllFormValue({head:t.data.head})}}):this.props.form.EmptyAllFormValue(this.config.formId),this.props.form.setFormStatus(this.config.formId,"browse"),this.props.syncTree.setNodeDisable(this.config.treeId,!1),this.props.form.setFormItemsDisabled(this.config.formId,{enablestate:!1}),this.changeButtonStatus(t,"cancel"),this.setState({disabledSearch:!1,disabledShowOff:!1})}},{key:"onStartRegion",value:function(){var e,t=this,o=this.props.form.getAllFormValue(this.config.formId),r=this.props.asyncTree.getSelectNodeAsync(this.config.treeId);if(r){if("2"==o.rows[0].values.enablestate.value)return void m.create({content:this.state.json["10140REG-000017"],color:"warning"})}else m.create({content:this.state.json["10140REG-000001"],color:"warning"});e={pk_region:o.rows[0].values.pk_region.value,enablestate:"2"},(0,l.ajax)({url:this.config.urls.enablestateUrl,data:e,success:function(e){t.props.form.setAllFormValue({head:e.data.head}),t.refreshTreeNode(t.config.treeId,r.pid),t.changeButtonStatus("start")}})}},{key:"onStopRegion",value:function(){var e,t=this,o=this.props.form.getAllFormValue(this.config.formId),r=this.props.asyncTree.getSelectNodeAsync(this.config.treeId);if(r){if("1"==o.rows[0].values.enablestate.value)return void m.create({content:this.state.json["10140REG-000018"],color:"warning"})}else m.create({content:this.state.json["10140REG-000002"],color:"warning"});e={pk_region:o.rows[0].values.pk_region.value,enablestate:"1"},(0,l.ajax)({url:this.config.urls.enablestateUrl,data:e,success:function(e){e.success&&(t.props.form.EmptyAllFormValue(t.config.formId),t.refreshTreeNode(t.config.treeId,r.pid),t.changeButtonStatus("stop"))}})}},{key:"onMoreSelect",value:function(e){var t=e.key;"start"==t?this.onStartRegion():"stop"==t&&this.onStopRegion()}},{key:"onVisibleChange",value:function(e){}},{key:"onMore",value:function(){}},{key:"changeButtonStatus",value:function(e,t){var o=this.props.syncTree.getSyncTreeValue(this.config.treeId);if(o){var r=this.getTreeAllPks(o);r&&0!==r.length?this.props.button.setDisabled({print:!1,output:!1}):this.props.button.setDisabled({print:!0,output:!0})}switch(t){case"add":case"saveAdd":this.props.button.setButtonVisible("save",!0),this.props.button.setButtonVisible("saveAdd",!0),this.props.button.setButtonVisible("cancel",!0),this.props.button.setButtonVisible("print",!1),this.props.button.setButtonVisible("output",!1),this.props.button.setButtonVisible("refresh",!1),this.props.button.setDisabled({save:!1,saveAdd:!1,cancel:!1});break;case"edit":this.props.button.setButtonVisible("save",!0),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("cancel",!0),this.props.button.setButtonVisible("print",!1),this.props.button.setButtonVisible("output",!1),this.props.button.setButtonVisible("refresh",!1),this.props.button.setDisabled({save:!1,cancel:!1});break;case"del":this.props.button.setButtonVisible("save",!1),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("cancel",!1);break;case"save":case"cancel":this.props.button.setButtonVisible("save",!1),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("print",!0),this.props.button.setButtonVisible("output",!0),this.props.button.setButtonVisible("refresh",!0),this.props.button.setButtonVisible("cancel",!1)}}},{key:"onAddNodeCallBack",value:function(e,t,o){var r=this,n=this.props.syncTree.getSelectNode(this.config.treeId),s={};s.pid=n?n.refpk:this.root.refpk,(0,l.ajax)({url:this.config.urls.addCardUrl,data:s,success:function(e){e.success&&(r.props.form.EmptyAllFormValue(r.config.formId),r.props.form.setAllFormValue(e.data),r.props.form.setFormStatus(r.config.formId,"edit"),r.props.syncTree.setNodeDisable(r.config.treeId,!0))}})}},{key:"onEditNodeCallBack",value:function(e,t,o){var r=this,n=this.props.syncTree.getSelectNode(this.config.treeId),s={};n?(s.pk_region=n.refpk,(0,l.ajax)({url:this.config.urls.queryCardUrl,data:s,success:function(e){r.props.form.EmptyAllFormValue(r.config.formId),r.props.form.setAllFormValue(e.data),r.props.form.setFormStatus(r.config.formId,"edit"),r.props.syncTree.setNodeDisable(r.config.treeId,!0)}})):m.create({content:this.state.json["10140REG-000009"],color:"warning"})}},{key:"onDelNodeCallBack",value:function(e,t,o){var r=this,n=this.props.syncTree.getSelectNode(this.config.treeId),s={};n?(s.pk_region=n.refpk,(0,l.ajax)({url:this.config.urls.deleteUrl,data:s,success:function(e){e.success&&r.props.syncTree.delNodeSuceess(r.config.treeId,n.refpk)}})):m.create({content:this.state.json["10140REG-000011"],color:"warning"})}},{key:"onMouseEnterEve",value:function(e){if(e===this.root.refpk){this.props.syncTree.hideIcon(this.config.treeId,e,{delIcon:!1,editIcon:!1,addIcon:!0})}else{this.props.syncTree.hideIcon(this.config.treeId,e,{delIcon:!0,editIcon:!0,addIcon:!0})}}},{key:"onRefresh",value:function(){var e=this,t={checked:this.state.checked,pk_country:this.state.curCountry.refpk};(0,l.ajax)({url:this.config.urls.loadTreeDataUrl,data:t,success:function(t){if(t.success){var o=[Object.assign(s({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];e.props.syncTree.setSyncTreeData(e.config.treeId,e.dealTreeData(o)),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk),(0,l.toast)({title:e.state.json["10140REG-000019"],color:"success"})}}})}},{key:"onChange",value:function(e){var t=this,o=this.props.syncTree.getSelectNode(this.config.treeId),r={};o||m.create({content:this.state.json["10140REG-000020"],color:"warning"}),r.pk_region=o.refpk,r.enablestate=e?"2":"1",(0,l.ajax)({url:this.config.urls.enablestateUrl,data:r,success:function(r){r.success&&(e?t.props.form.setAllFormValue({head:r.data.head}):(t.props.form.EmptyAllFormValue(t.config.formId),t.props.syncTree.delNodeSuceess(t.config.treeId,o.refpk))),t.refreshTreeNode(t.config.treeId,o.pid)}})}},{key:"onCheckBoxChange",value:function(){var e=this;if(!this.state.disabledShowOff){this.state.checked=!this.state.checked;var t={checked:this.state.checked,pk_country:this.state.curCountry.refpk};(0,l.ajax)({url:this.config.urls.loadTreeDataUrl,data:t,success:function(t){if(t.success){var o=[Object.assign(s({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];o.forEach(function(e){!function e(t){t.children&&0!=t.children.length?(t.isLeaf=!1,t.children.forEach(function(t){e(t)})):delete t.children}(e)}),e.props.syncTree.setSyncTreeData(e.config.treeId,o),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk)}}})}}},{key:"onCheckBoxClick",value:function(){this.setState({checked:!this.state.checked}),this.props.form.EmptyAllFormValue(this.config.formId)}},{key:"onButtonClick",value:function(e,t){var o=this;switch(t){case"refresh":this.onRefresh.call(this);break;case"save":this.onSaveRegion.call(this);break;case"saveAdd":this.onSaveAddRegion.call(this);break;case"cancel":(0,l.promptBox)({color:"warning",title:this.state.json["10140REG-000021"],content:this.state.json["10140REG-000022"],beSureBtnClick:function(){o.onCancelRegion()}});break;case"print":var r=this.props.syncTree.getSyncTreeValue(this.config.treeId);if(r){var n=this.getTreeAllPks(r);(0,l.print)("pdf",k.printUrl,{funcode:"10140REG",oids:n})}break;case"output":this.onOutput()}}},{key:"onCountryChange",value:function(e){var t=this;this.setState({curCountry:e}),setTimeout(function(){return t.loadRegionTreeData()},10)}},{key:"loadRegionTreeData",value:function(){var e=this;(0,l.ajax)({loading:!0,url:this.config.urls.loadTreeDataUrl,data:{checked:this.state.checked,pk_country:this.state.curCountry.refpk},success:function(t){if(t.success){t.data?e.props.button.setDisabled({print:!1,output:!1}):e.props.button.setDisabled({print:!0,output:!0});var o=[Object.assign(s({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];e.props.syncTree.setSyncTreeData(e.config.treeId,e.dealTreeData(o)),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk)}}})}},{key:"render",value:function(){var e=this.props,t=e.asyncTree,o=e.button,r=e.syncTree,n=e.modal,s=e.DragWidthCom,a=e.treeTable,i=e.form,l=(a.createTreeTable,o.createButtonApp),d=i.createForm,f=r.createSyncTree,p=n.createModal;t.createAsyncTree,c.default.createElement(h,{onSelect:this.onMoreSelect.bind(this)},c.default.createElement(b,{key:"start"},this.state.json["10140REG-000027"]),c.default.createElement(b,{key:"stop"},this.state.json["10140REG-000028"]));return c.default.createElement("div",null,p("modal",{noFooter:!1}),c.default.createElement("div",{className:"header"},c.default.createElement("div",{className:"title"},this.state.json["10140REG-000000"]),c.default.createElement("div",{className:"search-box",style:{width:200}},(0,u.default)({onChange:this.onCountryChange.bind(this),value:this.state.curCountry,disabled:this.state.disabledSearch})),c.default.createElement("span",{className:"showOff"},c.default.createElement(g,{defaultChecked:!1,checked:this.state.checked,onChange:this.onCheckBoxChange.bind(this),disabled:this.state.disabledShowOff,size:"lg"},this.state.json["10140REG-000029"])),c.default.createElement("div",{className:"btn-group"},l({area:"head",buttonLimit:3,onButtonClick:this.onButtonClick.bind(this),popContainer:document.querySelector(".btn-group")}))),c.default.createElement("div",{className:"tree-card"},c.default.createElement(s,{leftDom:c.default.createElement("div",{className:"tree-area"},f({treeId:this.config.treeId,disabledSearch:this.state.disabledSearch,needEdit:!0,showLine:!1,needSearch:!0,onSelectEve:this.onSelectTree.bind(this),onMouseEnterEve:this.onMouseEnterEve.bind(this),clickEditIconEve:this.onEditRegion.bind(this),clickAddIconEve:this.onAddRegion.bind(this),clickDelIconEve:this.onDeleteRegion.bind(this),showModal:!1})),rightDom:c.default.createElement("div",{className:"card-area"},d(this.config.formId,{cancelPSwitch:!0,onBeforeEvent:this.onBeforerFormEvent.bind(this),onAfterEvent:this.onAfterFormEvent.bind(this)})),defLeftWid:"20%"}),c.default.createElement(v,{ref:"printOutput",url:k.printUrl,data:{funcode:"10140REG",oids:this.state.ids,outputType:"output"}})))}}]),t}(),n=function(){var e=this;this.initTemplate=function(t,o){(0,d.default)(t)({pagecode:"10140REG_region"},{moduleId:"10140REG",domainName:"uapbd"},function(r,n){n&&(e.state.json=n),r&&(I=r.template,I=e.modifierMeta(I,t),t.meta.setMeta(I),r.button&&t.button.setButtons(r.button),t.button.setDisabled({print:!0,output:!0}),o&&o())})},this.modifierMeta=function(e,t){return e},this.getTreeData=function(){var t={checked:e.state.checked,pk_country:e.state.curCountry.refpk};(0,l.ajax)({url:e.config.urls.loadTreeDataUrl,data:t,success:function(t){if(t.success){var o=[Object.assign(s({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];e.props.syncTree.setSyncTreeData(e.config.treeId,e.dealTreeData(o)),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk)}}}),e.initButtonStatus()},this.onOutput=function(){var t=e.props.syncTree.getSyncTreeValue(e.config.treeId);if(0!==t.length){var o=e.getTreeAllPks(t);e.setState({ids:o},e.refs.printOutput.open())}else(0,l.toast)({content:e.state.json["10140REG-000023"],color:"warning"})},this.getTreeAllPks=function(e){var t=new Array;return function e(o){o.forEach(function(o){"~"!=o.refpk&&t.push(o.refpk),o.hasOwnProperty("children")&&o.children&&o.children.length>0&&e(o.children)})}(e),t}},r);S=(0,l.createPage)({billinfo:{billtype:"form",pagecode:"10140REG_region",headcode:y}})(S),ReactDOM.render(c.default.createElement(S,null),document.querySelector("#app"))},197:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(n,r({},{multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"grid",refName:"refer-000444",placeholder:"refer-000444",refCode:"uapbd.refer.pubinfo.CountryExDefaultGridRef",queryGridUrl:"/nccloud/uapbd/pub/CountryExDefaultGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-000002","refer-000441","refer-000003","refer-000422","refer-000442","refer-000443","refer-000445"],code:["refcode","codeth","refname","description","timezonename","formatname","iseucountry"],checked:{description:!1,timezonename:!1,formatname:!1,iseucountry:!1}}]},e))};var n=o(1).high.Refer},2:function(e,o){e.exports=t}})});
//# sourceMappingURL=index.32856aae.js.map