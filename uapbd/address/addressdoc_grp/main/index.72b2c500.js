!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uapbd/address/addressdoc_grp/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uapbd/address/addressdoc_grp/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,function(e,t,a){return function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=169)}({1:function(t,a){t.exports=e},158:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=l(a(7)),n=a(2),s=l(n);l(a(4)),a(1);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),o(t,[{key:"render",value:function(){return s.default.createElement(r.default,{config:{title:"10140ADRB-000024",pageCode:"10140ADRG_card",appcode:"10140ADRG",nodeType:"GROPE_NODE"}})}}]),t}();t.default=d},159:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=l(a(8)),n=a(2),s=l(n);l(a(4)),a(1);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),o(t,[{key:"render",value:function(){return s.default.createElement(r.default,{config:{title:"10140ADRB-000024",pageCode:"10140ADRG_list",appcode:"10140ADRG",nodeType:"GROPE_NODE"}})}}]),t}();t.default=d},169:function(e,t,a){e.exports=a(170)},170:function(e,t,a){"use strict";var o=a(1);!function(e,t){(0,o.RenderRouter)(e,t)}(function(e){return e&&e.__esModule?e:{default:e}}(a(171)).default,"app")},171:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(1),r=function(e){return e&&e.__esModule?e:{default:e}}(a(159));var n=(0,o.asyncComponent)(function(){return Promise.resolve().then(a.t.bind(null,158,7))}),s=[{path:"/",component:r.default,exact:!0},{path:"/list",component:r.default},{path:"/card",component:n}];t.default=s},2:function(e,a){e.exports=t},3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e};t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],s=0,l={},d=function(){2==s&&n&&n(l.templateData||{},l.langData||{},l.inlt||{})};a.callback&&console.log("咱们自己createUIDom会同时获取多语和单据模板,并通过一个回调函数返回, langCfg中的回调函数将被忽略");var i=o({},a,{callback:function(e,t,a){s+=1,t||(0,r.toast)({content:"load muti lang error",color:"warning"}),l.langData=e||{},l.inlt=a||{},d()}});e.MultiInit.getMultiLang(i),e.createUIDom(t,function(e){s+=1,l.templateData=e||{},d()})}};var r=a(1)},4:function(e,t){e.exports=a},7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=a(2),l=c(s),d=a(1),i=c(a(3));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=d.high.PrintOutput,p=d.base.NCAffix,m=d.base.NCBackBtn,b=d.cardCache.getCacheById,g=d.cardCache.updateCache,v=d.cardCache.addCache,h=d.cardCache.getCurrentLastId,y=d.cardCache.getNextId,k=d.cardCache.deleteCacheById,I="linkmanvos",w="10140LM",D="pk_addressdoc",_="uapbd.address.addressdoc_grp.dataSource",C={queryaddresscardUrl:"/nccloud/uapbd/address/queryaddresscard.do",SaveaddressUrl:"/nccloud/uapbd/address/saveaddress.do",updateaddressUrl:"/nccloud/uapbd/address/updateaddress.do",deladdressUrl:"/nccloud/uapbd/address/deladdress.do",copyaddressUrl:"/nccloud/uapbd/address/copyAddressCard.do",saveLinkman:"/nccloud/uapbd/address/saveLinkman.do",queryLinkman:"/nccloud/uapbd/address/queryLinkman.do",queryDefaultDataUrl:"/nccloud/uapbd/address/queryDefaultData.do",enablestateUrl:"/nccloud/uapbd/address/enableAddressDocInfo.do",print:"/nccloud/uapbd/address/printAddressDocInfo.do",cancel:"/nccloud/uapbd/address/cancelAddressDoc.do",validateUrl:"/nccloud/uapbd/address/validateAddressDoc.do"},j=(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.call(a),a.config=Object.assign({title:"10140ADRB-000000",tableId:"linkmanvos",formId:"head",linkman:"10140LM",pageCode:"10140ADRB_card",appcode:"10140ADRB",oid:"1004Z01000000000YWY3",nodeType:"GLOBE_NODE",primaryKey:"pk_addressdoc",urls:C},e.config),a.state={project_code:null,bill_code:"",isedit:!0,pks:[],stated:"browse",json:{},isPrecode:!0},a.initTemplate(a.props,function(){if("add"!=a.props.getUrlParam("status")){var e=a.props.getUrlParam("id");e&&"undefined"!=e&&a.getdata(e)}else{var t=a.props.getUrlParam("id");t&&"undefined"!=t?a.copydate(t):a.setDefaultValue()}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),n(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.props.form.getFormStatus(this.config.formId);window.onbeforeunload="browse"===e?null:function(){return""}}},{key:"buttonClick",value:function(e,t){var a=this;switch(t){case"add":e.form.EmptyAllFormValue(this.config.formId),e.cardTable.setTableData(this.config.tableId,{rows:[]}),e.setUrlParam({status:"add"}),this.setDefaultValue();break;case"edit":(0,d.ajax)({url:C.validateUrl,data:{pk:e.getUrlParam("id"),nodeType:e.config.nodeType,type:t},success:function(t){e.setUrlParam({status:"edit",id:e.getUrlParam("id")}),a.toggleShow()}});break;case"delete":(0,d.ajax)({url:C.validateUrl,data:{pk:e.getUrlParam("id"),nodeType:e.config.nodeType,type:t},success:function(e){(0,d.promptBox)({color:"info",title:a.state.json["10140ADRB-000002"],content:a.state.json["10140ADRB-000003"],beSureBtnClick:a.delConfirm.bind(a)})}});break;case"back":e.pushTo("list");break;case"save":this.saveClick();break;case"saveadd":this.saveaddClick();break;case"copy":e.setUrlParam({status:"add",id:e.getUrlParam("id")}),this.copydate(e.getUrlParam("id"));break;case"cancel":(0,d.promptBox)({color:"info",title:this.state.json["10140ADRB-000004"],content:this.state.json["10140ADRB-000005"],beSureBtnClick:function(){if("add"===e.getUrlParam("status"))if(e.getUrlParam("id"))e.setUrlParam({status:"browse",id:e.getUrlParam("id")}),a.getdata(e.getUrlParam("id"));else{var t=a.props.form.getFormItemsValue(a.config.formId,"code");(0,d.ajax)({url:C.cancel,data:{code:t.value},success:function(t){e.form.cancel(a.config.formId),e.cardTable.resetTableData(a.config.tableId);var o=h(_);if(e.setUrlParam({status:"browse",id:o}),null==o)return a.props.button.setButtonVisible(["add","edit","delete","copy","refresh","back","print"],!0),a.props.button.setButtonVisible(["save","saveadd","cancel","addline"],!1),a.props.button.setDisabled(["edit","delete","copy","refresh","back","print"],!0),a.props.form.cancel(a.config.formId),a.props.cardTable.resetTableData(a.config.tableId),void a.props.form.setFormItemsDisabled(a.config.formId,{enablestate:!0});var r=a.props.getUrlParam("id");r&&"undefined"!=r&&a.getdata(r)}})}"edit"===e.getUrlParam("status")&&(e.form.cancel(a.config.formId),e.cardTable.resetTableData(a.config.tableId),e.setUrlParam({status:"browse",id:e.getUrlParam("id")})),a.toggleShow()},cancelBtnClick:function(){},closeBtnClick:function(){}});break;case"addline":this.linkadd(e);break;case"refresh":var o=this.props.getUrlParam("id");o&&"undefined"!=o&&this.getdata(o,!0,function(){(0,d.toast)({title:a.state.json["10140ADRB-000006"],color:"success"})});break;case"print":this.pintFunction({funcode:"10140ADRB",nodekey:"addresscard",outputType:"print"});break;case"output":var r=this.props.getUrlParam("id");if(null==r)return;var n=[];n.push(r),this.setState({pks:n},this.refs.printOutput.open())}}},{key:"pintFunction",value:function(e){var t=this.props.getUrlParam("id");if(null!=t){var a=[];a.push(t),e.oids=a,(0,d.print)("pdf",C.print,e)}}},{key:"render",value:function(){var e=this.props,t=e.cardTable,a=e.form,o=e.button,r=e.modal,n=e.cardPagination.createCardPagination,s=a.createForm,d=t.createCardTable,i=o.createButtonApp,c=r.createModal;return l.default.createElement("div",{className:"nc-bill-card"},l.default.createElement("div",{className:"nc-bill-top-area"},l.default.createElement(p,null,l.default.createElement("div",{className:"nc-bill-header-area"},"browse"===this.state.stated&&l.default.createElement(m,{className:"title-search-detail",onClick:this.buttonClick.bind(this,this.props,"back")}),l.default.createElement("div",{className:"header-title-search-area"},l.default.createElement("h2",{className:"title-search-detail"},this.state.json[this.config.title],"browse"==this.state.stated?"："+(null!=this.state.project_code?this.state.project_code:""):"")),l.default.createElement("div",{className:"header-button-area"},i({area:"card-header-button",buttonLimit:3,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".card-header-button")})),l.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},n({handlePageInfoChange:this.pageInfoClick.bind(this),dataSource:_})))),l.default.createElement("div",{className:"nc-bill-form-area"},s(this.config.formId,{onAfterEvent:this.afterEvent.bind(this)}))),l.default.createElement("div",{className:"nc-bill-bottom-area"},l.default.createElement("div",{className:"nc-bill-table-area"},d(this.config.tableId,{tableHead:this.getTableHead.bind(this),modelSave:this.modelSave.bind(this),tableModelConfirm:this.tableModelConfirm,showIndex:!0}))),c("delete",{title:this.state.json["10140ADRB-000012"],content:this.state.json["10140ADRB-000013"],beSureBtnClick:this.delConfirm.bind(this)}),c("linkmanModal",{title:this.state.json["10140ADRB-000014"],size:"lg",content:this.createLinkmanForm()}),c("modal",{noFooter:!1}),l.default.createElement(f,{ref:"printOutput",url:C.print,data:{funcode:"10140ADRB",nodekey:"addresscard",oids:this.state.pks,outputType:"output"}}))}}]),t}(),r=function(){var e=this;this.initTemplate=function(t,a){(0,i.default)(t)({pagecode:t.config.pageCode?t.config.pageCode:"10140ADRB_card"},{moduleId:"10140ADRB",domainName:"uapbd"},function(o,r){if(r&&(e.state.json=r),o){if(o.button){var n=o.button;t.button.setButtons(n)}if(o.template){var s=o.template;e.modifierMeta(t,s),t.meta.setMeta(s)}a&&a()}})},this.tableBtnAry=function(e){return"browse"===e.cardTable.getStatus(I)?[]:["insertline","delline","editline"]},this.modifierMeta=function(t,a){var o=t.getUrlParam("status");return a.head.status=o,a[I].status=o,a.head.items.map(function(a){"pk_areacl"==a.attrcode&&(a.queryCondition=function(){if("GLOBE_NODE"==e.config.nodeType)return{pk_org:"GLOBLE00000000000000"}}),"province"==a.attrcode&&(a.disabled=!0,a.queryCondition=function(){return{pk_country:t.form.getFormItemsValue("head","country").value,pk_father:"~"}}),"city"==a.attrcode&&(a.disabled=!0,a.queryCondition=function(){return{pk_father:t.form.getFormItemsValue("head","province").value}}),"region"==a.attrcode&&(a.disabled=!0,a.queryCondition=function(){return{pk_father:t.form.getFormItemsValue("head","city").value}})}),a[I].items.push({attrcode:"opr",label:e.state.json["10140ADRB-000001"],visible:!0,className:"table-opr",width:200,itemtype:"customer",render:function(a,o,r){var n=e.tableBtnAry(t);return t.button.createOprationButton(n,{area:"table-opr-button",buttonLimit:3,onButtonClick:function(t,n){return e.tableButtonClick(t,n,a,o,r)}})}}),a},this.tablemodalshow=function(t,a){t.modal.show("linkmanModal",{userControl:!0,beSureBtnClick:function(){if(e.props.form.isCheckNow(w)){var o=t.form.getAllFormValue(w);(0,d.ajax)({url:C.saveLinkman,data:{pageid:t.config.pageCode,gridModel:o},success:function(e){var r=e.success,n=e.data;r&&(t.modal.close("linkmanModal"),n&&(t.cardTable.setValByKeyAndIndex(I,a,"pk_linkman",{value:n,display:n}),t.cardTable.setValByKeyAndIndex(I,a,"pk_linkman.name",o.rows[0].values.name),t.cardTable.setValByKeyAndIndex(I,a,"pk_linkman.sex",o.rows[0].values.sex),t.cardTable.setValByKeyAndIndex(I,a,"pk_linkman.vjob",o.rows[0].values.vjob),t.cardTable.setValByKeyAndIndex(I,a,"pk_linkman.phone",o.rows[0].values.phone),t.cardTable.setValByKeyAndIndex(I,a,"pk_linkman.cell",o.rows[0].values.cell)))}})}},cancelBtnClick:function(){t.form.EmptyAllFormValue(w),t.modal.close("linkmanModal")},closeModalEve:function(){t.form.EmptyAllFormValue(w),t.modal.close("linkmanModal")}})},this.tableButtonClick=function(t,a,o,r,n){switch(a){case"spread":t.cardTable.toggleRowView(I,r);break;case"delline":t.cardTable.delRowsByIndex(I,n);break;case"insertline":t.form.setFormStatus(w,"edit"),t.modal.show("linkmanModal",{userControl:!0,beSureBtnClick:function(){if(e.props.form.isCheckNow(w)){var a=t.form.getAllFormValue(w);(0,d.ajax)({url:C.saveLinkman,data:{pageid:e.config.pageCode,gridModel:a},success:function(e){var o=e.success,r=e.data;o&&r&&(t.modal.close("linkmanModal"),t.cardTable.addRow(I,n+1,{pk_linkman:{value:r},"pk_linkman.name":a.rows[0].values.name,"pk_linkman.sex":a.rows[0].values.sex,"pk_linkman.vjob":a.rows[0].values.vjob,"pk_linkman.phone":a.rows[0].values.phone,"pk_linkman.cell":a.rows[0].values.cell}))}})}},cancelBtnClick:function(){t.form.EmptyAllFormValue(w),t.modal.close("linkmanModal")},closeModalEve:function(){t.form.EmptyAllFormValue(w),t.modal.close("linkmanModal")}});break;case"editline":(0,d.ajax)({url:C.queryLinkman,data:{pageid:t.config.pageCode,moudleid:w,pk:r.values.pk_linkman.value},success:function(a){var o=a.success,r=a.data;o&&r&&(t.form.setFormStatus(w,"edit"),t.form.setAllFormValue(u({},w,a.data[w])),e.tablemodalshow(t,n))}})}},this.setDefaultValue=function(){(0,d.ajax)({url:C.queryDefaultDataUrl,data:{nodeType:e.config.nodeType},success:function(t){if(t.data.carddate.head){var a=t.data.carddate.head[e.config.formId],o=a.rows[0].values.code.value;a.rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,a)),console.log(e.config.formId,{code:!0}),e.props.form.setFormItemsDisabled(e.config.formId,{code:!t.data.isCodeEdit}),e.state.isPrecode=t.data.isPrecode,e.setState({project_code:o})}t.data.carddate.body&&e.props.cardTable.setTableData(e.config.tableId,t.data.carddate.body[e.config.tableId]),t.data.message&&(0,d.toast)({content:t.data.message,color:"warning"}),e.toggleShow()},error:function(e){}})},this.toggleShow=function(){var t=e.props.getUrlParam("status"),a="browse"!==t;e.props.button.setButtonVisible(["add","edit","delete","copy","refresh","back","print"],!a),e.props.button.setButtonVisible(["save","saveadd","cancel","addline"],a),e.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!a);var o=e.props.form.getFormItemsValue(e.config.formId,"pk_group").value,r=e.props.form.getFormItemsValue(e.config.formId,"pk_org").value,n="GROPE_NODE"===e.config.nodeType&&o!=r;e.props.button.setDisabled({edit:n,delete:n,saveadd:"edit"==t}),e.props.form.setFormStatus(e.config.formId,t),e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:a}),e.props.cardTable.setStatus(e.config.tableId,"browse"===t?"browse":"edit"),e.setState({stated:t})},this.getdata=function(t,a,o){var r=b(t,_);if(r&&!a){if(r.carddate.head){r.carddate.head[e.config.formId].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,r.carddate.head[e.config.formId]));var n=r.carddate.head[e.config.formId].rows[0].values,s=n.code.value;e.setState({project_code:s}),e.props.form.setFormItemsDisabled(e.config.formId,{code:!r.isCodeEdit}),e.state.isPrecode=r.isPrecode;var l="GROPE_NODE"===e.config.nodeType&&n.pk_group.value!=n.pk_org.value;e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:l})}r.carddate.body&&e.props.cardTable.setTableData(e.config.tableId,r.carddate.body[e.config.tableId]),e.toggleShow()}else{var i={pk:t,pagecode:e.config.pageCode};(0,d.ajax)({url:C.queryaddresscardUrl,data:i,success:function(a){if(a.data.carddate.head){a.data.carddate.head[e.config.formId].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,a.data.carddate.head[e.config.formId]));var r=a.data.carddate.head[e.config.formId].rows[0].values,n=r.code.value;e.setState({project_code:n}),e.props.form.setFormItemsDisabled(e.config.formId,{code:!a.data.isCodeEdit}),e.state.isPrecode=a.data.isPrecode;var s="GROPE_NODE"===e.config.nodeType&&r.pk_group.value!=r.pk_org.value;e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:s})}a.data.carddate.body&&e.props.cardTable.setTableData(e.config.tableId,a.data.carddate.body[e.config.tableId]),a.data.head=a.data.carddate.head,g(D,t,a.data,e.config.formId,_),o&&o(),e.toggleShow()}})}},this.copydate=function(t){var a={pk:t,pagecode:e.config.pageCode};(0,d.ajax)({url:C.copyaddressUrl,data:a,success:function(t){if(t.data.carddate.head){t.data.carddate.head[e.config.formId].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,t.data.carddate.head[e.config.formId]));var a=t.data.carddate.head[e.config.formId].rows[0].values.code.value;e.setState({project_code:a}),e.props.form.setFormItemsDisabled(e.config.formId,{code:!t.data.isCodeEdit}),e.state.isPrecode=t.data.isPrecode}t.data.carddate.body&&e.props.cardTable.setTableData(e.config.tableId,t.data.carddate.body[e.config.tableId]),e.toggleShow()}})},this.pageInfoClick=function(t,a){console.log(a),a&&null!=a&&(t.setUrlParam({id:a}),e.getdata(a))},this.saveClick=function(){if(e.props.cardTable.filterEmptyRows(I),0==e.state.isPrecode&&null==e.props.form.getFormItemsValue(e.config.formId,"code").value&&e.props.form.setFormItemsValue(e.config.formId,{code:{value:".",display:null}}),e.props.form.isCheckNow(e.config.formId)){var t=e.props.createMasterChildData(e.config.pageCode,e.config.formId,e.config.tableId);t.head[e.config.formId].rows[0].values.enablestate.value=1==t.head[e.config.formId].rows[0].values.enablestate.value?2:3;var a=C.SaveaddressUrl;"edit"===e.props.getUrlParam("status")&&(a=C.updateaddressUrl),(0,d.ajax)({url:a,data:t,success:function(t){if(t.success){var a=null;if(t.data){if(t.data.carddate.head){t.data.carddate.head[e.config.formId].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,t.data.carddate.head[e.config.formId]));var o=t.data.carddate.head[e.config.formId].rows[0].values,r=o.code.value;a=o[D].value,e.setState({project_code:r}),e.props.form.setFormItemsDisabled(e.config.formId,{code:!t.data.isCodeEdit});var n="GROPE_NODE"===e.config.nodeType&&o.pk_group.value!=o.pk_org.value;e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:n})}t.data.carddate.body&&e.props.cardTable.setTableData(e.config.tableId,t.data.carddate.body[e.config.tableId]),t.data.head=t.data.carddate.head,"add"===e.props.getUrlParam("status")&&v(a,t.data,e.config.formId,_),g(D,a,t.data,e.config.formId,_),e.props.setUrlParam({status:"browse",id:a}),(0,d.toast)({title:e.state.json["10140ADRB-000007"],color:"success"}),e.toggleShow()}}}})}},this.saveaddClick=function(){if(e.props.cardTable.filterEmptyRows(I),0==e.state.isPrecode&&null==e.props.form.getFormItemsValue(e.config.formId,"code").value&&e.props.form.setFormItemsValue(e.config.formId,{code:{value:".",display:null}}),e.props.form.isCheckNow(e.config.formId)){var t=e.props.createMasterChildData(e.config.pageCode,e.config.formId,e.config.tableId);t.head[e.config.formId].rows[0].values.enablestate.value=1==t.head[e.config.formId].rows[0].values.enablestate.value?2:3;var a=C.SaveaddressUrl;"edit"===e.props.getUrlParam("status")&&(a=C.updateaddressUrl),(0,d.ajax)({url:a,data:t,success:function(t){if(t.success){var a=null;if(t.data){if(t.data.carddate.head){t.data.carddate.head[e.config.formId].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,t.data.carddate.head[e.config.formId]));var o=t.data.carddate.head[e.config.formId].rows[0].values,r=o.code.value;a=o[D].value,e.setState({project_code:r}),e.props.form.setFormItemsDisabled(e.config.formId,{code:!t.data.isCodeEdit});var n="GROPE_NODE"===e.config.nodeType&&o.pk_group.value!=o.pk_org.value;e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:n})}t.data.carddate.body&&e.props.cardTable.setTableData(e.config.tableId,t.data.carddate.body[e.config.tableId]),t.data.head=t.data.carddate.head,"add"===e.props.getUrlParam("status")&&v(a,t.data,e.config.formId,_),g(D,a,t.data,e.config.formId,_),e.props.setUrlParam({status:"add",id:null}),(0,d.toast)({title:e.state.json["10140ADRB-000007"],color:"success"}),e.props.form.EmptyAllFormValue(e.config.formId),e.props.cardTable.setTableData(e.config.tableId,{rows:[]}),e.setDefaultValue()}}}})}},this.delConfirm=function(){(0,d.ajax)({url:C.deladdressUrl,data:{id:e.props.getUrlParam("id"),ts:e.props.form.getFormItemsValue(e.config.formId,"ts").value},success:function(t){if(t){var a=e.props.getUrlParam("id"),o=y(a,_);k(D,a,_),(0,d.toast)({color:"success",title:e.state.json["10140ADRB-000008"]}),o?(e.props.setUrlParam({status:"browse",id:o}),e.getdata(o)):e.props.pushTo("/list",{})}}})},this.modelSave=function(t){t.cardTable.closeModel(e.config.tableId),e.saveClick()},this.afterEvent=function(t,a,o,r,n,s){switch(o){case"country":t.form.setFormItemsDisabled(a,{province:null==r.value}),null==r.value&&t.form.setFormItemsDisabled(a,{city:!0,region:!0}),t.form.setFormItemsValue(e.config.formId,{province:{value:null,display:null},city:{display:null,value:null},region:{display:null,value:null}});break;case"province":t.form.setFormItemsDisabled(a,{city:null==r.value}),null==r.value&&t.form.setFormItemsDisabled(a,{region:!0}),t.form.setFormItemsValue(e.config.formId,{city:{display:null,value:null},region:{display:null,value:null}});break;case"city":t.form.setFormItemsDisabled(a,{region:null==r.value}),t.form.setFormItemsValue(e.config.formId,{region:{display:null,value:null}});break;case"enablestate":var l={pk:t.form.getAllFormValue(a).rows[0].values.pk_addressdoc.value,enablestate:r.value?"2":"3",ts:t.form.getAllFormValue(a).rows[0].values.ts.value,nodeType:e.config.nodeType,moduleid:e.config.formId,pagecode:e.config.pageCode};(0,d.ajax)({url:C.validateUrl,data:{pk:t.getUrlParam("id"),nodeType:t.config.nodeType,type:r.value?"enable":"disable"},success:function(t){(0,d.ajax)({url:C.enablestateUrl,data:l,success:function(t){if(t.data.head){t.data.head[e.config.formId].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.form.setAllFormValue(u({},e.config.formId,t.data.head[e.config.formId]));var a=t.data.head[e.config.formId].rows[0].values.code.value;e.setState({project_code:a})}t.data.body&&e.props.cardTable.setTableData(e.config.tableId,t.data.body[e.config.tableId]),e.toggleShow(),(0,d.toast)({title:r.value?e.state.json["10140ADRB-000009"]:e.state.json["10140ADRB-000010"]})}})},error:function(a){(0,d.toast)({content:a.message,color:"warning"}),t.form.setFormItemsValue(e.config.formId,{enablestate:{value:!r.value}})}})}e.state.isedit=!e.state.isedit,e.setState(e.state)},this.getTableHead=function(){var t=e.props.button.createButtonApp;e.props.getUrlParam("status");return l.default.createElement("div",{className:"shoulder-definition-area"},l.default.createElement("div",{className:"definition-icons"},t({area:"table-header-button",buttonLimit:5,onButtonClick:e.buttonClick.bind(e),popContainer:document.querySelector(".table-header-button")}),e.props.cardTable.createBrowseIcons(e.config.tableId,{iconArr:["close","open","max","setCol"],maxDestAreaId:"nc-bill-card"})))},this.createLinkmanForm=function(){var t=e.props.form.createForm;return l.default.createElement("div",null,l.default.createElement("div",{className:"nc-bill-form-area"},t(w,{onAfterEvent:e.modalAfterEvent.bind(e)})))},this.modalAfterEvent=function(){},this.linkadd=function(t){t.form.setFormStatus(w,"edit"),t.modal.show("linkmanModal",{userControl:!0,beSureBtnClick:function(){if(e.props.form.isCheckNow(w)){var a=t.form.getAllFormValue(w);(0,d.ajax)({url:C.saveLinkman,data:{pageid:e.config.pageCode,gridModel:a},success:function(e){var o=e.success,r=e.data;if(o&&r){t.modal.close("linkmanModal");var n=t.cardTable.getNumberOfRows(I);t.cardTable.addRow(I,n,{pk_linkman:{value:r},"pk_linkman.name":a.rows[0].values.name,"pk_linkman.sex":a.rows[0].values.sex,"pk_linkman.vjob":a.rows[0].values.vjob,"pk_linkman.phone":a.rows[0].values.phone,"pk_linkman.cell":a.rows[0].values.cell})}}})}},cancelBtnClick:function(){t.form.EmptyAllFormValue(w),t.modal.close("linkmanModal")},closeModalEve:function(){t.form.EmptyAllFormValue(w),t.modal.close("linkmanModal")}})}},o);j=(0,d.createPage)({})(j),t.default=j},8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(2),d=u(l),i=a(1),c=u(a(3));function u(e){return e&&e.__esModule?e:{default:e}}var f=i.high.PrintOutput,p=i.cardCache.setDefData,m=i.cardCache.getDefData,b=(0,i.getBusinessInfo)(),g="AddrDocQryTmp",v="addressdoc",h="pk_addressdoc",y="uapbd.address.addressdoc_grp.dataSource",k={queryListUrl:"/nccloud/uapbd/address/queryaddress.do",deladdressUrl:"/nccloud/uapbd/address/deladdress.do",queryPageUrl:"/nccloud/uapbd/address/queryAddressPageGridByPks.do",enablestateUrl:"/nccloud/uapbd/address/enableAddressDocInfo.do",print:"/nccloud/uapbd/address/printAddressDocInfo.do",validateUrl:"/nccloud/uapbd/address/validateAddressDoc.do"},I=(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.call(a),a.config=Object.assign({title:"10140ADRB-000000",tableId:"addressdoc",searchId:"AddrDocQryTmp",pageCode:"10140ADRB_list",appcode:"10140ADRB",nodeType:"GLOBE_NODE",primaryKey:"pk_addressdoc",urls:k},e.config),a.moduleId="2052",a.state={SelectedData:null,showOffDisable:!1,isShowOff:m("addressisShowOff",y)||!1,pks:[],json:{},inlt:null},a.initTemplate(a.props,function(){var e=m("searchParams",y);e&&0!=e&&a.props.search.setSearchValue(g,e.conditions),a.props.table.getAllTableData(a.config.tableId).rows.length>0&&a.props.button.setDisabled({print:!1,output:!1})}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),s(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"buttonClick",value:function(e,t){var a=this;switch(t){case"add":e.pushTo("/card",{status:"add",id:null});break;case"refresh":this.getData(e,function(){(0,i.toast)({title:a.state.json["10140ADRB-000006"],color:"success"})});break;case"copy":e.pushTo("/card",{status:"add",id:this.state.selectData});break;case"print":this.pintFunction({funcode:"10140ADRB",nodekey:"addresslist",outputType:"print"});break;case"output":var o=[];this.props.table.getAllTableData(this.config.tableId).rows.forEach(function(e,t){o.push(e.values[h].value)}),this.setState({pks:o},this.refs.printOutput.open())}}},{key:"pintFunction",value:function(e){var t=[];this.props.table.getAllTableData(this.config.tableId).rows.forEach(function(e,a){t.push(e.values[h].value)}),e.oids=t,0!=t.length?(0,i.print)("pdf",k.print,n({},e)):(0,i.toast)({color:"success",content:this.state.json["10140ADRB-000021"]})}},{key:"doubleClick",value:function(e,t,a){this.props.pushTo("/card",{status:"browse",id:e[h].value})}},{key:"onClick",value:function(e,t,a,o){this.state.selectData=a[h].value,this.setState(this.state),this.props.button.setDisabled({copy:!1})}},{key:"clickSearchBtn",value:function(e,t){var a=this;p("searchParams",y,t),this.getData(this.props,function(e){if(e){var t=e[a.config.tableId].allpks.length;if(0==t)(0,i.toast)({content:a.state.json["10140ADRB-000022"],color:"warning"});else{a.state.inlt&&a.state.inlt.get("10140ADRB-000023",{count:t});console.log("this.state.inlt : "),console.log(a.state.inlt),(0,i.toast)({content:a.state.inlt&&a.state.inlt.get("10140ADRB-000023",{count:t}),color:"success"})}}else(0,i.toast)({content:a.state.json["10140ADRB-000022"],color:"warning"})})}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,o=e.search,r=e.editTable,n=e.modal,s=(r.createEditTable,this.props.button.getButtons(),t.createSimpleTable),l=o.NCCreateSearch,c=i.base.NCCheckbox,u=n.createModal,p=a.createButtonApp;a.getButtons;return d.default.createElement("div",{className:"nc-bill-list"},d.default.createElement("div",{className:"header"},d.default.createElement("h2",{className:"title"},this.state.json[this.config.title]),d.default.createElement("span",{className:"showOff"},d.default.createElement(c,{checked:this.state.isShowOff,onChange:this.showOffChange.bind(this),disabled:this.state.showOffDisable},this.state.json["10140ADRB-000025"])),d.default.createElement("div",{className:"btn-group"},p({area:"list-header-button",buttonLimit:3,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".list-header-button")}))),d.default.createElement("div",{className:"nc-bill-search-area"},l(this.config.searchId,{clickSearchBtn:this.clickSearchBtn.bind(this),oid:m("OID",y),defaultConditionsNum:5})),d.default.createElement("div",{className:"nc-bill-table-area"},s(this.config.tableId,{handlePageInfoChange:this.pageInfoClick.bind(this),dataSource:y,pkname:h,componentInitFinished:function(){},onRowClick:this.onClick.bind(this),showIndex:!0,onRowDoubleClick:this.doubleClick.bind(this)})),u("modal",{noFooter:!1}),d.default.createElement(f,{ref:"printOutput",url:k.print,data:{funcode:"10140ADRB",nodekey:"addresslist",oids:this.state.pks,outputType:"output"}}))}}]),t}(),r=function(){var e=this;this.initTemplate=function(t,a){(0,c.default)(t)({pagecode:t.config.pageCode?t.config.pageCode:"10140ADRB_list"},{moduleId:"10140ADRB",domainName:"uapbd"},function(o,r,n){if(r&&(e.state.json=r,n&&(e.state.inlt=n)),o){if(o.template){var s=o.template;p("OID",y,s[g].oid),s=e.modifierMeta(t,s),t.meta.setMeta(s,function(){t.search.setSearchValByField(g,"pk_org",{value:b?b.groupId:null,display:b?b.groupName:null})})}if(o.button){var l=o.button;t.button.setButtons(l),t.button.setDisabled({copy:!0,print:!0,output:!0}),t.button.setPopContent({delete:e.state.json["10140ADRB-000016"]})}a&&a()}})},this.buttongroups=function(e,t){return"GROPE_NODE"===e.config.nodeType&&t.pk_group.value!=t.pk_org.value?[]:1==t.enablestate.value?["edit","delete","disable"]:["edit","delete","enable"]},this.modifierMeta=function(t,a){return t||(t=e.props),a||(a=e.props.meta.getMeta()),a[g].items.map(function(e){"pk_org"==e.attrcode&&(e.isMultiSelectedEnabled=!0,e.queryCondition=function(){return{AppCode:t.config.appcode,TreeRefActionExt:"nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder"}})}),a[v].items=a[v].items.map(function(e,a){return e.width=150,"code"==e.attrcode&&(e.render=function(e,a,o){return d.default.createElement("a",{style:{color:"#007ace",cursor:"pointer"},onClick:function(){t.pushTo("/card",{status:"browse",id:a[h].value})}},a?a.code&&a.code.value:null)}),e}),a[v].items.push({attrcode:"opr",itemtype:"customer",label:e.state.json["10140ADRB-000001"],width:200,className:"table-opr",fixed:"right",visible:!0,render:function(a,o,r){var n=e.buttongroups(t,o);return t.button.createOprationButton(n,{area:"table-opr-button",buttonLimit:3,onButtonClick:function(t,n){return e.tableButtonClick(t,n,a,o,r)}})}}),a},this.tableButtonClick=function(t,a,o,r,n){switch(a){case"edit":(0,i.ajax)({url:k.validateUrl,data:{pk:r[h].value,nodeType:t.config.nodeType,type:"edit"},success:function(e){t.pushTo("/card",{status:"edit",id:r[h].value})}});break;case"delete":(0,i.ajax)({url:k.validateUrl,data:{pk:r[h].value,nodeType:t.config.nodeType,type:"delete"},success:function(a){var o=r[h].value;(0,i.ajax)({url:k.deladdressUrl,data:{id:r[h].value,ts:r.ts.value},success:function(a){a.success&&((0,i.toast)({title:e.state.json["10140ADRB-000008"],color:"success"}),t.table.deleteCacheId(v,o),t.table.deleteTableRowsByIndex(v,n))}})}});break;case"enable":case"disable":(0,i.ajax)({url:k.validateUrl,data:{pk:r[h].value,nodeType:t.config.nodeType,type:a},success:function(a){var o={pk:r[h].value,enablestate:r.enablestate.value?"2":"3",ts:r.ts.value,moduleid:v,pagecode:"GLOBE_NODE"==t.config.nodeType?"10140ADRB_card":"10140ADRG_card"};(0,i.promptBox)({color:"info",title:r.enablestate.value?e.state.json["10140ADRB-000017"]:e.state.json["10140ADRB-000018"],content:r.enablestate.value?e.state.json["10140ADRB-000019"]:e.state.json["10140ADRB-000020"],beSureBtnClick:function(){(0,i.ajax)({url:k.enablestateUrl,data:o,success:function(a){t.table.setValByKeyAndIndex(v,n,"enablestate",{value:!r.enablestate.value}),t.table.setValByKeyAndIndex(v,n,"ts",a.data.head.head.rows[0].values.ts),(0,i.toast)({title:r.enablestate.value?e.state.json["10140ADRB-000009"]:e.state.json["10140ADRB-000010"]})}})},cancelBtnClick:function(){}})}})}},this.showOffChange=function(){e.setState({isShowOff:!e.state.isShowOff},function(){p("addressisShowOff",y,e.state.isShowOff),e.getData(e.props)})},this.pageInfoClick=function(t,a,o){var r={allpks:o,pageid:e.config.pageCode?e.config.pageCode:"10140ADRB_list"};(0,i.ajax)({url:k.queryPageUrl,data:r,success:function(e){var a=e.success,o=e.data;a&&(o?(o[v].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),t.table.setAllTableData(v,o[v])):t.table.setAllTableData(v,{rows:[]}))}})},this.getData=function(t,a){var o=m("searchParams",y),r=e.state.isShowOff,n=t.table.getTablePageInfo(e.config.tableId),s=e.props.search.getQueryInfo(g);o||(o=s.querycondition);var l={showOfff:r,nodeType:e.config.nodeType,querycondition:null==o?null:o,pagecode:e.config.pageCode?e.config.pageCode:"10140ADRB_list",pageInfo:n,queryAreaCode:g,oid:s.oid,querytype:"tree"};(0,i.ajax)({url:k.queryListUrl,data:l,success:function(t){var o=t.success,r=t.data;o&&(r?(e.props.button.setDisabled({print:!1,output:!1}),r[v].rows.forEach(function(e,t,a){"2"===e.values.enablestate.value?e.values.enablestate.value=!0:e.values.enablestate.value=!1}),e.props.table.setAllTableData(v,r[v])):e.props.table.setAllTableData(v,{rows:[]}),a&&a(r))}})}},o);I=(0,i.createPage)({})(I),t.default=I}})});
//# sourceMappingURL=index.72b2c500.js.map